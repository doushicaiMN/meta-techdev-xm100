<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>ubxfwupdate: updateCore.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="u-blox_logo_09.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ubxfwupdate
   &#160;<span id="projectnumber">21.05</span>
   </div>
   <div id="projectbrief">Firmware Update Tool Documentation &mdash; Copyright (c) 2015 u-blox AG.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('update_core_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">updateCore.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="update_core_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*******************************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (C) u-blox AG</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * u-blox AG, Thalwil, Switzerland</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * Permission to use, copy, modify, and distribute this software for any</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * purpose without fee is hereby granted, provided that this entire notice</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * is included in all copies of any software which is or includes a copy</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * or modification of this software and in all copies of the supporting</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * documentation for such software.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * THIS SOFTWARE IS BEING PROVIDED &quot;AS IS&quot;, WITHOUT ANY EXPRESS OR IMPLIED</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * WARRANTY. IN PARTICULAR, NEITHER THE AUTHOR NOR U-BLOX MAKES ANY</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * REPRESENTATION OR WARRANTY OF ANY KIND CONCERNING THE MERCHANTABILITY</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * OF THIS SOFTWARE OR ITS FITNESS FOR ANY PARTICULAR PURPOSE.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *******************************************************************************</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * Project: firmwareUpdateTool v21.05</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * Purpose: Provide sample code to do a FW update</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> ******************************************************************************/</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/*!</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">  \file</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">  \brief  Declaration of function that handle the update on the receiver</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="receiver_8h.html">receiver.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="flash_8h.html">flash.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="image_8h.html">image.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="update_core_8h.html#a177e4581349927b04d81ac62ed804377">   37</a></span>&#160;<span class="preprocessor">#define PACKETSIZE               512   </span><span class="comment">//!&lt; size of a packet to send to the receiver</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="update_core_8h.html#a91d65cd02aa7f90fc2a0ca9e714adfcd">   38</a></span>&#160;<span class="comment"></span>#define ERASE_TIMEOUT          12000   <span class="comment">//!&lt; timeout for erasing a sector</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="update_core_8h.html#a51fb6ccd37b6edb264095f862074a4f3">   39</a></span>&#160;<span class="comment"></span>#define CRC_TIMEOUT             3000   <span class="comment">//!&lt; timeout for the CRC computation</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="update_core_8h.html#a543a47aa06fc3f724441e2ee0751af5a">   40</a></span>&#160;<span class="comment"></span>#define ERASE_RETRIES              4   <span class="comment">//!&lt; number of retries to erase block</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="update_core_8h.html#a5b1cd04a426238a3a30f7740e6b539de">   41</a></span>&#160;<span class="comment"></span>#define WRITE_RETRIES              4   <span class="comment">//!&lt; number of retries to write block</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="update_core_8h.html#a3af75bd8417b347229705d6d522ad5c3">   42</a></span>&#160;<span class="comment"></span>#define WRITE_TIMEOUT           3000   <span class="comment">//!&lt; timeout for writing a block</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="update_core_8h.html#a8818657501b169fe9289ed5d37e29b11">   43</a></span>&#160;<span class="comment"></span>#define CHIP_ERASE_TIMEOUT     45000   <span class="comment">//!&lt; chip erase timeout</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="update_core_8h.html#a23a9099a5f8fc9c6e253c0eecb2be8db">   44</a></span>&#160;<span class="comment"></span>#define FLASH_BASE        0x00800000   <span class="comment">//!&lt; Flash base address</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="update_core_8h.html#ad35c1036b7f001b47306c58a18329400">   45</a></span>&#160;<span class="comment"></span>#define RAM_BASE          0x00800000   <span class="comment">//!&lt; RAM base address</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="update_core_8h.html#a4c7b5bd6e606e8e0f1dabd735eb5d407">   46</a></span>&#160;<span class="comment"></span>#define DUMPINTERVAL            1000   <span class="comment">//!&lt; timeout between two dumps when verbose &gt; 1</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="update_core_8h.html#ac8a565248bf80a622adcf61f4fe6dbc3">   47</a></span>&#160;<span class="comment"></span>#define CONSOLE_WIDTH             80   <span class="comment">//!&lt; Width of the console</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="update_core_8h.html#ad8b6fb58e055df6576bb620f05220448">   49</a></span>&#160;<span class="preprocessor">#define MAX_PENDING_ERASES         2   </span><span class="comment">//!&lt; The maximum number of erase commands to be present in the receiver queue</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">//! Acknowledge states</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="update_core_8h.html#a130a626da56d697af470eccd12259c39">   52</a></span>&#160;<span class="comment"></span><span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39">ACK_STATE_e</a></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="update_core_8h.html#a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9">   54</a></span>&#160;    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9">ACK_INIT</a>        = <span class="charliteral">&#39;.&#39;</span>,  <span class="comment">//!&lt; initial state</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a550adeb63bc97672716881df6a990992">   55</a></span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a550adeb63bc97672716881df6a990992">ACK_ERASE_SENT</a>  = <span class="charliteral">&#39;e&#39;</span>,  <span class="comment">//!&lt; erase pending for packet (sector-blocks)</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">   56</a></span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">ACK_ERASE_ACK</a>   = <span class="charliteral">&#39;E&#39;</span>,  <span class="comment">//!&lt; erase acknowledged for packet</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a975bfb38aec53817024f7a6e6dc67230">   57</a></span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a975bfb38aec53817024f7a6e6dc67230">ACK_WRITE_SENT</a>  = <span class="charliteral">&#39;w&#39;</span>,  <span class="comment">//!&lt; write pending for packet</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="update_core_8h.html#a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0">   58</a></span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0">ACK_WRITE_ACK</a>   = <span class="charliteral">&#39;W&#39;</span>,  <span class="comment">//!&lt; write acknowledged for packet</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="update_core_8h.html#a130a626da56d697af470eccd12259c39aaf817273bb01ceb4204f01b3f26ea8d4">   59</a></span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39aaf817273bb01ceb4204f01b3f26ea8d4">ACK_UNKNOWN</a>     = <span class="charliteral">&#39;?&#39;</span>   <span class="comment">//!&lt; unknown state</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span>} <a class="code" href="update_core_8h.html#a7668f0c071e2ce16196b14f4710145c1">ACK_STATE_t</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//! Preserves the state of the upgrade and the organization of the flash</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html">   63</a></span>&#160;<span class="comment"></span><span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a9478a793293df1813c4a42d7701a5156">   65</a></span>&#160;    <a class="code" href="struct_r_c_v___d_a_t_a__t.html">RCV_DATA_t</a> *<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9478a793293df1813c4a42d7701a5156">Rx</a>;             <span class="comment">//!&lt; receiver to communicate with</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">   66</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a>;           <span class="comment">//!&lt; number of sectors to erase</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">   67</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a>;           <span class="comment">//!&lt; number of packets to write</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a6ff39625defb3d08d5991949c4f64696">   68</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a6ff39625defb3d08d5991949c4f64696">writtenUntil</a>;            <span class="comment">//!&lt; used to optimize the write loop</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a33a6ef6f3616d5c73fbaa1357921c0a7">   69</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a33a6ef6f3616d5c73fbaa1357921c0a7">erasedUntil</a>;             <span class="comment">//!&lt; used to optimize the erase loop</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">// organization of the flash</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#aeb4ca04540e3469c6cf593fb6c49e137">   72</a></span>&#160;    <a class="code" href="struct_b_l_o_c_k___a_r_r__s.html">BLOCK_ARR_t</a> *<a class="code" href="struct_u_p_d___c_o_r_e__t.html#aeb4ca04540e3469c6cf593fb6c49e137">FlashOrg</a>;      <span class="comment">//!&lt; flash organization</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a4b61e975215ddcf537ac8f1e4b40ef87">   73</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a4b61e975215ddcf537ac8f1e4b40ef87">FlashSize</a>;               <span class="comment">//!&lt; size of the flash</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a76347d13c839ff2559595d6fead2d913">   74</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a76347d13c839ff2559595d6fead2d913">FwBase</a>;                  <span class="comment">//!&lt; start address of the firmware on the flash</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#ab132f60260d98f3837ddf20f52a60036">   75</a></span>&#160;<span class="comment"></span>    <a class="code" href="union_f_w_h_e_a_d_e_r__u.html">FWHEADER_t</a>* <a class="code" href="struct_u_p_d___c_o_r_e__t.html#ab132f60260d98f3837ddf20f52a60036">pData</a>;          <span class="comment">//!&lt; pointer to the data to write</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a9f06a0ef019cc68c0342c8ae6fab68c1">   76</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9f06a0ef019cc68c0342c8ae6fab68c1">ImageSize</a>;               <span class="comment">//!&lt; size of the image</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#adea65c999b522373ffdad7f378836bd4">   78</a></span>&#160;    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> *<a class="code" href="struct_u_p_d___c_o_r_e__t.html#adea65c999b522373ffdad7f378836bd4">pEraseTimeout</a>;          <span class="comment">//!&lt; array to store timeouts for the to be erased sectors</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a473b072e9732618d37a1df6e05fb69c6">   79</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a> *<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a473b072e9732618d37a1df6e05fb69c6">pEraseRetryCnt</a>;         <span class="comment">//!&lt; array to store retry counts for the to be erased sectors</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">   80</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a> *<a class="code" href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">pEraseState</a>;            <span class="comment">//!&lt; array to store erase status for the to be erased sectors</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a73a8daa07d3bbd09ad1b996c032d38fe">   82</a></span>&#160;    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> *<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a73a8daa07d3bbd09ad1b996c032d38fe">pWriteTimeout</a>;          <span class="comment">//!&lt; array to store timeouts for the to be written packets</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a048cc8432729da4d1c3d534ea76bda31">   83</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a> *<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a048cc8432729da4d1c3d534ea76bda31">pWriteRetryCnt</a>;         <span class="comment">//!&lt; array to store retry counts for the to be written packets</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">   84</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a> *<a class="code" href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">pWriteState</a>;            <span class="comment">//!&lt; array to store erase status for the to be written packets</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#aeb6b1b5a2bdd4ff1335b2060a04ecd38">   86</a></span>&#160;    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#aeb6b1b5a2bdd4ff1335b2060a04ecd38">PendingErases</a>;           <span class="comment">//!&lt; number of erases pending</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a0bcb4d97e337d93937d3be604776ed8f">   87</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a0bcb4d97e337d93937d3be604776ed8f">PendingWrites</a>;           <span class="comment">//!&lt; number of writes pending</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a091041a0eb56f2bdd4dc1f1931f9979d">   89</a></span>&#160;    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a091041a0eb56f2bdd4dc1f1931f9979d">sLastDumpTime</a>;           <span class="comment">//!&lt; time of the last dump (for verbose &gt; 1)</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#a1cbc5b9d688c2a8ce86eea878c111500">   91</a></span>&#160;    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#a1cbc5b9d688c2a8ce86eea878c111500">MaxPendingWritesNum</a>;     <span class="comment">//!&lt; max number of which can be queued in the receiver writes pending</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_u_p_d___c_o_r_e__t.html#af4892b3558ebdfb2c651670dee779d06">   92</a></span>&#160;<span class="comment"></span>    <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="struct_u_p_d___c_o_r_e__t.html#af4892b3558ebdfb2c651670dee779d06">eraseInProgres</a>;        <span class="comment">//!&lt; Erase in progress</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span>} <a class="code" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">/*!</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> * Initializer for UPD_CORE_t.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> * \param rx                    receiver to do the update on</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> * \param numberSectors         number of sectors to erase</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> * \param numberPackets         number of packets to write</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> * \param flashOrg              information about the organization of the flash</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> * \param flashSize             size of the flash</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> * \param MaxPendingWritesNum   Maximum possible number of pending writes</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> * \param eraseInProgres        Means that flash erase was started but not finished before entering update.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> * \return The control structure on success, NULL on fail</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<a class="code" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a>* <a class="code" href="update_core_8h.html#a67c60123bde16f3fdf5a6e04c970bfce">updInit</a>( <a class="code" href="struct_r_c_v___d_a_t_a__t.html">RCV_DATA_t</a> *rx</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                   , <a class="code" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> numberSectors</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                   , <a class="code" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> numberPackets</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                   , <a class="code" href="struct_b_l_o_c_k___a_r_r__s.html">BLOCK_ARR_t</a> *flashOrg</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                   , <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> flashSize</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                   , <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> MaxPendingWritesNum</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                   , <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> eraseInProgres);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/*!</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"> * De-Initializer for UPD_CORE_t</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> * \param upd                   control structure</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keywordtype">void</span> <a class="code" href="update_core_8h.html#a5b75de599f50c2489681e0ffc8432230">updDeinit</a>(<a class="code" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a> *upd);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/*!</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> * Do the update.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> * \param upd                   control structure</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> * \param data                  pointer to the data to write</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> * \param size                  size of the data</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> * \param fwBase                start address of the firmware on the flash</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> * \return TRUE if successful</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> <a class="code" href="update_core_8h.html#a4c065d6b9a1ae76e08bde0a84ee898e7">updUpdate</a>(<a class="code" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a> *upd, <a class="code" href="union_f_w_h_e_a_d_e_r__u.html">FWHEADER_t</a>* data, <span class="keywordtype">size_t</span> size, <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> fwBase);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_acfc1f7f83dd9db1b09ba2a599c51e033"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">UPD_CORE_t::pWriteState</a></div><div class="ttdeci">CH * pWriteState</div><div class="ttdoc">array to store erase status for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00084">updateCore.h:84</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_ab132f60260d98f3837ddf20f52a60036"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#ab132f60260d98f3837ddf20f52a60036">UPD_CORE_t::pData</a></div><div class="ttdeci">FWHEADER_t * pData</div><div class="ttdoc">pointer to the data to write </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00075">updateCore.h:75</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a048cc8432729da4d1c3d534ea76bda31"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a048cc8432729da4d1c3d534ea76bda31">UPD_CORE_t::pWriteRetryCnt</a></div><div class="ttdeci">U1 * pWriteRetryCnt</div><div class="ttdoc">array to store retry counts for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00083">updateCore.h:83</a></div></div>
<div class="ttc" id="types_8h_html_a79199901c1122f5e17970b6887de3d6a"><div class="ttname"><a href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a></div><div class="ttdeci">unsigned __int8 U1</div><div class="ttdoc">8-bit unsigned integer number(unsigned character) </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00058">types.h:58</a></div></div>
<div class="ttc" id="update_core_8h_html_a7668f0c071e2ce16196b14f4710145c1"><div class="ttname"><a href="update_core_8h.html#a7668f0c071e2ce16196b14f4710145c1">ACK_STATE_t</a></div><div class="ttdeci">enum ACK_STATE_e ACK_STATE_t</div><div class="ttdoc">Acknowledge states. </div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a></div><div class="ttdoc">Preserves the state of the upgrade and the organization of the flash. </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00063">updateCore.h:63</a></div></div>
<div class="ttc" id="types_8h_html_a05882823395fd219ae0b65679baa29c4"><div class="ttname"><a href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a></div><div class="ttdeci">unsigned __int32 U4</div><div class="ttdoc">32-bit unsigned integer number </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00054">types.h:54</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a6ff39625defb3d08d5991949c4f64696"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a6ff39625defb3d08d5991949c4f64696">UPD_CORE_t::writtenUntil</a></div><div class="ttdeci">I4 writtenUntil</div><div class="ttdoc">used to optimize the write loop </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00068">updateCore.h:68</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a33a6ef6f3616d5c73fbaa1357921c0a7"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a33a6ef6f3616d5c73fbaa1357921c0a7">UPD_CORE_t::erasedUntil</a></div><div class="ttdeci">I4 erasedUntil</div><div class="ttdoc">used to optimize the erase loop </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00069">updateCore.h:69</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a73a8daa07d3bbd09ad1b996c032d38fe"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a73a8daa07d3bbd09ad1b996c032d38fe">UPD_CORE_t::pWriteTimeout</a></div><div class="ttdeci">U4 * pWriteTimeout</div><div class="ttdoc">array to store timeouts for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00082">updateCore.h:82</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a9f06a0ef019cc68c0342c8ae6fab68c1"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a9f06a0ef019cc68c0342c8ae6fab68c1">UPD_CORE_t::ImageSize</a></div><div class="ttdeci">U4 ImageSize</div><div class="ttdoc">size of the image </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00076">updateCore.h:76</a></div></div>
<div class="ttc" id="types_8h_html_af46a6e340cd583b499789b9bb39f7809"><div class="ttname"><a href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a></div><div class="ttdeci">signed __int32 I4</div><div class="ttdoc">32-bit signed integer number </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00053">types.h:53</a></div></div>
<div class="ttc" id="types_8h_html_a050c65e107f0c828f856a231f4b4e788"><div class="ttname"><a href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a></div><div class="ttdeci">int BOOL</div><div class="ttdoc">Boolean type. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00073">types.h:73</a></div></div>
<div class="ttc" id="image_8h_html"><div class="ttname"><a href="image_8h.html">image.h</a></div><div class="ttdoc">Definitions concerning the firmware image. </div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a4b61e975215ddcf537ac8f1e4b40ef87"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a4b61e975215ddcf537ac8f1e4b40ef87">UPD_CORE_t::FlashSize</a></div><div class="ttdeci">U4 FlashSize</div><div class="ttdoc">size of the flash </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00073">updateCore.h:73</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a9ad3d588fe8597bb6723181b77e02cfe"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">UPD_CORE_t::NumberPackets</a></div><div class="ttdeci">I4 NumberPackets</div><div class="ttdoc">number of packets to write </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00067">updateCore.h:67</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_af4892b3558ebdfb2c651670dee779d06"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#af4892b3558ebdfb2c651670dee779d06">UPD_CORE_t::eraseInProgres</a></div><div class="ttdeci">BOOL eraseInProgres</div><div class="ttdoc">Erase in progress. </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00092">updateCore.h:92</a></div></div>
<div class="ttc" id="receiver_8h_html"><div class="ttname"><a href="receiver_8h.html">receiver.h</a></div><div class="ttdoc">Declares the receiver communication interface. </div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_aeb6b1b5a2bdd4ff1335b2060a04ecd38"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#aeb6b1b5a2bdd4ff1335b2060a04ecd38">UPD_CORE_t::PendingErases</a></div><div class="ttdeci">U4 PendingErases</div><div class="ttdoc">number of erases pending </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00086">updateCore.h:86</a></div></div>
<div class="ttc" id="struct_r_c_v___d_a_t_a__t_html"><div class="ttname"><a href="struct_r_c_v___d_a_t_a__t.html">RCV_DATA_t</a></div><div class="ttdoc">Structure that defines a connection. </div><div class="ttdef"><b>Definition:</b> <a href="receiver_8h_source.html#l00064">receiver.h:64</a></div></div>
<div class="ttc" id="update_core_8h_html_a67c60123bde16f3fdf5a6e04c970bfce"><div class="ttname"><a href="update_core_8h.html#a67c60123bde16f3fdf5a6e04c970bfce">updInit</a></div><div class="ttdeci">UPD_CORE_t * updInit(RCV_DATA_t *rx, I4 numberSectors, I4 numberPackets, BLOCK_ARR_t *flashOrg, U4 flashSize, U4 MaxPendingWritesNum, BOOL eraseInProgres)</div><div class="ttdef"><b>Definition:</b> <a href="update_core_8c_source.html#l00480">updateCore.c:480</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a74708b0ccc127688f33a7c26cf46d587"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">UPD_CORE_t::NumberSectors</a></div><div class="ttdeci">I4 NumberSectors</div><div class="ttdoc">number of sectors to erase </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00066">updateCore.h:66</a></div></div>
<div class="ttc" id="update_core_8h_html_a4c065d6b9a1ae76e08bde0a84ee898e7"><div class="ttname"><a href="update_core_8h.html#a4c065d6b9a1ae76e08bde0a84ee898e7">updUpdate</a></div><div class="ttdeci">BOOL updUpdate(UPD_CORE_t *upd, FWHEADER_t *data, size_t size, U4 fwBase)</div><div class="ttdef"><b>Definition:</b> <a href="update_core_8c_source.html#l00578">updateCore.c:578</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">ACK_ERASE_ACK</a></div><div class="ttdoc">erase acknowledged for packet </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00056">updateCore.h:56</a></div></div>
<div class="ttc" id="update_core_8h_html_a5b75de599f50c2489681e0ffc8432230"><div class="ttname"><a href="update_core_8h.html#a5b75de599f50c2489681e0ffc8432230">updDeinit</a></div><div class="ttdeci">void updDeinit(UPD_CORE_t *upd)</div><div class="ttdef"><b>Definition:</b> <a href="update_core_8c_source.html#l00563">updateCore.c:563</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39a550adeb63bc97672716881df6a990992"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39a550adeb63bc97672716881df6a990992">ACK_ERASE_SENT</a></div><div class="ttdoc">erase pending for packet (sector-blocks) </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00055">updateCore.h:55</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a473b072e9732618d37a1df6e05fb69c6"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a473b072e9732618d37a1df6e05fb69c6">UPD_CORE_t::pEraseRetryCnt</a></div><div class="ttdeci">U1 * pEraseRetryCnt</div><div class="ttdoc">array to store retry counts for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00079">updateCore.h:79</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39">ACK_STATE_e</a></div><div class="ttdeci">ACK_STATE_e</div><div class="ttdoc">Acknowledge states. </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00052">updateCore.h:52</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a9478a793293df1813c4a42d7701a5156"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a9478a793293df1813c4a42d7701a5156">UPD_CORE_t::Rx</a></div><div class="ttdeci">RCV_DATA_t * Rx</div><div class="ttdoc">receiver to communicate with </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00065">updateCore.h:65</a></div></div>
<div class="ttc" id="union_f_w_h_e_a_d_e_r__u_html"><div class="ttname"><a href="union_f_w_h_e_a_d_e_r__u.html">FWHEADER_u</a></div><div class="ttdoc">Header of firmware image. </div><div class="ttdef"><b>Definition:</b> <a href="image_8h_source.html#l00038">image.h:38</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a76347d13c839ff2559595d6fead2d913"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a76347d13c839ff2559595d6fead2d913">UPD_CORE_t::FwBase</a></div><div class="ttdeci">U4 FwBase</div><div class="ttdoc">start address of the firmware on the flash </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00074">updateCore.h:74</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_ae148b3ac6b191b570ebae852b8d09779"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">UPD_CORE_t::pEraseState</a></div><div class="ttdeci">CH * pEraseState</div><div class="ttdoc">array to store erase status for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00080">updateCore.h:80</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a1cbc5b9d688c2a8ce86eea878c111500"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a1cbc5b9d688c2a8ce86eea878c111500">UPD_CORE_t::MaxPendingWritesNum</a></div><div class="ttdeci">U4 MaxPendingWritesNum</div><div class="ttdoc">max number of which can be queued in the receiver writes pending </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00091">updateCore.h:91</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0">ACK_WRITE_ACK</a></div><div class="ttdoc">write acknowledged for packet </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00058">updateCore.h:58</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39a975bfb38aec53817024f7a6e6dc67230"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39a975bfb38aec53817024f7a6e6dc67230">ACK_WRITE_SENT</a></div><div class="ttdoc">write pending for packet </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00057">updateCore.h:57</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_aeb4ca04540e3469c6cf593fb6c49e137"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#aeb4ca04540e3469c6cf593fb6c49e137">UPD_CORE_t::FlashOrg</a></div><div class="ttdeci">BLOCK_ARR_t * FlashOrg</div><div class="ttdoc">flash organization </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00072">updateCore.h:72</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39aaf817273bb01ceb4204f01b3f26ea8d4"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39aaf817273bb01ceb4204f01b3f26ea8d4">ACK_UNKNOWN</a></div><div class="ttdoc">unknown state </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00059">updateCore.h:59</a></div></div>
<div class="ttc" id="types_8h_html_a2d18590ee6cb00e8ea0a631cf9696f53"><div class="ttname"><a href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a></div><div class="ttdeci">char CH</div><div class="ttdoc">8-bit character, (signed/unsigned, depending on compiler) </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00064">types.h:64</a></div></div>
<div class="ttc" id="struct_b_l_o_c_k___a_r_r__s_html"><div class="ttname"><a href="struct_b_l_o_c_k___a_r_r__s.html">BLOCK_ARR_s</a></div><div class="ttdoc">Array of block definitions. </div><div class="ttdef"><b>Definition:</b> <a href="flash_8h_source.html#l00049">flash.h:49</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9">ACK_INIT</a></div><div class="ttdoc">initial state </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00054">updateCore.h:54</a></div></div>
<div class="ttc" id="flash_8h_html"><div class="ttname"><a href="flash_8h.html">flash.h</a></div><div class="ttdoc">Flash organization stuff. </div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a091041a0eb56f2bdd4dc1f1931f9979d"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a091041a0eb56f2bdd4dc1f1931f9979d">UPD_CORE_t::sLastDumpTime</a></div><div class="ttdeci">U4 sLastDumpTime</div><div class="ttdoc">time of the last dump (for verbose > 1) </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00089">updateCore.h:89</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a0bcb4d97e337d93937d3be604776ed8f"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a0bcb4d97e337d93937d3be604776ed8f">UPD_CORE_t::PendingWrites</a></div><div class="ttdeci">U4 PendingWrites</div><div class="ttdoc">number of writes pending </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00087">updateCore.h:87</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_adea65c999b522373ffdad7f378836bd4"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#adea65c999b522373ffdad7f378836bd4">UPD_CORE_t::pEraseTimeout</a></div><div class="ttdeci">U4 * pEraseTimeout</div><div class="ttdoc">array to store timeouts for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00078">updateCore.h:78</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="update_core_8h.html">updateCore.h</a></li>
    <li class="footer">Generated on Sun May 23 2021 19:02:48 for ubxfwupdate by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
