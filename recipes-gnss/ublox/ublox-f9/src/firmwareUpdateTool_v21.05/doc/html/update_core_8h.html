<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>ubxfwupdate: updateCore.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="u-blox_logo_09.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ubxfwupdate
   &#160;<span id="projectnumber">21.05</span>
   </div>
   <div id="projectbrief">Firmware Update Tool Documentation &mdash; Copyright (c) 2015 u-blox AG.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('update_core_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">updateCore.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Declaration of function that handle the update on the receiver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;<a class="el" href="receiver_8h_source.html">receiver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="flash_8h_source.html">flash.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="image_8h_source.html">image.h</a>&quot;</code><br />
</div>
<p><a href="update_core_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preserves the state of the upgrade and the organization of the flash.  <a href="struct_u_p_d___c_o_r_e__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a177e4581349927b04d81ac62ed804377"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a177e4581349927b04d81ac62ed804377">PACKETSIZE</a>&#160;&#160;&#160;512</td></tr>
<tr class="memdesc:a177e4581349927b04d81ac62ed804377"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of a packet to send to the receiver  <a href="#a177e4581349927b04d81ac62ed804377">More...</a><br /></td></tr>
<tr class="separator:a177e4581349927b04d81ac62ed804377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d65cd02aa7f90fc2a0ca9e714adfcd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a91d65cd02aa7f90fc2a0ca9e714adfcd">ERASE_TIMEOUT</a>&#160;&#160;&#160;12000</td></tr>
<tr class="memdesc:a91d65cd02aa7f90fc2a0ca9e714adfcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">timeout for erasing a sector  <a href="#a91d65cd02aa7f90fc2a0ca9e714adfcd">More...</a><br /></td></tr>
<tr class="separator:a91d65cd02aa7f90fc2a0ca9e714adfcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51fb6ccd37b6edb264095f862074a4f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a51fb6ccd37b6edb264095f862074a4f3">CRC_TIMEOUT</a>&#160;&#160;&#160;3000</td></tr>
<tr class="memdesc:a51fb6ccd37b6edb264095f862074a4f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">timeout for the CRC computation  <a href="#a51fb6ccd37b6edb264095f862074a4f3">More...</a><br /></td></tr>
<tr class="separator:a51fb6ccd37b6edb264095f862074a4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543a47aa06fc3f724441e2ee0751af5a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a543a47aa06fc3f724441e2ee0751af5a">ERASE_RETRIES</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a543a47aa06fc3f724441e2ee0751af5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of retries to erase block  <a href="#a543a47aa06fc3f724441e2ee0751af5a">More...</a><br /></td></tr>
<tr class="separator:a543a47aa06fc3f724441e2ee0751af5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b1cd04a426238a3a30f7740e6b539de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a5b1cd04a426238a3a30f7740e6b539de">WRITE_RETRIES</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a5b1cd04a426238a3a30f7740e6b539de"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of retries to write block  <a href="#a5b1cd04a426238a3a30f7740e6b539de">More...</a><br /></td></tr>
<tr class="separator:a5b1cd04a426238a3a30f7740e6b539de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3af75bd8417b347229705d6d522ad5c3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a3af75bd8417b347229705d6d522ad5c3">WRITE_TIMEOUT</a>&#160;&#160;&#160;3000</td></tr>
<tr class="memdesc:a3af75bd8417b347229705d6d522ad5c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">timeout for writing a block  <a href="#a3af75bd8417b347229705d6d522ad5c3">More...</a><br /></td></tr>
<tr class="separator:a3af75bd8417b347229705d6d522ad5c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8818657501b169fe9289ed5d37e29b11"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a8818657501b169fe9289ed5d37e29b11">CHIP_ERASE_TIMEOUT</a>&#160;&#160;&#160;45000</td></tr>
<tr class="memdesc:a8818657501b169fe9289ed5d37e29b11"><td class="mdescLeft">&#160;</td><td class="mdescRight">chip erase timeout  <a href="#a8818657501b169fe9289ed5d37e29b11">More...</a><br /></td></tr>
<tr class="separator:a8818657501b169fe9289ed5d37e29b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a9099a5f8fc9c6e253c0eecb2be8db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a23a9099a5f8fc9c6e253c0eecb2be8db">FLASH_BASE</a>&#160;&#160;&#160;0x00800000</td></tr>
<tr class="memdesc:a23a9099a5f8fc9c6e253c0eecb2be8db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash base address.  <a href="#a23a9099a5f8fc9c6e253c0eecb2be8db">More...</a><br /></td></tr>
<tr class="separator:a23a9099a5f8fc9c6e253c0eecb2be8db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad35c1036b7f001b47306c58a18329400"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#ad35c1036b7f001b47306c58a18329400">RAM_BASE</a>&#160;&#160;&#160;0x00800000</td></tr>
<tr class="memdesc:ad35c1036b7f001b47306c58a18329400"><td class="mdescLeft">&#160;</td><td class="mdescRight">RAM base address.  <a href="#ad35c1036b7f001b47306c58a18329400">More...</a><br /></td></tr>
<tr class="separator:ad35c1036b7f001b47306c58a18329400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c7b5bd6e606e8e0f1dabd735eb5d407"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a4c7b5bd6e606e8e0f1dabd735eb5d407">DUMPINTERVAL</a>&#160;&#160;&#160;1000</td></tr>
<tr class="memdesc:a4c7b5bd6e606e8e0f1dabd735eb5d407"><td class="mdescLeft">&#160;</td><td class="mdescRight">timeout between two dumps when verbose &gt; 1  <a href="#a4c7b5bd6e606e8e0f1dabd735eb5d407">More...</a><br /></td></tr>
<tr class="separator:a4c7b5bd6e606e8e0f1dabd735eb5d407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8a565248bf80a622adcf61f4fe6dbc3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#ac8a565248bf80a622adcf61f4fe6dbc3">CONSOLE_WIDTH</a>&#160;&#160;&#160;80</td></tr>
<tr class="memdesc:ac8a565248bf80a622adcf61f4fe6dbc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Width of the console.  <a href="#ac8a565248bf80a622adcf61f4fe6dbc3">More...</a><br /></td></tr>
<tr class="separator:ac8a565248bf80a622adcf61f4fe6dbc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8b6fb58e055df6576bb620f05220448"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#ad8b6fb58e055df6576bb620f05220448">MAX_PENDING_ERASES</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ad8b6fb58e055df6576bb620f05220448"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of erase commands to be present in the receiver queue.  <a href="#ad8b6fb58e055df6576bb620f05220448">More...</a><br /></td></tr>
<tr class="separator:ad8b6fb58e055df6576bb620f05220448"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7668f0c071e2ce16196b14f4710145c1"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39">ACK_STATE_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a7668f0c071e2ce16196b14f4710145c1">ACK_STATE_t</a></td></tr>
<tr class="memdesc:a7668f0c071e2ce16196b14f4710145c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acknowledge states.  <a href="#a7668f0c071e2ce16196b14f4710145c1">More...</a><br /></td></tr>
<tr class="separator:a7668f0c071e2ce16196b14f4710145c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a130a626da56d697af470eccd12259c39"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39">ACK_STATE_e</a> { <br />
&#160;&#160;<a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9">ACK_INIT</a> = '.', 
<a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a550adeb63bc97672716881df6a990992">ACK_ERASE_SENT</a> = 'e', 
<a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">ACK_ERASE_ACK</a> = 'E', 
<a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a975bfb38aec53817024f7a6e6dc67230">ACK_WRITE_SENT</a> = 'w', 
<br />
&#160;&#160;<a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0">ACK_WRITE_ACK</a> = 'W', 
<a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39aaf817273bb01ceb4204f01b3f26ea8d4">ACK_UNKNOWN</a> = '?'
<br />
 }</td></tr>
<tr class="memdesc:a130a626da56d697af470eccd12259c39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acknowledge states.  <a href="update_core_8h.html#a130a626da56d697af470eccd12259c39">More...</a><br /></td></tr>
<tr class="separator:a130a626da56d697af470eccd12259c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a67c60123bde16f3fdf5a6e04c970bfce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a67c60123bde16f3fdf5a6e04c970bfce">updInit</a> (<a class="el" href="struct_r_c_v___d_a_t_a__t.html">RCV_DATA_t</a> *rx, <a class="el" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> numberSectors, <a class="el" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> numberPackets, <a class="el" href="flash_8h.html#af4b45687636458b5af7637bc97293f4d">BLOCK_ARR_t</a> *flashOrg, <a class="el" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> flashSize, <a class="el" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> MaxPendingWritesNum, <a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> eraseInProgres)</td></tr>
<tr class="separator:a67c60123bde16f3fdf5a6e04c970bfce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b75de599f50c2489681e0ffc8432230"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a5b75de599f50c2489681e0ffc8432230">updDeinit</a> (<a class="el" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a> *upd)</td></tr>
<tr class="separator:a5b75de599f50c2489681e0ffc8432230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c065d6b9a1ae76e08bde0a84ee898e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="update_core_8h.html#a4c065d6b9a1ae76e08bde0a84ee898e7">updUpdate</a> (<a class="el" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a> *upd, <a class="el" href="image_8h.html#a640c15684830a3ad6b5a2fc0bcacc54b">FWHEADER_t</a> *data, size_t size, <a class="el" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> fwBase)</td></tr>
<tr class="separator:a4c065d6b9a1ae76e08bde0a84ee898e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declaration of function that handle the update on the receiver. </p>

<p>Definition in file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a8818657501b169fe9289ed5d37e29b11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHIP_ERASE_TIMEOUT&#160;&#160;&#160;45000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>chip erase timeout </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00043">43</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_core_8c_source.html#l00578">updUpdate()</a>, and <a class="el" href="update_core_8c_source.html#l00389">updWritePacket()</a>.</p>

</div>
</div>
<a class="anchor" id="ac8a565248bf80a622adcf61f4fe6dbc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONSOLE_WIDTH&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Width of the console. </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00047">47</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_core_8c_source.html#l00099">updDumpAck()</a>, and <a class="el" href="update_core_8c_source.html#l00480">updInit()</a>.</p>

</div>
</div>
<a class="anchor" id="a51fb6ccd37b6edb264095f862074a4f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRC_TIMEOUT&#160;&#160;&#160;3000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>timeout for the CRC computation </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00039">39</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00164">verifyImage()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c7b5bd6e606e8e0f1dabd735eb5d407"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUMPINTERVAL&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>timeout between two dumps when verbose &gt; 1 </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00046">46</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_core_8c_source.html#l00099">updDumpAck()</a>.</p>

</div>
</div>
<a class="anchor" id="a543a47aa06fc3f724441e2ee0751af5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERASE_RETRIES&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>number of retries to erase block </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00040">40</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_core_8c_source.html#l00311">updEraseSector()</a>.</p>

</div>
</div>
<a class="anchor" id="a91d65cd02aa7f90fc2a0ca9e714adfcd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERASE_TIMEOUT&#160;&#160;&#160;12000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>timeout for erasing a sector </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00038">38</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_core_8c_source.html#l00311">updEraseSector()</a>.</p>

</div>
</div>
<a class="anchor" id="a23a9099a5f8fc9c6e253c0eecb2be8db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_BASE&#160;&#160;&#160;0x00800000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flash base address. </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00044">44</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8b6fb58e055df6576bb620f05220448"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PENDING_ERASES&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The maximum number of erase commands to be present in the receiver queue. </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00049">49</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_core_8c_source.html#l00311">updEraseSector()</a>.</p>

</div>
</div>
<a class="anchor" id="a177e4581349927b04d81ac62ed804377"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PACKETSIZE&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>size of a packet to send to the receiver </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00037">37</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>, <a class="el" href="update_core_8c_source.html#l00099">updDumpAck()</a>, <a class="el" href="update_core_8c_source.html#l00311">updEraseSector()</a>, <a class="el" href="update_core_8c_source.html#l00480">updInit()</a>, <a class="el" href="update_core_8c_source.html#l00191">updProcessMessages()</a>, and <a class="el" href="update_core_8c_source.html#l00057">updSendWrite()</a>.</p>

</div>
</div>
<a class="anchor" id="ad35c1036b7f001b47306c58a18329400"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RAM_BASE&#160;&#160;&#160;0x00800000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RAM base address. </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00045">45</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b1cd04a426238a3a30f7740e6b539de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_RETRIES&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>number of retries to write block </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00041">41</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_core_8c_source.html#l00389">updWritePacket()</a>.</p>

</div>
</div>
<a class="anchor" id="a3af75bd8417b347229705d6d522ad5c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_TIMEOUT&#160;&#160;&#160;3000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>timeout for writing a block </p>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00042">42</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>, and <a class="el" href="update_core_8c_source.html#l00389">updWritePacket()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a7668f0c071e2ce16196b14f4710145c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39">ACK_STATE_e</a>  <a class="el" href="update_core_8h.html#a7668f0c071e2ce16196b14f4710145c1">ACK_STATE_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acknowledge states. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a130a626da56d697af470eccd12259c39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="update_core_8h.html#a130a626da56d697af470eccd12259c39">ACK_STATE_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acknowledge states. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9"></a>ACK_INIT&#160;</td><td class="fielddoc">
<p>initial state </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a130a626da56d697af470eccd12259c39a550adeb63bc97672716881df6a990992"></a>ACK_ERASE_SENT&#160;</td><td class="fielddoc">
<p>erase pending for packet (sector-blocks) </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a"></a>ACK_ERASE_ACK&#160;</td><td class="fielddoc">
<p>erase acknowledged for packet </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a130a626da56d697af470eccd12259c39a975bfb38aec53817024f7a6e6dc67230"></a>ACK_WRITE_SENT&#160;</td><td class="fielddoc">
<p>write pending for packet </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0"></a>ACK_WRITE_ACK&#160;</td><td class="fielddoc">
<p>write acknowledged for packet </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a130a626da56d697af470eccd12259c39aaf817273bb01ceb4204f01b3f26ea8d4"></a>ACK_UNKNOWN&#160;</td><td class="fielddoc">
<p>unknown state </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="update_core_8h_source.html#l00052">52</a> of file <a class="el" href="update_core_8h_source.html">updateCore.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9">ACK_INIT</a>        = <span class="charliteral">&#39;.&#39;</span>,  <span class="comment">//!&lt; initial state</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a550adeb63bc97672716881df6a990992">ACK_ERASE_SENT</a>  = <span class="charliteral">&#39;e&#39;</span>,  <span class="comment">//!&lt; erase pending for packet (sector-blocks)</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">ACK_ERASE_ACK</a>   = <span class="charliteral">&#39;E&#39;</span>,  <span class="comment">//!&lt; erase acknowledged for packet</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a975bfb38aec53817024f7a6e6dc67230">ACK_WRITE_SENT</a>  = <span class="charliteral">&#39;w&#39;</span>,  <span class="comment">//!&lt; write pending for packet</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0">ACK_WRITE_ACK</a>   = <span class="charliteral">&#39;W&#39;</span>,  <span class="comment">//!&lt; write acknowledged for packet</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span>    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39aaf817273bb01ceb4204f01b3f26ea8d4">ACK_UNKNOWN</a>     = <span class="charliteral">&#39;?&#39;</span>   <span class="comment">//!&lt; unknown state</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span>} <a class="code" href="update_core_8h.html#a7668f0c071e2ce16196b14f4710145c1">ACK_STATE_t</a>;</div>
<div class="ttc" id="update_core_8h_html_a7668f0c071e2ce16196b14f4710145c1"><div class="ttname"><a href="update_core_8h.html#a7668f0c071e2ce16196b14f4710145c1">ACK_STATE_t</a></div><div class="ttdeci">enum ACK_STATE_e ACK_STATE_t</div><div class="ttdoc">Acknowledge states. </div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">ACK_ERASE_ACK</a></div><div class="ttdoc">erase acknowledged for packet </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00056">updateCore.h:56</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39a550adeb63bc97672716881df6a990992"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39a550adeb63bc97672716881df6a990992">ACK_ERASE_SENT</a></div><div class="ttdoc">erase pending for packet (sector-blocks) </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00055">updateCore.h:55</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0">ACK_WRITE_ACK</a></div><div class="ttdoc">write acknowledged for packet </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00058">updateCore.h:58</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39a975bfb38aec53817024f7a6e6dc67230"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39a975bfb38aec53817024f7a6e6dc67230">ACK_WRITE_SENT</a></div><div class="ttdoc">write pending for packet </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00057">updateCore.h:57</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39aaf817273bb01ceb4204f01b3f26ea8d4"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39aaf817273bb01ceb4204f01b3f26ea8d4">ACK_UNKNOWN</a></div><div class="ttdoc">unknown state </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00059">updateCore.h:59</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9">ACK_INIT</a></div><div class="ttdoc">initial state </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00054">updateCore.h:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a5b75de599f50c2489681e0ffc8432230"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updDeinit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a> *&#160;</td>
          <td class="paramname"><em>upd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>De-Initializer for <a class="el" href="struct_u_p_d___c_o_r_e__t.html" title="Preserves the state of the upgrade and the organization of the flash. ">UPD_CORE_t</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">upd</td><td>control structure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="update_core_8c_source.html#l00563">563</a> of file <a class="el" href="update_core_8c_source.html">updateCore.c</a>.</p>

<p>References <a class="el" href="update_core_8h_source.html#l00079">UPD_CORE_t::pEraseRetryCnt</a>, <a class="el" href="update_core_8h_source.html#l00080">UPD_CORE_t::pEraseState</a>, <a class="el" href="update_core_8h_source.html#l00078">UPD_CORE_t::pEraseTimeout</a>, <a class="el" href="update_core_8h_source.html#l00083">UPD_CORE_t::pWriteRetryCnt</a>, <a class="el" href="update_core_8h_source.html#l00084">UPD_CORE_t::pWriteState</a>, and <a class="el" href="update_core_8h_source.html#l00082">UPD_CORE_t::pWriteTimeout</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>, and <a class="el" href="update_core_8c_source.html#l00480">updInit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;{</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    assert(upd);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    free(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#adea65c999b522373ffdad7f378836bd4">pEraseTimeout</a>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    free(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a473b072e9732618d37a1df6e05fb69c6">pEraseRetryCnt</a>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    free(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">pEraseState</a>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    free(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a73a8daa07d3bbd09ad1b996c032d38fe">pWriteTimeout</a>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    free(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a048cc8432729da4d1c3d534ea76bda31">pWriteRetryCnt</a>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    free(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">pWriteState</a>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    free(upd);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_acfc1f7f83dd9db1b09ba2a599c51e033"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">UPD_CORE_t::pWriteState</a></div><div class="ttdeci">CH * pWriteState</div><div class="ttdoc">array to store erase status for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00084">updateCore.h:84</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a048cc8432729da4d1c3d534ea76bda31"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a048cc8432729da4d1c3d534ea76bda31">UPD_CORE_t::pWriteRetryCnt</a></div><div class="ttdeci">U1 * pWriteRetryCnt</div><div class="ttdoc">array to store retry counts for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00083">updateCore.h:83</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a73a8daa07d3bbd09ad1b996c032d38fe"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a73a8daa07d3bbd09ad1b996c032d38fe">UPD_CORE_t::pWriteTimeout</a></div><div class="ttdeci">U4 * pWriteTimeout</div><div class="ttdoc">array to store timeouts for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00082">updateCore.h:82</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a473b072e9732618d37a1df6e05fb69c6"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a473b072e9732618d37a1df6e05fb69c6">UPD_CORE_t::pEraseRetryCnt</a></div><div class="ttdeci">U1 * pEraseRetryCnt</div><div class="ttdoc">array to store retry counts for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00079">updateCore.h:79</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_ae148b3ac6b191b570ebae852b8d09779"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">UPD_CORE_t::pEraseState</a></div><div class="ttdeci">CH * pEraseState</div><div class="ttdoc">array to store erase status for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00080">updateCore.h:80</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_adea65c999b522373ffdad7f378836bd4"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#adea65c999b522373ffdad7f378836bd4">UPD_CORE_t::pEraseTimeout</a></div><div class="ttdeci">U4 * pEraseTimeout</div><div class="ttdoc">array to store timeouts for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00078">updateCore.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a67c60123bde16f3fdf5a6e04c970bfce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a>* updInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_c_v___d_a_t_a__t.html">RCV_DATA_t</a> *&#160;</td>
          <td class="paramname"><em>rx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a>&#160;</td>
          <td class="paramname"><em>numberSectors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a>&#160;</td>
          <td class="paramname"><em>numberPackets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="flash_8h.html#af4b45687636458b5af7637bc97293f4d">BLOCK_ARR_t</a> *&#160;</td>
          <td class="paramname"><em>flashOrg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>&#160;</td>
          <td class="paramname"><em>flashSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>&#160;</td>
          <td class="paramname"><em>MaxPendingWritesNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>&#160;</td>
          <td class="paramname"><em>eraseInProgres</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializer for <a class="el" href="struct_u_p_d___c_o_r_e__t.html" title="Preserves the state of the upgrade and the organization of the flash. ">UPD_CORE_t</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rx</td><td>receiver to do the update on </td></tr>
    <tr><td class="paramname">numberSectors</td><td>number of sectors to erase </td></tr>
    <tr><td class="paramname">numberPackets</td><td>number of packets to write </td></tr>
    <tr><td class="paramname">flashOrg</td><td>information about the organization of the flash </td></tr>
    <tr><td class="paramname">flashSize</td><td>size of the flash </td></tr>
    <tr><td class="paramname">MaxPendingWritesNum</td><td>Maximum possible number of pending writes </td></tr>
    <tr><td class="paramname">eraseInProgres</td><td>Means that flash erase was started but not finished before entering update. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The control structure on success, NULL on fail </dd></dl>

<p>Definition at line <a class="el" href="update_core_8c_source.html#l00480">480</a> of file <a class="el" href="update_core_8c_source.html">updateCore.c</a>.</p>

<p>References <a class="el" href="update_core_8h_source.html#l00056">ACK_ERASE_ACK</a>, <a class="el" href="update_core_8h_source.html#l00054">ACK_INIT</a>, <a class="el" href="platform_8c_source.html#l02115">CONSOLE_SAVE_POS()</a>, <a class="el" href="update_core_8h_source.html#l00047">CONSOLE_WIDTH</a>, <a class="el" href="update_core_8h_source.html#l00069">UPD_CORE_t::erasedUntil</a>, <a class="el" href="update_core_8h_source.html#l00092">UPD_CORE_t::eraseInProgres</a>, <a class="el" href="update_core_8h_source.html#l00072">UPD_CORE_t::FlashOrg</a>, <a class="el" href="update_core_8h_source.html#l00073">UPD_CORE_t::FlashSize</a>, <a class="el" href="flash_8c_source.html#l00216">GetPacketNrForSector()</a>, <a class="el" href="update_core_8h_source.html#l00091">UPD_CORE_t::MaxPendingWritesNum</a>, <a class="el" href="platform_8c_source.html#l01992">MESSAGE()</a>, <a class="el" href="platform_8h_source.html#l00224">MSG_LEV1</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="update_core_8h_source.html#l00067">UPD_CORE_t::NumberPackets</a>, <a class="el" href="update_core_8h_source.html#l00066">UPD_CORE_t::NumberSectors</a>, <a class="el" href="update_core_8h_source.html#l00037">PACKETSIZE</a>, <a class="el" href="update_core_8h_source.html#l00086">UPD_CORE_t::PendingErases</a>, <a class="el" href="update_core_8h_source.html#l00087">UPD_CORE_t::PendingWrites</a>, <a class="el" href="update_core_8h_source.html#l00079">UPD_CORE_t::pEraseRetryCnt</a>, <a class="el" href="update_core_8h_source.html#l00080">UPD_CORE_t::pEraseState</a>, <a class="el" href="update_core_8h_source.html#l00078">UPD_CORE_t::pEraseTimeout</a>, <a class="el" href="update_core_8h_source.html#l00083">UPD_CORE_t::pWriteRetryCnt</a>, <a class="el" href="update_core_8h_source.html#l00084">UPD_CORE_t::pWriteState</a>, <a class="el" href="update_core_8h_source.html#l00082">UPD_CORE_t::pWriteTimeout</a>, <a class="el" href="update_core_8h_source.html#l00065">UPD_CORE_t::Rx</a>, <a class="el" href="update_core_8h_source.html#l00089">UPD_CORE_t::sLastDumpTime</a>, <a class="el" href="update_core_8c_source.html#l00563">updDeinit()</a>, <a class="el" href="platform_8c_source.html#l00111">verbose</a>, and <a class="el" href="update_core_8h_source.html#l00068">UPD_CORE_t::writtenUntil</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>.</p>
<div class="fragment"><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;{</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    assert(rx);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a> *upd= (<a class="code" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a>*) malloc(<span class="keyword">sizeof</span>(*upd));</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span>(!upd)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    memset(upd, 0, <span class="keyword">sizeof</span>(*upd));</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9478a793293df1813c4a42d7701a5156">Rx</a> = rx;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// we did not yet erase / write anything</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a33a6ef6f3616d5c73fbaa1357921c0a7">erasedUntil</a> = 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a6ff39625defb3d08d5991949c4f64696">writtenUntil</a> = 0;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a> = numberSectors;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a> = numberPackets;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#aeb4ca04540e3469c6cf593fb6c49e137">FlashOrg</a> = flashOrg;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a4b61e975215ddcf537ac8f1e4b40ef87">FlashSize</a> = flashSize;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a1cbc5b9d688c2a8ce86eea878c111500">MaxPendingWritesNum</a> = MaxPendingWritesNum;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#af4892b3558ebdfb2c651670dee779d06">eraseInProgres</a> = eraseInProgres;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#aeb6b1b5a2bdd4ff1335b2060a04ecd38">PendingErases</a>  = 0;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a0bcb4d97e337d93937d3be604776ed8f">PendingWrites</a>  = 0;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a091041a0eb56f2bdd4dc1f1931f9979d">sLastDumpTime</a>  = 0;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#adea65c999b522373ffdad7f378836bd4">pEraseTimeout</a>  = (<a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>)*upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a473b072e9732618d37a1df6e05fb69c6">pEraseRetryCnt</a> = (<a class="code" href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a>)*upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">pEraseState</a>    = (<a class="code" href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a>)*upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a73a8daa07d3bbd09ad1b996c032d38fe">pWriteTimeout</a>  = (<a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>)*upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a048cc8432729da4d1c3d534ea76bda31">pWriteRetryCnt</a> = (<a class="code" href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a>)*upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">pWriteState</a>    = (<a class="code" href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a>*) malloc(<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a>)*upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span>( !upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#adea65c999b522373ffdad7f378836bd4">pEraseTimeout</a></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;     || !upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a473b072e9732618d37a1df6e05fb69c6">pEraseRetryCnt</a></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;     || !upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">pEraseState</a></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;     || !upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a73a8daa07d3bbd09ad1b996c032d38fe">pWriteTimeout</a></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;     || !upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a048cc8432729da4d1c3d534ea76bda31">pWriteRetryCnt</a></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;     || !upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">pWriteState</a> )</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="update_core_8c.html#a5b75de599f50c2489681e0ffc8432230">updDeinit</a>(upd);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    memset(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#adea65c999b522373ffdad7f378836bd4">pEraseTimeout</a>,  0,        upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a>*<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>));</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    memset(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a473b072e9732618d37a1df6e05fb69c6">pEraseRetryCnt</a>, 0,        upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a>*<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a>));</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    memset(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">pEraseState</a>,    <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9">ACK_INIT</a>, upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a>*<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a>));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    memset(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a73a8daa07d3bbd09ad1b996c032d38fe">pWriteTimeout</a>,  0,        upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a>*<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>));</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    memset(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a048cc8432729da4d1c3d534ea76bda31">pWriteRetryCnt</a>, 0,        upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a>*<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a>));</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    memset(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">pWriteState</a>,    (upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a> == 0)?<a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">ACK_ERASE_ACK</a>:<a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9">ACK_INIT</a>, upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a>*<span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a>));</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="platform_8c.html#a893956021e39f080363c13adeea56462">MESSAGE</a>(<a class="code" href="platform_8h.html#a10cd4539bac4c67d55db0fa42b4a2333ad15c1443fc0b119d1d19ce1612a6834a">MSG_LEV1</a>, <span class="stringliteral">&quot;Receiver info collected, downloading to flash...&quot;</span>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="platform_8c.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a> &gt; 1)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> numPacketsOverall = (upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a> == 0)?upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a>:<a class="code" href="flash_8c.html#a56b541279c3a85340438fb48478945e5">GetPacketNrForSector</a>(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a>, upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#aeb4ca04540e3469c6cf593fb6c49e137">FlashOrg</a>, <a class="code" href="update_core_8h.html#a177e4581349927b04d81ac62ed804377">PACKETSIZE</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="comment">// compute the number of lines needed to do a full dump</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="comment">// CONSOLE_WIDTH - 1 to make sure that the newline character is not</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="comment">// placed on a new line (seen in windows 7)</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> numberOfLines = numPacketsOverall / (<a class="code" href="update_core_8h.html#ac8a565248bf80a622adcf61f4fe6dbc3">CONSOLE_WIDTH</a> - 1);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">if</span>(numPacketsOverall % (<a class="code" href="update_core_8h.html#ac8a565248bf80a622adcf61f4fe6dbc3">CONSOLE_WIDTH</a> - 1) != 0)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            ++numberOfLines;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="comment">// for the max retries and the newline</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        numberOfLines += 2;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="platform_8c.html#a21076b28b74288670cab46657b3146d9">CONSOLE_SAVE_POS</a>(numberOfLines);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> upd;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_acfc1f7f83dd9db1b09ba2a599c51e033"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">UPD_CORE_t::pWriteState</a></div><div class="ttdeci">CH * pWriteState</div><div class="ttdoc">array to store erase status for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00084">updateCore.h:84</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a048cc8432729da4d1c3d534ea76bda31"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a048cc8432729da4d1c3d534ea76bda31">UPD_CORE_t::pWriteRetryCnt</a></div><div class="ttdeci">U1 * pWriteRetryCnt</div><div class="ttdoc">array to store retry counts for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00083">updateCore.h:83</a></div></div>
<div class="ttc" id="platform_8c_html_a893956021e39f080363c13adeea56462"><div class="ttname"><a href="platform_8c.html#a893956021e39f080363c13adeea56462">MESSAGE</a></div><div class="ttdeci">void MESSAGE(MSG_LEVEL level, const CH *format,...)</div><div class="ttdoc">Print status message. </div><div class="ttdef"><b>Definition:</b> <a href="platform_8c_source.html#l01992">platform.c:1992</a></div></div>
<div class="ttc" id="update_core_8c_html_a5b75de599f50c2489681e0ffc8432230"><div class="ttname"><a href="update_core_8c.html#a5b75de599f50c2489681e0ffc8432230">updDeinit</a></div><div class="ttdeci">void updDeinit(UPD_CORE_t *upd)</div><div class="ttdef"><b>Definition:</b> <a href="update_core_8c_source.html#l00563">updateCore.c:563</a></div></div>
<div class="ttc" id="update_core_8h_html_a177e4581349927b04d81ac62ed804377"><div class="ttname"><a href="update_core_8h.html#a177e4581349927b04d81ac62ed804377">PACKETSIZE</a></div><div class="ttdeci">#define PACKETSIZE</div><div class="ttdoc">size of a packet to send to the receiver </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00037">updateCore.h:37</a></div></div>
<div class="ttc" id="types_8h_html_a79199901c1122f5e17970b6887de3d6a"><div class="ttname"><a href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a></div><div class="ttdeci">unsigned __int8 U1</div><div class="ttdoc">8-bit unsigned integer number(unsigned character) </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00058">types.h:58</a></div></div>
<div class="ttc" id="platform_8c_html_a0b2caeb4b6f130be43e5a2f0267dd453"><div class="ttname"><a href="platform_8c.html#a0b2caeb4b6f130be43e5a2f0267dd453">verbose</a></div><div class="ttdeci">int verbose</div><div class="ttdoc">verbosity </div><div class="ttdef"><b>Definition:</b> <a href="platform_8c_source.html#l00111">platform.c:111</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a></div><div class="ttdoc">Preserves the state of the upgrade and the organization of the flash. </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00063">updateCore.h:63</a></div></div>
<div class="ttc" id="types_8h_html_a05882823395fd219ae0b65679baa29c4"><div class="ttname"><a href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a></div><div class="ttdeci">unsigned __int32 U4</div><div class="ttdoc">32-bit unsigned integer number </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00054">types.h:54</a></div></div>
<div class="ttc" id="platform_8c_html_a21076b28b74288670cab46657b3146d9"><div class="ttname"><a href="platform_8c.html#a21076b28b74288670cab46657b3146d9">CONSOLE_SAVE_POS</a></div><div class="ttdeci">void CONSOLE_SAVE_POS(U4 offs)</div><div class="ttdoc">save current cursor position </div><div class="ttdef"><b>Definition:</b> <a href="platform_8c_source.html#l02115">platform.c:2115</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a6ff39625defb3d08d5991949c4f64696"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a6ff39625defb3d08d5991949c4f64696">UPD_CORE_t::writtenUntil</a></div><div class="ttdeci">I4 writtenUntil</div><div class="ttdoc">used to optimize the write loop </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00068">updateCore.h:68</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a33a6ef6f3616d5c73fbaa1357921c0a7"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a33a6ef6f3616d5c73fbaa1357921c0a7">UPD_CORE_t::erasedUntil</a></div><div class="ttdeci">I4 erasedUntil</div><div class="ttdoc">used to optimize the erase loop </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00069">updateCore.h:69</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a73a8daa07d3bbd09ad1b996c032d38fe"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a73a8daa07d3bbd09ad1b996c032d38fe">UPD_CORE_t::pWriteTimeout</a></div><div class="ttdeci">U4 * pWriteTimeout</div><div class="ttdoc">array to store timeouts for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00082">updateCore.h:82</a></div></div>
<div class="ttc" id="platform_8h_html_a10cd4539bac4c67d55db0fa42b4a2333ad15c1443fc0b119d1d19ce1612a6834a"><div class="ttname"><a href="platform_8h.html#a10cd4539bac4c67d55db0fa42b4a2333ad15c1443fc0b119d1d19ce1612a6834a">MSG_LEV1</a></div><div class="ttdoc">Verbosity Level 1 message. </div><div class="ttdef"><b>Definition:</b> <a href="platform_8h_source.html#l00224">platform.h:224</a></div></div>
<div class="ttc" id="types_8h_html_af46a6e340cd583b499789b9bb39f7809"><div class="ttname"><a href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a></div><div class="ttdeci">signed __int32 I4</div><div class="ttdoc">32-bit signed integer number </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00053">types.h:53</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a4b61e975215ddcf537ac8f1e4b40ef87"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a4b61e975215ddcf537ac8f1e4b40ef87">UPD_CORE_t::FlashSize</a></div><div class="ttdeci">U4 FlashSize</div><div class="ttdoc">size of the flash </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00073">updateCore.h:73</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a9ad3d588fe8597bb6723181b77e02cfe"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">UPD_CORE_t::NumberPackets</a></div><div class="ttdeci">I4 NumberPackets</div><div class="ttdoc">number of packets to write </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00067">updateCore.h:67</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_af4892b3558ebdfb2c651670dee779d06"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#af4892b3558ebdfb2c651670dee779d06">UPD_CORE_t::eraseInProgres</a></div><div class="ttdeci">BOOL eraseInProgres</div><div class="ttdoc">Erase in progress. </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00092">updateCore.h:92</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_aeb6b1b5a2bdd4ff1335b2060a04ecd38"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#aeb6b1b5a2bdd4ff1335b2060a04ecd38">UPD_CORE_t::PendingErases</a></div><div class="ttdeci">U4 PendingErases</div><div class="ttdoc">number of erases pending </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00086">updateCore.h:86</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a74708b0ccc127688f33a7c26cf46d587"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">UPD_CORE_t::NumberSectors</a></div><div class="ttdeci">I4 NumberSectors</div><div class="ttdoc">number of sectors to erase </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00066">updateCore.h:66</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">ACK_ERASE_ACK</a></div><div class="ttdoc">erase acknowledged for packet </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00056">updateCore.h:56</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a473b072e9732618d37a1df6e05fb69c6"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a473b072e9732618d37a1df6e05fb69c6">UPD_CORE_t::pEraseRetryCnt</a></div><div class="ttdeci">U1 * pEraseRetryCnt</div><div class="ttdoc">array to store retry counts for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00079">updateCore.h:79</a></div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
<div class="ttc" id="update_core_8h_html_ac8a565248bf80a622adcf61f4fe6dbc3"><div class="ttname"><a href="update_core_8h.html#ac8a565248bf80a622adcf61f4fe6dbc3">CONSOLE_WIDTH</a></div><div class="ttdeci">#define CONSOLE_WIDTH</div><div class="ttdoc">Width of the console. </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00047">updateCore.h:47</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a9478a793293df1813c4a42d7701a5156"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a9478a793293df1813c4a42d7701a5156">UPD_CORE_t::Rx</a></div><div class="ttdeci">RCV_DATA_t * Rx</div><div class="ttdoc">receiver to communicate with </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00065">updateCore.h:65</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_ae148b3ac6b191b570ebae852b8d09779"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">UPD_CORE_t::pEraseState</a></div><div class="ttdeci">CH * pEraseState</div><div class="ttdoc">array to store erase status for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00080">updateCore.h:80</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a1cbc5b9d688c2a8ce86eea878c111500"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a1cbc5b9d688c2a8ce86eea878c111500">UPD_CORE_t::MaxPendingWritesNum</a></div><div class="ttdeci">U4 MaxPendingWritesNum</div><div class="ttdoc">max number of which can be queued in the receiver writes pending </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00091">updateCore.h:91</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_aeb4ca04540e3469c6cf593fb6c49e137"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#aeb4ca04540e3469c6cf593fb6c49e137">UPD_CORE_t::FlashOrg</a></div><div class="ttdeci">BLOCK_ARR_t * FlashOrg</div><div class="ttdoc">flash organization </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00072">updateCore.h:72</a></div></div>
<div class="ttc" id="flash_8c_html_a56b541279c3a85340438fb48478945e5"><div class="ttname"><a href="flash_8c.html#a56b541279c3a85340438fb48478945e5">GetPacketNrForSector</a></div><div class="ttdeci">I4 GetPacketNrForSector(const U4 Sector, const BLOCK_ARR_pt pFlashdef, const U4 PacketSize)</div><div class="ttdoc">Get the number of the packet for the given sector. </div><div class="ttdef"><b>Definition:</b> <a href="flash_8c_source.html#l00216">flash.c:216</a></div></div>
<div class="ttc" id="types_8h_html_a2d18590ee6cb00e8ea0a631cf9696f53"><div class="ttname"><a href="types_8h.html#a2d18590ee6cb00e8ea0a631cf9696f53">CH</a></div><div class="ttdeci">char CH</div><div class="ttdoc">8-bit character, (signed/unsigned, depending on compiler) </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00064">types.h:64</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39adc4435c49874c6d3145e6cb0754373a9">ACK_INIT</a></div><div class="ttdoc">initial state </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00054">updateCore.h:54</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a091041a0eb56f2bdd4dc1f1931f9979d"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a091041a0eb56f2bdd4dc1f1931f9979d">UPD_CORE_t::sLastDumpTime</a></div><div class="ttdeci">U4 sLastDumpTime</div><div class="ttdoc">time of the last dump (for verbose > 1) </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00089">updateCore.h:89</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a0bcb4d97e337d93937d3be604776ed8f"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a0bcb4d97e337d93937d3be604776ed8f">UPD_CORE_t::PendingWrites</a></div><div class="ttdeci">U4 PendingWrites</div><div class="ttdoc">number of writes pending </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00087">updateCore.h:87</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_adea65c999b522373ffdad7f378836bd4"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#adea65c999b522373ffdad7f378836bd4">UPD_CORE_t::pEraseTimeout</a></div><div class="ttdeci">U4 * pEraseTimeout</div><div class="ttdoc">array to store timeouts for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00078">updateCore.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4c065d6b9a1ae76e08bde0a84ee898e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> updUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_u_p_d___c_o_r_e__t.html">UPD_CORE_t</a> *&#160;</td>
          <td class="paramname"><em>upd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="image_8h.html#a640c15684830a3ad6b5a2fc0bcacc54b">FWHEADER_t</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>&#160;</td>
          <td class="paramname"><em>fwBase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Do the update.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">upd</td><td>control structure </td></tr>
    <tr><td class="paramname">data</td><td>pointer to the data to write </td></tr>
    <tr><td class="paramname">size</td><td>size of the data </td></tr>
    <tr><td class="paramname">fwBase</td><td>start address of the firmware on the flash </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if successful </dd></dl>

<p>Definition at line <a class="el" href="update_core_8c_source.html#l00578">578</a> of file <a class="el" href="update_core_8c_source.html">updateCore.c</a>.</p>

<p>References <a class="el" href="update_core_8h_source.html#l00056">ACK_ERASE_ACK</a>, <a class="el" href="update_core_8h_source.html#l00058">ACK_WRITE_ACK</a>, <a class="el" href="update_core_8h_source.html#l00043">CHIP_ERASE_TIMEOUT</a>, <a class="el" href="update_core_8h_source.html#l00092">UPD_CORE_t::eraseInProgres</a>, <a class="el" href="types_8h_source.html#l00075">FALSE</a>, <a class="el" href="update_core_8h_source.html#l00074">UPD_CORE_t::FwBase</a>, <a class="el" href="update_core_8h_source.html#l00076">UPD_CORE_t::ImageSize</a>, <a class="el" href="platform_8c_source.html#l01992">MESSAGE()</a>, <a class="el" href="platform_8h_source.html#l00226">MSG_DBG</a>, <a class="el" href="platform_8h_source.html#l00218">MSG_ERR</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="update_core_8h_source.html#l00067">UPD_CORE_t::NumberPackets</a>, <a class="el" href="update_core_8h_source.html#l00066">UPD_CORE_t::NumberSectors</a>, <a class="el" href="update_core_8h_source.html#l00075">UPD_CORE_t::pData</a>, <a class="el" href="update_core_8h_source.html#l00080">UPD_CORE_t::pEraseState</a>, <a class="el" href="update_core_8h_source.html#l00084">UPD_CORE_t::pWriteState</a>, <a class="el" href="receiver_8c_source.html#l00232">rcvReceiveMessage()</a>, <a class="el" href="update_core_8h_source.html#l00065">UPD_CORE_t::Rx</a>, <a class="el" href="ubxmsg_8h_source.html#l00059">UBX_HEAD_s::size</a>, <a class="el" href="types_8h_source.html#l00076">TRUE</a>, <a class="el" href="ubxmsg_8h_source.html#l00107">UBX_CLASS_UPD</a>, <a class="el" href="ubxmsg_8h_source.html#l00097">UBX_HEAD_SIZE</a>, <a class="el" href="ubxmsg_8h_source.html#l00120">UBX_UPD_CERASE</a>, <a class="el" href="update_core_8c_source.html#l00099">updDumpAck()</a>, <a class="el" href="update_core_8c_source.html#l00311">updEraseSector()</a>, <a class="el" href="update_core_8c_source.html#l00191">updProcessMessages()</a>, and <a class="el" href="update_core_8c_source.html#l00389">updWritePacket()</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>.</p>
<div class="fragment"><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;{</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    assert(upd);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#ab132f60260d98f3837ddf20f52a60036">pData</a> = data;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9f06a0ef019cc68c0342c8ae6fab68c1">ImageSize</a> = size;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a76347d13c839ff2559595d6fead2d913">FwBase</a> = fwBase;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> writeComplete = (upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a> == 0);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> eraseComplete = (upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a> == 0);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="update_core_8c.html#aadfd35bbc222f233164d22a25efb6fa2">updDumpAck</a>(upd, <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment">// loop around until everything is written and erased</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">while</span>( !writeComplete || !eraseComplete )</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">if</span>( !eraseComplete )</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="comment">// try to send an erase command</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="update_core_8c.html#ac873b58a11add9d97c598e7ec876c401">updEraseSector</a>(upd) )</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <a class="code" href="update_core_8c.html#aadfd35bbc222f233164d22a25efb6fa2">updDumpAck</a>(upd, <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            <span class="comment">// receive messages</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="update_core_8c.html#ae78c9293d678ee3e6a3d297800f579ed">updProcessMessages</a>(upd) )</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="comment">// check if everything is erased completely</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            eraseComplete = <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <a class="code" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> sector;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">for</span>(sector = 0; sector &lt; upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">NumberSectors</a>; sector++)</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                <span class="keywordflow">if</span> (upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">pEraseState</a>[sector] != <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">ACK_ERASE_ACK</a>)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                    eraseComplete = <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">if</span>( !writeComplete )</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="comment">// try to send write command</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="update_core_8c.html#a4b205985db984dfcd40cf465d760cf75">updWritePacket</a>(upd))</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <a class="code" href="update_core_8c.html#aadfd35bbc222f233164d22a25efb6fa2">updDumpAck</a>(upd, <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="comment">// receive messages</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="keywordflow">if</span>( !<a class="code" href="update_core_8c.html#ae78c9293d678ee3e6a3d297800f579ed">updProcessMessages</a>(upd) )</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="comment">// check if everything was written completely</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            writeComplete = <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <a class="code" href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a> pack;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="keywordflow">for</span>(pack = 0; pack &lt; upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">NumberPackets</a>; pack++)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="keywordflow">if</span> (upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">pWriteState</a>[pack] != <a class="code" href="update_core_8h.html#a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0">ACK_WRITE_ACK</a>)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    writeComplete = <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="update_core_8c.html#aadfd35bbc222f233164d22a25efb6fa2">updDumpAck</a>(upd, <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#af4892b3558ebdfb2c651670dee779d06">eraseInProgres</a>)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <a class="code" href="struct_u_b_x___h_e_a_d__s.html">UBX_HEAD_t</a>* cErase = <a class="code" href="receiver_8c.html#a02c74cd7d3d7df99a9d5abb45cfb5a58">rcvReceiveMessage</a>(upd-&gt;<a class="code" href="struct_u_p_d___c_o_r_e__t.html#a9478a793293df1813c4a42d7701a5156">Rx</a>, <a class="code" href="update_core_8h.html#a8818657501b169fe9289ed5d37e29b11">CHIP_ERASE_TIMEOUT</a>, <a class="code" href="ubxmsg_8h.html#a0129b7951dfb86416b5acb8896643bfaa6b0eb8ee54694ef71ac6b453648edf9b">UBX_CLASS_UPD</a>, <a class="code" href="ubxmsg_8h.html#a0129b7951dfb86416b5acb8896643bfaa42a3b048fe42539073752e0e4bb9b0c9">UBX_UPD_CERASE</a>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">if</span> (cErase == <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <a class="code" href="platform_8c.html#a893956021e39f080363c13adeea56462">MESSAGE</a>(<a class="code" href="platform_8h.html#a10cd4539bac4c67d55db0fa42b4a2333af369b3edb73a3b6e9ec208dc312f9bd6">MSG_ERR</a>, <span class="stringliteral">&quot;Chip erase timed out&quot;</span>);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> (cErase-&gt;<a class="code" href="struct_u_b_x___h_e_a_d__s.html#aa89eeea608ab09a8ba70d5b92e641f30">size</a> != 1)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">if</span> (((<a class="code" href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a>*)cErase)[<a class="code" href="ubxmsg_8h.html#a5a802d4c63ef065926e9508383f43e3d">UBX_HEAD_SIZE</a>] == 1)</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                <a class="code" href="platform_8c.html#a893956021e39f080363c13adeea56462">MESSAGE</a>(<a class="code" href="platform_8h.html#a10cd4539bac4c67d55db0fa42b4a2333ad2103d9025b58432b1f33d48d87d2ec8">MSG_DBG</a>, <span class="stringliteral">&quot;Chip erase finished later than update proces&quot;</span>);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <a class="code" href="platform_8c.html#a893956021e39f080363c13adeea56462">MESSAGE</a>(<a class="code" href="platform_8h.html#a10cd4539bac4c67d55db0fa42b4a2333af369b3edb73a3b6e9ec208dc312f9bd6">MSG_ERR</a>, <span class="stringliteral">&quot;Chip erase failed&quot;</span>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div>
<div class="ttc" id="update_core_8c_html_aadfd35bbc222f233164d22a25efb6fa2"><div class="ttname"><a href="update_core_8c.html#aadfd35bbc222f233164d22a25efb6fa2">updDumpAck</a></div><div class="ttdeci">static void updDumpAck(UPD_CORE_t *upd, BOOL force)</div><div class="ttdef"><b>Definition:</b> <a href="update_core_8c_source.html#l00099">updateCore.c:99</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_acfc1f7f83dd9db1b09ba2a599c51e033"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#acfc1f7f83dd9db1b09ba2a599c51e033">UPD_CORE_t::pWriteState</a></div><div class="ttdeci">CH * pWriteState</div><div class="ttdoc">array to store erase status for the to be written packets </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00084">updateCore.h:84</a></div></div>
<div class="ttc" id="ubxmsg_8h_html_a0129b7951dfb86416b5acb8896643bfaa6b0eb8ee54694ef71ac6b453648edf9b"><div class="ttname"><a href="ubxmsg_8h.html#a0129b7951dfb86416b5acb8896643bfaa6b0eb8ee54694ef71ac6b453648edf9b">UBX_CLASS_UPD</a></div><div class="ttdoc">Class update. </div><div class="ttdef"><b>Definition:</b> <a href="ubxmsg_8h_source.html#l00107">ubxmsg.h:107</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_ab132f60260d98f3837ddf20f52a60036"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#ab132f60260d98f3837ddf20f52a60036">UPD_CORE_t::pData</a></div><div class="ttdeci">FWHEADER_t * pData</div><div class="ttdoc">pointer to the data to write </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00075">updateCore.h:75</a></div></div>
<div class="ttc" id="platform_8c_html_a893956021e39f080363c13adeea56462"><div class="ttname"><a href="platform_8c.html#a893956021e39f080363c13adeea56462">MESSAGE</a></div><div class="ttdeci">void MESSAGE(MSG_LEVEL level, const CH *format,...)</div><div class="ttdoc">Print status message. </div><div class="ttdef"><b>Definition:</b> <a href="platform_8c_source.html#l01992">platform.c:1992</a></div></div>
<div class="ttc" id="update_core_8c_html_ac873b58a11add9d97c598e7ec876c401"><div class="ttname"><a href="update_core_8c.html#ac873b58a11add9d97c598e7ec876c401">updEraseSector</a></div><div class="ttdeci">static BOOL updEraseSector(UPD_CORE_t *upd)</div><div class="ttdef"><b>Definition:</b> <a href="update_core_8c_source.html#l00311">updateCore.c:311</a></div></div>
<div class="ttc" id="types_8h_html_a79199901c1122f5e17970b6887de3d6a"><div class="ttname"><a href="types_8h.html#a79199901c1122f5e17970b6887de3d6a">U1</a></div><div class="ttdeci">unsigned __int8 U1</div><div class="ttdoc">8-bit unsigned integer number(unsigned character) </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00058">types.h:58</a></div></div>
<div class="ttc" id="ubxmsg_8h_html_a0129b7951dfb86416b5acb8896643bfaa42a3b048fe42539073752e0e4bb9b0c9"><div class="ttname"><a href="ubxmsg_8h.html#a0129b7951dfb86416b5acb8896643bfaa42a3b048fe42539073752e0e4bb9b0c9">UBX_UPD_CERASE</a></div><div class="ttdoc">Chip erase (NDA 15+) </div><div class="ttdef"><b>Definition:</b> <a href="ubxmsg_8h_source.html#l00120">ubxmsg.h:120</a></div></div>
<div class="ttc" id="update_core_8h_html_a8818657501b169fe9289ed5d37e29b11"><div class="ttname"><a href="update_core_8h.html#a8818657501b169fe9289ed5d37e29b11">CHIP_ERASE_TIMEOUT</a></div><div class="ttdeci">#define CHIP_ERASE_TIMEOUT</div><div class="ttdoc">chip erase timeout </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00043">updateCore.h:43</a></div></div>
<div class="ttc" id="platform_8h_html_a10cd4539bac4c67d55db0fa42b4a2333af369b3edb73a3b6e9ec208dc312f9bd6"><div class="ttname"><a href="platform_8h.html#a10cd4539bac4c67d55db0fa42b4a2333af369b3edb73a3b6e9ec208dc312f9bd6">MSG_ERR</a></div><div class="ttdoc">Error message. </div><div class="ttdef"><b>Definition:</b> <a href="platform_8h_source.html#l00218">platform.h:218</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a9f06a0ef019cc68c0342c8ae6fab68c1"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a9f06a0ef019cc68c0342c8ae6fab68c1">UPD_CORE_t::ImageSize</a></div><div class="ttdeci">U4 ImageSize</div><div class="ttdoc">size of the image </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00076">updateCore.h:76</a></div></div>
<div class="ttc" id="receiver_8c_html_a02c74cd7d3d7df99a9d5abb45cfb5a58"><div class="ttname"><a href="receiver_8c.html#a02c74cd7d3d7df99a9d5abb45cfb5a58">rcvReceiveMessage</a></div><div class="ttdeci">UBX_HEAD_t * rcvReceiveMessage(RCV_DATA_t *rcv, U4 timeout, I4 classId, I4 msgId)</div><div class="ttdef"><b>Definition:</b> <a href="receiver_8c_source.html#l00232">receiver.c:232</a></div></div>
<div class="ttc" id="types_8h_html_af46a6e340cd583b499789b9bb39f7809"><div class="ttname"><a href="types_8h.html#af46a6e340cd583b499789b9bb39f7809">I4</a></div><div class="ttdeci">signed __int32 I4</div><div class="ttdoc">32-bit signed integer number </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00053">types.h:53</a></div></div>
<div class="ttc" id="types_8h_html_a050c65e107f0c828f856a231f4b4e788"><div class="ttname"><a href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a></div><div class="ttdeci">int BOOL</div><div class="ttdoc">Boolean type. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00073">types.h:73</a></div></div>
<div class="ttc" id="types_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdoc">Boolean FALSE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00075">types.h:75</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a9ad3d588fe8597bb6723181b77e02cfe"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a9ad3d588fe8597bb6723181b77e02cfe">UPD_CORE_t::NumberPackets</a></div><div class="ttdeci">I4 NumberPackets</div><div class="ttdoc">number of packets to write </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00067">updateCore.h:67</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_af4892b3558ebdfb2c651670dee779d06"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#af4892b3558ebdfb2c651670dee779d06">UPD_CORE_t::eraseInProgres</a></div><div class="ttdeci">BOOL eraseInProgres</div><div class="ttdoc">Erase in progress. </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00092">updateCore.h:92</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a74708b0ccc127688f33a7c26cf46d587"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a74708b0ccc127688f33a7c26cf46d587">UPD_CORE_t::NumberSectors</a></div><div class="ttdeci">I4 NumberSectors</div><div class="ttdoc">number of sectors to erase </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00066">updateCore.h:66</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39a4ce2f66cb1c020ab5111c98a48c1509a">ACK_ERASE_ACK</a></div><div class="ttdoc">erase acknowledged for packet </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00056">updateCore.h:56</a></div></div>
<div class="ttc" id="update_core_8c_html_ae78c9293d678ee3e6a3d297800f579ed"><div class="ttname"><a href="update_core_8c.html#ae78c9293d678ee3e6a3d297800f579ed">updProcessMessages</a></div><div class="ttdeci">static BOOL updProcessMessages(UPD_CORE_t *upd)</div><div class="ttdef"><b>Definition:</b> <a href="update_core_8c_source.html#l00191">updateCore.c:191</a></div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
<div class="ttc" id="struct_u_b_x___h_e_a_d__s_html"><div class="ttname"><a href="struct_u_b_x___h_e_a_d__s.html">UBX_HEAD_s</a></div><div class="ttdoc">UBX Protocol Header. </div><div class="ttdef"><b>Definition:</b> <a href="ubxmsg_8h_source.html#l00054">ubxmsg.h:54</a></div></div>
<div class="ttc" id="types_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdoc">Boolean TRUE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00076">types.h:76</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a9478a793293df1813c4a42d7701a5156"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a9478a793293df1813c4a42d7701a5156">UPD_CORE_t::Rx</a></div><div class="ttdeci">RCV_DATA_t * Rx</div><div class="ttdoc">receiver to communicate with </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00065">updateCore.h:65</a></div></div>
<div class="ttc" id="platform_8h_html_a10cd4539bac4c67d55db0fa42b4a2333ad2103d9025b58432b1f33d48d87d2ec8"><div class="ttname"><a href="platform_8h.html#a10cd4539bac4c67d55db0fa42b4a2333ad2103d9025b58432b1f33d48d87d2ec8">MSG_DBG</a></div><div class="ttdoc">Debug message. </div><div class="ttdef"><b>Definition:</b> <a href="platform_8h_source.html#l00226">platform.h:226</a></div></div>
<div class="ttc" id="ubxmsg_8h_html_a5a802d4c63ef065926e9508383f43e3d"><div class="ttname"><a href="ubxmsg_8h.html#a5a802d4c63ef065926e9508383f43e3d">UBX_HEAD_SIZE</a></div><div class="ttdeci">#define UBX_HEAD_SIZE</div><div class="ttdoc">UBX Protocol Header Size. </div><div class="ttdef"><b>Definition:</b> <a href="ubxmsg_8h_source.html#l00097">ubxmsg.h:97</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_a76347d13c839ff2559595d6fead2d913"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#a76347d13c839ff2559595d6fead2d913">UPD_CORE_t::FwBase</a></div><div class="ttdeci">U4 FwBase</div><div class="ttdoc">start address of the firmware on the flash </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00074">updateCore.h:74</a></div></div>
<div class="ttc" id="update_core_8c_html_a4b205985db984dfcd40cf465d760cf75"><div class="ttname"><a href="update_core_8c.html#a4b205985db984dfcd40cf465d760cf75">updWritePacket</a></div><div class="ttdeci">static BOOL updWritePacket(UPD_CORE_t *upd)</div><div class="ttdef"><b>Definition:</b> <a href="update_core_8c_source.html#l00389">updateCore.c:389</a></div></div>
<div class="ttc" id="struct_u_p_d___c_o_r_e__t_html_ae148b3ac6b191b570ebae852b8d09779"><div class="ttname"><a href="struct_u_p_d___c_o_r_e__t.html#ae148b3ac6b191b570ebae852b8d09779">UPD_CORE_t::pEraseState</a></div><div class="ttdeci">CH * pEraseState</div><div class="ttdoc">array to store erase status for the to be erased sectors </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00080">updateCore.h:80</a></div></div>
<div class="ttc" id="update_core_8h_html_a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0"><div class="ttname"><a href="update_core_8h.html#a130a626da56d697af470eccd12259c39ab2a41f9c9b0daa6582fdfcbdd0d1b2d0">ACK_WRITE_ACK</a></div><div class="ttdoc">write acknowledged for packet </div><div class="ttdef"><b>Definition:</b> <a href="update_core_8h_source.html#l00058">updateCore.h:58</a></div></div>
<div class="ttc" id="struct_u_b_x___h_e_a_d__s_html_aa89eeea608ab09a8ba70d5b92e641f30"><div class="ttname"><a href="struct_u_b_x___h_e_a_d__s.html#aa89eeea608ab09a8ba70d5b92e641f30">UBX_HEAD_s::size</a></div><div class="ttdeci">U2 size</div><div class="ttdoc">Payload Size. </div><div class="ttdef"><b>Definition:</b> <a href="ubxmsg_8h_source.html#l00059">ubxmsg.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="update_core_8h.html">updateCore.h</a></li>
    <li class="footer">Generated on Sun May 23 2021 19:02:48 for ubxfwupdate by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
