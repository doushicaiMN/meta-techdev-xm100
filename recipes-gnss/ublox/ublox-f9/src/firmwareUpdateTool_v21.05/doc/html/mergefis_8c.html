<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>ubxfwupdate: mergefis.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="u-blox_logo_09.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ubxfwupdate
   &#160;<span id="projectnumber">21.05</span>
   </div>
   <div id="projectbrief">Firmware Update Tool Documentation &mdash; Copyright (c) 2015 u-blox AG.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mergefis_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mergefis.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Loads and parses a FIS file and merges the file with the binary.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="mergefis_8h_source.html">mergefis.h</a>&quot;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
</div>
<p><a href="mergefis_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rule for an XML element or attribute.  <a href="struct_x_m_l___r_u_l_e__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_x_m_l___a_t_t_r__t.html">XML_ATTR_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An XML Attribute can be defined by this structure.  <a href="struct_x_m_l___a_t_t_r__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_s</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines an XML element in a XML tree.  <a href="struct_x_m_l___e_l_e_m__s.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:abee4f3aaa0e87d0cb65c66dec12ef4f7"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a></td></tr>
<tr class="memdesc:abee4f3aaa0e87d0cb65c66dec12ef4f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines an XML element in a XML tree.  <a href="#abee4f3aaa0e87d0cb65c66dec12ef4f7">More...</a><br /></td></tr>
<tr class="separator:abee4f3aaa0e87d0cb65c66dec12ef4f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aad04e20575af146df6c0fdc5fd951d29"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a> (<a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> *data)</td></tr>
<tr class="memdesc:aad04e20575af146df6c0fdc5fd951d29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free all contents in all elements of the XML tree to which data belongs.  <a href="#aad04e20575af146df6c0fdc5fd951d29">More...</a><br /></td></tr>
<tr class="separator:aad04e20575af146df6c0fdc5fd951d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab83434bd23d8bfbeaa23f145ca57224f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="struct_x_m_l___a_t_t_r__t.html">XML_ATTR_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#ab83434bd23d8bfbeaa23f145ca57224f">findJedec</a> (<a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> *elem, unsigned int const jedec)</td></tr>
<tr class="memdesc:ab83434bd23d8bfbeaa23f145ca57224f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the JEDEC attribute and compare it to the integer argument.  <a href="#ab83434bd23d8bfbeaa23f145ca57224f">More...</a><br /></td></tr>
<tr class="separator:ab83434bd23d8bfbeaa23f145ca57224f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b7c0866ace096ac0d50601a52f3d21"><td class="memItemLeft" align="right" valign="top">static char const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#aa5b7c0866ace096ac0d50601a52f3d21">getAttrValue</a> (char const *attrName, <a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> const *elem)</td></tr>
<tr class="memdesc:aa5b7c0866ace096ac0d50601a52f3d21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the attribute value with the specified name in the provided element.  <a href="#aa5b7c0866ace096ac0d50601a52f3d21">More...</a><br /></td></tr>
<tr class="separator:aa5b7c0866ace096ac0d50601a52f3d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace83f4edb658c233b298cf37fd439e36"><td class="memItemLeft" align="right" valign="top">static char const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a> (char const *elemName, <a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> const *elem)</td></tr>
<tr class="memdesc:ace83f4edb658c233b298cf37fd439e36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the value of the child-element with the specified name.  <a href="#ace83f4edb658c233b298cf37fd439e36">More...</a><br /></td></tr>
<tr class="separator:ace83f4edb658c233b298cf37fd439e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee23fc201a79253b9771928f47140c03"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#aee23fc201a79253b9771928f47140c03">isElementOrAttr</a> (<a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> const *xmlData, char const *tag, char const *attr)</td></tr>
<tr class="memdesc:aee23fc201a79253b9771928f47140c03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the current XML parsing state point to the element or attribute name?  <a href="#aee23fc201a79253b9771928f47140c03">More...</a><br /></td></tr>
<tr class="separator:aee23fc201a79253b9771928f47140c03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1140bc8dba273c6decd249f4ca42b7"><td class="memItemLeft" align="right" valign="top">static long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a8a1140bc8dba273c6decd249f4ca42b7">findNextInXml</a> (<a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *xmlData, char const *tag, char const *attr, char **result)</td></tr>
<tr class="memdesc:a8a1140bc8dba273c6decd249f4ca42b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the next value for the passed element or attribute name in an XML file.  <a href="#a8a1140bc8dba273c6decd249f4ca42b7">More...</a><br /></td></tr>
<tr class="separator:a8a1140bc8dba273c6decd249f4ca42b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ef8066d50468585d25eab1f10a81c3c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a5ef8066d50468585d25eab1f10a81c3c">hex_string_to_char_array</a> (const char *hex_string, char *data)</td></tr>
<tr class="separator:a5ef8066d50468585d25eab1f10a81c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91a28dc5f311e9026d7ed1a6a96bae1a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a91a28dc5f311e9026d7ed1a6a96bae1a">GetUbxChecksumU4</a> (unsigned int *pCrc_a, unsigned int *pCrc_b, const unsigned int *pData, size_t length)</td></tr>
<tr class="separator:a91a28dc5f311e9026d7ed1a6a96bae1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f8c5741f4180fad08358713ff357137"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a6f8c5741f4180fad08358713ff357137">CheckUbxChecksumU4</a> (const unsigned int *pData, size_t length)</td></tr>
<tr class="separator:a6f8c5741f4180fad08358713ff357137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc444529662f3582705348302170a7c"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a2dc444529662f3582705348302170a7c">lib_crc_crc32</a> (unsigned int seed, const void *pkAdr, unsigned int size)</td></tr>
<tr class="memdesc:a2dc444529662f3582705348302170a7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate 4 byte CRC.  <a href="#a2dc444529662f3582705348302170a7c">More...</a><br /></td></tr>
<tr class="separator:a2dc444529662f3582705348302170a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05629a7f2903d3f238446b5534b59328"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a05629a7f2903d3f238446b5534b59328">UpdateImageCrc</a> (char *pImage, const size_t ImageSize)</td></tr>
<tr class="memdesc:a05629a7f2903d3f238446b5534b59328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the CRC of the flash image.  <a href="#a05629a7f2903d3f238446b5534b59328">More...</a><br /></td></tr>
<tr class="separator:a05629a7f2903d3f238446b5534b59328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafa42f0bbb1a73dde1766027aace50d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#aafa42f0bbb1a73dde1766027aace50d5">buildXmlTree</a> (<a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *xmlData, <a class="el" href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a> const *allowedEntries, unsigned int numAllowedEntries, <a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> **root)</td></tr>
<tr class="memdesc:aafa42f0bbb1a73dde1766027aace50d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the provided XML file and extract a tree according to the rules.  <a href="#aafa42f0bbb1a73dde1766027aace50d5">More...</a><br /></td></tr>
<tr class="separator:aafa42f0bbb1a73dde1766027aace50d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b0120e85854eff2a42197f70aa76745"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a0b0120e85854eff2a42197f70aa76745">findDevice</a> (<a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *xmlData, <a class="el" href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a> const *allowedEntries, size_t numEntries, const unsigned int jedec)</td></tr>
<tr class="memdesc:a0b0120e85854eff2a42197f70aa76745"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the device with the JEDEC given.  <a href="#a0b0120e85854eff2a42197f70aa76745">More...</a><br /></td></tr>
<tr class="separator:a0b0120e85854eff2a42197f70aa76745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af07293846255bf6c4b9179653d78dd20"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#af07293846255bf6c4b9179653d78dd20">findCmdSet</a> (<a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *xmlData, <a class="el" href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a> const *allowedEntries, size_t numEntries, char const *cmdsetName)</td></tr>
<tr class="memdesc:af07293846255bf6c4b9179653d78dd20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the device with the JEDEC given.  <a href="#af07293846255bf6c4b9179653d78dd20">More...</a><br /></td></tr>
<tr class="separator:af07293846255bf6c4b9179653d78dd20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3e69a365a37dcaf3d0f392b65a2cc9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a> (char *string, <a class="el" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> *res)</td></tr>
<tr class="separator:a0b3e69a365a37dcaf3d0f392b65a2cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ac22472913610e5273754d13056259"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#ab3ac22472913610e5273754d13056259">edit_table2</a> (char *fis, <a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> const *container)</td></tr>
<tr class="memdesc:ab3ac22472913610e5273754d13056259"><td class="mdescLeft">&#160;</td><td class="mdescRight">Edit the leading table of the FIS version 2.  <a href="#ab3ac22472913610e5273754d13056259">More...</a><br /></td></tr>
<tr class="separator:ab3ac22472913610e5273754d13056259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5736369b7efb562e0d1726ac6cb46657"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a5736369b7efb562e0d1726ac6cb46657">mergefis_get_sector_count</a> (char const *fis)</td></tr>
<tr class="memdesc:a5736369b7efb562e0d1726ac6cb46657"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the sector count in the FIS.  <a href="#a5736369b7efb562e0d1726ac6cb46657">More...</a><br /></td></tr>
<tr class="separator:a5736369b7efb562e0d1726ac6cb46657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed5ea69800bed0f911492a7a79d7708"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a5ed5ea69800bed0f911492a7a79d7708">mergefis_get_sector_size</a> (char const *fis)</td></tr>
<tr class="memdesc:a5ed5ea69800bed0f911492a7a79d7708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the sector size in the FIS.  <a href="#a5ed5ea69800bed0f911492a7a79d7708">More...</a><br /></td></tr>
<tr class="separator:a5ed5ea69800bed0f911492a7a79d7708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0311fbd10e9c76bd2ba50496cb6e9694"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bc">MERGEFIS_RETVAL_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a0311fbd10e9c76bd2ba50496cb6e9694">mergefis_load2</a> (char **fis, size_t *fisSize, <a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *xmlData, const unsigned int jedec, char const *revisionString)</td></tr>
<tr class="separator:a0311fbd10e9c76bd2ba50496cb6e9694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a355730c88715f80ba18bd8cce877e1bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bc">MERGEFIS_RETVAL_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#a355730c88715f80ba18bd8cce877e1bc">mergefis_load</a> (char **fis, size_t *fisSize, const char *fisFile, const unsigned int jedec)</td></tr>
<tr class="memdesc:a355730c88715f80ba18bd8cce877e1bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the image of the FIS.  <a href="#a355730c88715f80ba18bd8cce877e1bc">More...</a><br /></td></tr>
<tr class="separator:a355730c88715f80ba18bd8cce877e1bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4eee236d80de78bb5efab5a1970ba31"><td class="memItemLeft" align="right" valign="top"><a class="el" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bc">MERGEFIS_RETVAL_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#ac4eee236d80de78bb5efab5a1970ba31">mergefis_merge</a> (char *pData, unsigned int ImageSize, char const *fis)</td></tr>
<tr class="memdesc:ac4eee236d80de78bb5efab5a1970ba31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merge the flash image with the corresponding FIS data.  <a href="#ac4eee236d80de78bb5efab5a1970ba31">More...</a><br /></td></tr>
<tr class="separator:ac4eee236d80de78bb5efab5a1970ba31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abdf28f2e59e90270ae53dea84b66db20"><td class="memItemLeft" align="right" valign="top">const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mergefis_8c.html#abdf28f2e59e90270ae53dea84b66db20">lib_crc_kCrc32table</a> [256]</td></tr>
<tr class="separator:abdf28f2e59e90270ae53dea84b66db20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Loads and parses a FIS file and merges the file with the binary. </p>

<p>Definition in file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="abee4f3aaa0e87d0cb65c66dec12ef4f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_s</a>  <a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines an XML element in a XML tree. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aafa42f0bbb1a73dde1766027aace50d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> buildXmlTree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *&#160;</td>
          <td class="paramname"><em>xmlData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a> const *&#160;</td>
          <td class="paramname"><em>allowedEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>numAllowedEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> **&#160;</td>
          <td class="paramname"><em>root</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the provided XML file and extract a tree according to the rules. </p>
<p>The provided XML file will be parsed according to the rules of the array of allowed entries. On success the generated tree should contain all children, attributes and values in the specified section.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xmlData</td><td>: The current state of the XML parsing at which parsing continues within this file </td></tr>
    <tr><td class="paramname">allowedEntries</td><td>: The structure that defines what elements and attributes are allowed where and which elements are potential root elements for the generated tree </td></tr>
    <tr><td class="paramname">numAllowedEntries</td><td>: Number of entries in allowedEntries </td></tr>
    <tr><td class="paramname">root</td><td>: The passed pointer will on success point to the highest element of the XML tree. This has to be freed by the calling function with freeXmlTree on success. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE on success, FALSE otherwise </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00571">571</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00093">XML_ELEM_s::attr</a>, <a class="el" href="mergefis_8c_source.html#l00089">XML_ELEM_s::children</a>, <a class="el" href="mergefis_8c_source.html#l00064">XML_RULE_t::contentType</a>, <a class="el" href="types_8h_source.html#l00075">FALSE</a>, <a class="el" href="mergefis_8h_source.html#l00124">XML_HNDL_t::fd</a>, <a class="el" href="mergefis_8c_source.html#l00178">freeXmlTree()</a>, <a class="el" href="mergefis_8c_source.html#l00077">XML_ATTR_t::name</a>, <a class="el" href="mergefis_8c_source.html#l00084">XML_ELEM_s::name</a>, <a class="el" href="mergefis_8c_source.html#l00091">XML_ELEM_s::numAttr</a>, <a class="el" href="mergefis_8c_source.html#l00087">XML_ELEM_s::numChildren</a>, <a class="el" href="mergefis_8c_source.html#l00085">XML_ELEM_s::parent</a>, <a class="el" href="mergefis_8h_source.html#l00125">XML_HNDL_t::state</a>, <a class="el" href="types_8h_source.html#l00076">TRUE</a>, <a class="el" href="mergefis_8c_source.html#l00078">XML_ATTR_t::value</a>, and <a class="el" href="mergefis_8c_source.html#l00095">XML_ELEM_s::value</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l00916">findCmdSet()</a>, and <a class="el" href="mergefis_8c_source.html#l00863">findDevice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;{</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">if</span>(!xmlData || !allowedEntries || !numAllowedEntries || !root)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// Make sure there is exactly one root element.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> countRoot = 0;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; numAllowedEntries; ++i)</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span>( allowedEntries[i].belongsTo[0] == <span class="charliteral">&#39;\0&#39;</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;         &amp;&amp; allowedEntries[i].contentType == YXML_CONTENT )</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            ++countRoot;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">// At least one root element must exist</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span>(countRoot == 0)</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *curr=malloc(<span class="keyword">sizeof</span>(*curr));</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">if</span>(!curr)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *dataRoot=curr;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    memset(curr, 0, <span class="keyword">sizeof</span>(*curr));</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> rootFound=<a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// Read and parse the remaining parts of the XML</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// to make sure it is not malformed</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    yxml_ret_t prevState = YXML_OK;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> contentLeadingWs = <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        assert(curr &amp;&amp; dataRoot);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="comment">// Every read error is handled as unexpected EOF</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordtype">char</span> byte;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordtype">int</span> rd=read(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">fd</a>, &amp;byte, <span class="keyword">sizeof</span>(byte));</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">if</span>( rd == <span class="keyword">sizeof</span>(byte))</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            yxml_ret_t ret = yxml_parse(&amp;xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>, byte);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="comment">// Has an error occurred?</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <span class="keywordflow">if</span>(ret &lt; YXML_OK)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="comment">// Find root element if not done so yet</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">if</span>(!rootFound)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="comment">// Is this a possible root beginning?</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                <span class="keywordflow">if</span>(ret == YXML_ELEMSTART)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    assert(dataRoot==curr);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    <span class="comment">// Check that this element is to be allowed a root element</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    <span class="keywordflow">for</span>(i = 0; i &lt; numAllowedEntries &amp;&amp; !rootFound; ++i)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                        <span class="keywordflow">if</span>( allowedEntries[i].belongsTo[0] == <span class="charliteral">&#39;\0&#39;</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                         &amp;&amp; allowedEntries[i].contentType == YXML_CONTENT )</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                        {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                            <span class="keywordflow">if</span>(!strcmp(allowedEntries[i].name, xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.elem))</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                rootFound=<a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                        }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    <span class="comment">// Copy element name</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                    <span class="keywordflow">if</span>(rootFound)</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                    {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                        dataRoot-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>=strdup(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.elem);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                        <span class="keywordflow">if</span>(!dataRoot-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                        {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                        }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                    }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <span class="keywordflow">else</span> <span class="comment">// root already found, process children and siblings</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <span class="keywordflow">switch</span>(ret)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                    <span class="keywordflow">case</span> YXML_ELEMSTART:</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                    {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                        <span class="comment">// XML Tag: root, child or &#39;sibling&#39;?</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                        <span class="comment">// Check if child is allowed to be child of this parent</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                        <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> valid=<a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        <span class="keywordflow">for</span>(i = 0; i &lt; numAllowedEntries; ++i)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                        {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                            <span class="comment">// Is this new element found in the list?</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                            <span class="keywordflow">if</span>( !strcmp(allowedEntries[i].name, xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.elem)</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                             &amp;&amp; allowedEntries[i].contentType == YXML_CONTENT )</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                            {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                                <span class="comment">// If yes, the parent also has to be an allowed one</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                                <span class="keywordflow">if</span>(strstr(allowedEntries[i].belongsTo, curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>))</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                                {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                                    valid=<a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                                }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                            }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                        <span class="keywordflow">if</span>(!valid)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                        {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                        }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                        <span class="comment">// create child</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *tmpChildren = realloc(curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>, (1+curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">numChildren</a>)*<span class="keyword">sizeof</span>(*tmpChildren));</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        <span class="keywordflow">if</span>(tmpChildren)</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                        {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                            curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a> = tmpChildren;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                            ++curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">numChildren</a>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                        }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                        {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                        }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                        <span class="comment">// switch to child</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                        <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> * parent = curr;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                        curr = &amp;curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">numChildren</a>-1];</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                        memset(curr, 0, <span class="keyword">sizeof</span>(*curr));</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                        <span class="comment">// fill child data</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                        curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>=parent;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                        <span class="comment">// Copy element name</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                        curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>=strdup(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.elem);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                        <span class="keywordflow">if</span>(!curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                        {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                        }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                    <span class="keywordflow">case</span> YXML_ATTRSTART:</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                    {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                        assert(!strcmp(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.elem, curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>));</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                        <span class="comment">// Is this attribute allowed here?</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                        <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> valid=<a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                        <span class="keywordflow">for</span>(i = 0; i &lt; numAllowedEntries; ++i)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                        {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                            <span class="comment">// Is this new element found in the list?</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                            <span class="keywordflow">if</span>( !strcmp(allowedEntries[i].name, xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.attr)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                             &amp;&amp; allowedEntries[i].contentType == YXML_ATTRVAL )</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                            {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                                <span class="comment">// If yes, the parent also has to be an allowed one</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                <span class="keywordflow">if</span>(strstr(allowedEntries[i].belongsTo, curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>))</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                    valid=<a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                            }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                        }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                        <span class="keywordflow">if</span>(!valid)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                        {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                        }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                        <span class="comment">// Create the attribute</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                        <a class="code" href="struct_x_m_l___a_t_t_r__t.html">XML_ATTR_t</a> *tmpAttr = realloc(curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>, (1+curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>)*<span class="keyword">sizeof</span>(*tmpAttr));</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                        <span class="keywordflow">if</span>(tmpAttr)</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                        {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                            curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a> = tmpAttr;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                            ++curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                        }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                        {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                        }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                        memset(&amp;curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>-1], 0, <span class="keyword">sizeof</span>(*curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>));</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                        <span class="comment">// Copy element name</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                        curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>-1].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">name</a>=strdup(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.attr);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                        <span class="keywordflow">if</span>(!curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>-1].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">name</a>)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                        {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                        }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                    }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                    <span class="keywordflow">case</span> YXML_ATTRVAL:</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                    {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                        assert(curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a> &amp;&amp; curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                        <span class="keywordtype">char</span> * attrVal = curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>-1].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">value</a>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                        <span class="keywordtype">size_t</span> attrValLen = 1 + (attrVal ? strlen(attrVal) : 0);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                        <span class="keywordtype">char</span> * tmpAttrVal = realloc(attrVal, attrValLen+strlen(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data));</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                        <span class="keywordflow">if</span>(tmpAttrVal)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                        {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                            curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>-1].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">value</a> = attrVal = tmpAttrVal;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                        }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                        {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                        }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                        memcpy( attrVal + attrValLen - 1          <span class="comment">// Overwrite the previous &#39;\0&#39;</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                              , xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                              , strlen(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data) +1 ); <span class="comment">// Copy the &#39;\0&#39; as well</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                    }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                    <span class="keywordflow">case</span> YXML_CONTENT:</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                    {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                        <span class="comment">// Is this the first whitespace content byte after another state?</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                        <span class="keywordflow">if</span>(prevState != YXML_CONTENT &amp;&amp; isspace(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data[0]))</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                            contentLeadingWs = <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!isspace(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data[0]))</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                            contentLeadingWs = <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                        <span class="comment">// Only process content after the first non-whitespace character is found</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                        <span class="keywordflow">if</span>(!contentLeadingWs)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                        {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                            <span class="comment">// Is element allowed to have content?</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                            <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> valid = <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                            <span class="keywordflow">for</span>(i = 0; i &lt; numAllowedEntries; ++i)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                            {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                                <span class="comment">// Is this new element found in the list?</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                                <span class="keywordflow">if</span>( allowedEntries[i].name[0] == <span class="charliteral">&#39;\0&#39;</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                                 &amp;&amp; allowedEntries[i].contentType == YXML_CONTENT)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                                {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                                    <span class="comment">// If yes, the parent also has to be an allowed one</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                                    <span class="keywordflow">if</span>(strstr(allowedEntries[i].belongsTo, curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>))</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                                    {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                                        valid=<a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                                    }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                                }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                            }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                            <span class="keywordflow">if</span>(!valid)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                            {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                                <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                                <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                            }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                            <span class="keywordtype">size_t</span> valueLen = 1 + (curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">value</a> ? strlen(curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">value</a>) : 0);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                            <span class="keywordtype">char</span> * tmpContentVal = realloc(curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">value</a>, valueLen+strlen(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data));</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                            <span class="keywordflow">if</span>(tmpContentVal)</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                            {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                                curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">value</a> = tmpContentVal;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                            }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                            {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                                <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                                <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                            }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                            memcpy(curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">value</a> + valueLen - 1, xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data, strlen(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data)+1); <span class="comment">// Copy the &#39;\0&#39; as well</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                        }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                    }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                    <span class="keywordflow">case</span> YXML_ELEMEND:</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                    {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                        <span class="comment">// Ends the loop if root is curr-&gt;parent</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                        curr=curr-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                    }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                    <span class="keywordflow">case</span> YXML_ATTREND:</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                    <span class="keywordflow">case</span> YXML_OK:</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                    {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                        <span class="comment">// Do nothing</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                    }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                <span class="comment">// Preserve the previous return value. YXML_OK information</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                <span class="comment">// is not very helpful, so ignore it</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                <span class="keywordflow">if</span>(ret != YXML_OK)</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                    prevState = ret;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rd == 0)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            <span class="comment">// File ended, but the caller has to find that out again</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(dataRoot);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    } <span class="keywordflow">while</span>(curr);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    *root = dataRoot;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;}</div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_s</a></div><div class="ttdoc">Defines an XML element in a XML tree. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00082">mergefis.c:82</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a8e2de9486b598fc7d78e76f1a2cecbdc"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">XML_ATTR_t::value</a></div><div class="ttdeci">char * value</div><div class="ttdoc">Value of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00078">mergefis.c:78</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a69d06651f1697c669e5370dedbef886e"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">XML_ELEM_s::numChildren</a></div><div class="ttdeci">unsigned int numChildren</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00087">mergefis.c:87</a></div></div>
<div class="ttc" id="struct_x_m_l___h_n_d_l__t_html_a2f2fc644da35f7ce44f75cc69600b90e"><div class="ttname"><a href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">XML_HNDL_t::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">File descriptor of the XML file. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00124">mergefis.h:124</a></div></div>
<div class="ttc" id="types_8h_html_a050c65e107f0c828f856a231f4b4e788"><div class="ttname"><a href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a></div><div class="ttdeci">int BOOL</div><div class="ttdoc">Boolean type. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00073">types.h:73</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a521f3fc4c8625bfaab8ec87380017b34"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">XML_ELEM_s::numAttr</a></div><div class="ttdeci">unsigned int numAttr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00091">mergefis.c:91</a></div></div>
<div class="ttc" id="types_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdoc">Boolean FALSE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00075">types.h:75</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a222a2f158ef04cfafe9db4f5b4f73b48"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">XML_ATTR_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00077">mergefis.c:77</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a6b29c3858dc75de22e5837df322d3d50"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">XML_ELEM_s::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the element. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00084">mergefis.c:84</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html">XML_ATTR_t</a></div><div class="ttdoc">An XML Attribute can be defined by this structure. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00075">mergefis.c:75</a></div></div>
<div class="ttc" id="struct_x_m_l___h_n_d_l__t_html_a62719fabbe741537ad07b5f970b7de13"><div class="ttname"><a href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">XML_HNDL_t::state</a></div><div class="ttdeci">yxml_t state</div><div class="ttdoc">State of the parser. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00125">mergefis.h:125</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a097a64a814dddae61d973a53020df6fa"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">XML_ELEM_s::children</a></div><div class="ttdeci">struct XML_ELEM_s * children</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00089">mergefis.c:89</a></div></div>
<div class="ttc" id="mergefis_8c_html_aad04e20575af146df6c0fdc5fd951d29"><div class="ttname"><a href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a></div><div class="ttdeci">static void freeXmlTree(XML_ELEM_t *data)</div><div class="ttdoc">Free all contents in all elements of the XML tree to which data belongs. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00178">mergefis.c:178</a></div></div>
<div class="ttc" id="types_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdoc">Boolean TRUE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00076">types.h:76</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_af40695ac732eb4121664f7b07c987cb5"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">XML_ELEM_s::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00095">mergefis.c:95</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a4d4b373ae81784f21c81678dbf558c78"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">XML_ELEM_s::attr</a></div><div class="ttdeci">XML_ATTR_t * attr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00093">mergefis.c:93</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a50d64c4258b8007a5b9b1ca95b1771be"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">XML_ELEM_s::parent</a></div><div class="ttdeci">struct XML_ELEM_s * parent</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00085">mergefis.c:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6f8c5741f4180fad08358713ff357137"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> CheckUbxChecksumU4 </td>
          <td>(</td>
          <td class="paramtype">const unsigned int *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00507">507</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00490">GetUbxChecksumU4()</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l00536">UpdateImageCrc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;{</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc_a = 0;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc_b = 0;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="mergefis_8c.html#a91a28dc5f311e9026d7ed1a6a96bae1a">GetUbxChecksumU4</a>(&amp;crc_a, &amp;crc_b, pData, length);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    pData += (length/4);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">return</span> (crc_a == *pData &amp;&amp; crc_b == *(pData+1));</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div>
<div class="ttc" id="mergefis_8c_html_a91a28dc5f311e9026d7ed1a6a96bae1a"><div class="ttname"><a href="mergefis_8c.html#a91a28dc5f311e9026d7ed1a6a96bae1a">GetUbxChecksumU4</a></div><div class="ttdeci">static void GetUbxChecksumU4(unsigned int *pCrc_a, unsigned int *pCrc_b, const unsigned int *pData, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00490">mergefis.c:490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3ac22472913610e5273754d13056259"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void edit_table2 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> const *&#160;</td>
          <td class="paramname"><em>container</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Edit the leading table of the FIS version 2. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fis</td><td>Pointer to the FIS image </td></tr>
    <tr><td class="paramname">container</td><td>The device itself or the containing category </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l01005">1005</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8h_source.html#l00044">CAPABILITY_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00049">CFG_POSITION</a>, <a class="el" href="mergefis_8c_source.html#l00089">XML_ELEM_s::children</a>, <a class="el" href="mergefis_8h_source.html#l00052">DEEP_SLEEP_OPCODE_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00053">DEEP_SLEEP_WAKEUP_OPCODE_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00054">DEEP_SLEEP_WAKEUP_TIMEOUT_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00039">DRV_SQI_CAP_DEEP_SLEEP</a>, <a class="el" href="mergefis_8h_source.html#l00038">DRV_SQI_CAP_FAST_PROGRAM</a>, <a class="el" href="mergefis_8h_source.html#l00041">DRV_SQI_CAP_MAX_SPEED</a>, <a class="el" href="mergefis_8h_source.html#l00037">DRV_SQI_CAP_WRITE_SUSPEND</a>, <a class="el" href="mergefis_8c_source.html#l00269">getAttrValue()</a>, <a class="el" href="mergefis_8c_source.html#l00296">getElemValue()</a>, <a class="el" href="mergefis_8h_source.html#l00048">HSP_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00056">MAX_SPEED_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00050">MIN_ERASE_SUSPEND_POSITION</a>, <a class="el" href="mergefis_8c_source.html#l00084">XML_ELEM_s::name</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="mergefis_8h_source.html#l00051">NUM_BYTES_WRITE_POSITION</a>, <a class="el" href="mergefis_8c_source.html#l00087">XML_ELEM_s::numChildren</a>, <a class="el" href="mergefis_8h_source.html#l00047">SECTOR_COUNT_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00046">SECTOR_SIZE_POSITION</a>, <a class="el" href="mergefis_8c_source.html#l00949">stringToU4()</a>, and <a class="el" href="mergefis_8h_source.html#l00045">SUPPLY_TYPE_POSITION</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01192">mergefis_load2()</a>.</p>
<div class="fragment"><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    assert(fis &amp;&amp; container);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordtype">char</span> <span class="keyword">const</span> *supply = <a class="code" href="mergefis_8c.html#aa5b7c0866ace096ac0d50601a52f3d21">getAttrValue</a>(<span class="stringliteral">&quot;supply&quot;</span>, container);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordtype">char</span> *secSize = (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;sectorSize&quot;</span>, container);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordtype">char</span> *secCount = (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;sectorCount&quot;</span>, container);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *cap=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; container-&gt;numChildren; ++i)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordflow">if</span>(!strcmp(container-&gt;children[i].name, <span class="stringliteral">&quot;cap&quot;</span>))</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            cap = &amp;container-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i];</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordtype">char</span> *hsp = (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;hsp&quot;</span>, container);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordtype">char</span> *cfg = (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;cfg&quot;</span>, container);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordtype">char</span> *minEraseSuspend = (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;minEraseSuspend&quot;</span>, container);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordtype">char</span> *numBytesWrite = (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;numBytesWrite&quot;</span>, container);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordtype">char</span> *deepSleepOpcode = (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;deepSleepOpcode&quot;</span>, container);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordtype">char</span> *deepSleepWakeupOpcode = (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;deepSleepWakeupOpcode&quot;</span>, container);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordtype">char</span> *deepSleepWakeupTimeout = (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;deepSleepWakeupTimeout&quot;</span>, container);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordtype">char</span> *maxSpeed= (<span class="keywordtype">char</span>*)<a class="code" href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a>(<span class="stringliteral">&quot;maxSpeed&quot;</span>, container);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (supply != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keywordtype">char</span> s = (strncmp(supply, <span class="stringliteral">&quot;1.8V&quot;</span>, 4) == 0) ? 1 : 0;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a8bbd7a680082119224ea5692d19f2746">SUPPLY_TYPE_POSITION</a>] = (fis[<a class="code" href="mergefis_8h.html#a8bbd7a680082119224ea5692d19f2746">SUPPLY_TYPE_POSITION</a>] &amp; 0xFE) | (s &amp; 0x1);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    }</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">if</span> (secSize != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> sSize = 0;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(secSize, &amp;sSize);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a> + 0] = (char) ((sSize &gt;&gt;  0) &amp; 0xFF);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a> + 1] = (char) ((sSize &gt;&gt;  8) &amp; 0xFF);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a> + 2] = (char) ((sSize &gt;&gt; 16) &amp; 0xFF);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a> + 3] = (char) ((sSize &gt;&gt; 24) &amp; 0xFF);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">if</span> (secCount != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> sCount = 0;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(secCount, &amp;sCount);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        fis[<a class="code" href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a> + 0] = (char) ((sCount &gt;&gt;  0) &amp; 0xFF);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        fis[<a class="code" href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a> + 1] = (char) ((sCount &gt;&gt;  8) &amp; 0xFF);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        fis[<a class="code" href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a> + 2] = (char) ((sCount &gt;&gt; 16) &amp; 0xFF);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        fis[<a class="code" href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a> + 3] = (char) ((sCount &gt;&gt; 24) &amp; 0xFF);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">if</span> (cap != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *writeSuspend = <a class="code" href="mergefis_8c.html#aa5b7c0866ace096ac0d50601a52f3d21">getAttrValue</a>(<span class="stringliteral">&quot;writeSuspend&quot;</span>, cap);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *fastProgram = <a class="code" href="mergefis_8c.html#aa5b7c0866ace096ac0d50601a52f3d21">getAttrValue</a>(<span class="stringliteral">&quot;fastProgram&quot;</span>, cap);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *deepSleep = <a class="code" href="mergefis_8c.html#aa5b7c0866ace096ac0d50601a52f3d21">getAttrValue</a>(<span class="stringliteral">&quot;deepSleep&quot;</span>, cap);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *capMaxSpeed = <a class="code" href="mergefis_8c.html#aa5b7c0866ace096ac0d50601a52f3d21">getAttrValue</a>(<span class="stringliteral">&quot;speed&quot;</span>, cap);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> fisValue = fis[<a class="code" href="mergefis_8h.html#a372f7bf0c3156b0727bd5e62a025d4fc">CAPABILITY_POSITION</a>];</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">if</span> (writeSuspend != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> wS = (atoi(writeSuspend) == 1) ? <a class="code" href="mergefis_8h.html#a6e0e064e8577a5e05115ce681f5c1ad0">DRV_SQI_CAP_WRITE_SUSPEND</a> : 0;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            fisValue = (fisValue &amp; ~<a class="code" href="mergefis_8h.html#a6e0e064e8577a5e05115ce681f5c1ad0">DRV_SQI_CAP_WRITE_SUSPEND</a>) | wS;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="keywordflow">if</span> (fastProgram != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> fP = (atoi(fastProgram) == 1) ? <a class="code" href="mergefis_8h.html#ac2f3657931fa837ec80f73577d0c5cc2">DRV_SQI_CAP_FAST_PROGRAM</a> : 0;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            fisValue = (fisValue &amp; ~<a class="code" href="mergefis_8h.html#ac2f3657931fa837ec80f73577d0c5cc2">DRV_SQI_CAP_FAST_PROGRAM</a>) | fP;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">if</span> (deepSleep != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dS = (atoi(deepSleep) == 1) ? <a class="code" href="mergefis_8h.html#a135fc1aee8d2c6f8e458fbdc701e1b69">DRV_SQI_CAP_DEEP_SLEEP</a> : 0;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            fisValue = (fisValue &amp; ~<a class="code" href="mergefis_8h.html#a135fc1aee8d2c6f8e458fbdc701e1b69">DRV_SQI_CAP_DEEP_SLEEP</a>) | dS;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        }</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">if</span> (capMaxSpeed != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dS = (atoi(capMaxSpeed) == 1) ? <a class="code" href="mergefis_8h.html#a04ac33e442b56cb833fc529c693058f1">DRV_SQI_CAP_MAX_SPEED</a> : 0;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            fisValue = (fisValue &amp; ~<a class="code" href="mergefis_8h.html#a04ac33e442b56cb833fc529c693058f1">DRV_SQI_CAP_MAX_SPEED</a>) | dS;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a372f7bf0c3156b0727bd5e62a025d4fc">CAPABILITY_POSITION</a>] = fisValue;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">if</span> (hsp != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> HSP = 0;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(hsp, &amp;HSP);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        fis[<a class="code" href="mergefis_8h.html#aa3f6ee9e4c663e501629449be5bdc00c">HSP_POSITION</a> + 0] = (char) ((HSP &gt;&gt;  0) &amp; 0xFF);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        fis[<a class="code" href="mergefis_8h.html#aa3f6ee9e4c663e501629449be5bdc00c">HSP_POSITION</a> + 1] = (char) ((HSP &gt;&gt;  8) &amp; 0xFF);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        fis[<a class="code" href="mergefis_8h.html#aa3f6ee9e4c663e501629449be5bdc00c">HSP_POSITION</a> + 2] = (char) ((HSP &gt;&gt; 16) &amp; 0xFF);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        fis[<a class="code" href="mergefis_8h.html#aa3f6ee9e4c663e501629449be5bdc00c">HSP_POSITION</a> + 3] = (char) ((HSP &gt;&gt; 24) &amp; 0xFF);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">if</span> (cfg != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> CFG = 0;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(cfg, &amp;CFG);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a49028bd54de105a7404fc59605014e34">CFG_POSITION</a> + 0] = (char) ((CFG &gt;&gt;  0) &amp; 0xFF);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a49028bd54de105a7404fc59605014e34">CFG_POSITION</a> + 1] = (char) ((CFG &gt;&gt;  8) &amp; 0xFF);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a49028bd54de105a7404fc59605014e34">CFG_POSITION</a> + 2] = (char) ((CFG &gt;&gt; 16) &amp; 0xFF);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a49028bd54de105a7404fc59605014e34">CFG_POSITION</a> + 3] = (char) ((CFG &gt;&gt; 24) &amp; 0xFF);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    }</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span> (minEraseSuspend != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> mES = 0;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(minEraseSuspend, &amp;mES);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a184a3e3ec1619a3907df37a045835718">MIN_ERASE_SUSPEND_POSITION</a> + 0] = (char) ((mES &gt;&gt;  0) &amp; 0xFF);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a184a3e3ec1619a3907df37a045835718">MIN_ERASE_SUSPEND_POSITION</a> + 1] = (char) ((mES &gt;&gt;  8) &amp; 0xFF);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a184a3e3ec1619a3907df37a045835718">MIN_ERASE_SUSPEND_POSITION</a> + 2] = (char) ((mES &gt;&gt; 16) &amp; 0xFF);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a184a3e3ec1619a3907df37a045835718">MIN_ERASE_SUSPEND_POSITION</a> + 3] = (char) ((mES &gt;&gt; 24) &amp; 0xFF);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    }</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">if</span> (numBytesWrite != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> nBW = 0;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(numBytesWrite, &amp;nBW);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a1e9dfd0cc89f37af2e454d13944255da">NUM_BYTES_WRITE_POSITION</a> + 0] = (char) ((nBW &gt;&gt;  0) &amp; 0xFF);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a1e9dfd0cc89f37af2e454d13944255da">NUM_BYTES_WRITE_POSITION</a> + 1] = (char) ((nBW &gt;&gt;  8) &amp; 0xFF);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a1e9dfd0cc89f37af2e454d13944255da">NUM_BYTES_WRITE_POSITION</a> + 2] = (char) ((nBW &gt;&gt; 16) &amp; 0xFF);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a1e9dfd0cc89f37af2e454d13944255da">NUM_BYTES_WRITE_POSITION</a> + 3] = (char) ((nBW &gt;&gt; 24) &amp; 0xFF);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordflow">if</span> (deepSleepOpcode != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> deepSleepOp = 0;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(deepSleepOpcode, &amp;deepSleepOp);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a6d2b8edc1c98cbf5146937be937ec9a0">DEEP_SLEEP_OPCODE_POSITION</a>] = (char) (deepSleepOp &amp; 0xFF);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    }</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">if</span> (deepSleepWakeupOpcode != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> deepSleepWakeOp = 0;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(deepSleepWakeupOpcode, &amp;deepSleepWakeOp);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a8e0dff44190b78fbb08ce8b6af6fb661">DEEP_SLEEP_WAKEUP_OPCODE_POSITION</a>] = (char) (deepSleepWakeOp &amp; 0xFF);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">if</span> (deepSleepWakeupTimeout != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> deepSleepWakeTime = 0;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(deepSleepWakeupTimeout, &amp;deepSleepWakeTime);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        fis[<a class="code" href="mergefis_8h.html#ac0bd0a87245719268992b6c9929814ec">DEEP_SLEEP_WAKEUP_TIMEOUT_POSITION</a>] = (char) (deepSleepWakeTime &amp; 0xFF);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">if</span> (maxSpeed != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> maxSpeedInt = 0;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(maxSpeed, &amp;maxSpeedInt);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        fis[<a class="code" href="mergefis_8h.html#a12fe99a8c20b80aeae7ca5696364e743">MAX_SPEED_POSITION</a>] = (char) (maxSpeedInt &amp; 0xFF);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;}</div>
<div class="ttc" id="mergefis_8h_html_a372f7bf0c3156b0727bd5e62a025d4fc"><div class="ttname"><a href="mergefis_8h.html#a372f7bf0c3156b0727bd5e62a025d4fc">CAPABILITY_POSITION</a></div><div class="ttdeci">#define CAPABILITY_POSITION</div><div class="ttdoc">Position of the capability in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00044">mergefis.h:44</a></div></div>
<div class="ttc" id="mergefis_8c_html_ace83f4edb658c233b298cf37fd439e36"><div class="ttname"><a href="mergefis_8c.html#ace83f4edb658c233b298cf37fd439e36">getElemValue</a></div><div class="ttdeci">static char const * getElemValue(char const *elemName, XML_ELEM_t const *elem)</div><div class="ttdoc">Find the value of the child-element with the specified name. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00296">mergefis.c:296</a></div></div>
<div class="ttc" id="mergefis_8h_html_a135fc1aee8d2c6f8e458fbdc701e1b69"><div class="ttname"><a href="mergefis_8h.html#a135fc1aee8d2c6f8e458fbdc701e1b69">DRV_SQI_CAP_DEEP_SLEEP</a></div><div class="ttdeci">#define DRV_SQI_CAP_DEEP_SLEEP</div><div class="ttdoc">Deep sleep command available. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00039">mergefis.h:39</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_s</a></div><div class="ttdoc">Defines an XML element in a XML tree. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00082">mergefis.c:82</a></div></div>
<div class="ttc" id="mergefis_8h_html_a6d2b8edc1c98cbf5146937be937ec9a0"><div class="ttname"><a href="mergefis_8h.html#a6d2b8edc1c98cbf5146937be937ec9a0">DEEP_SLEEP_OPCODE_POSITION</a></div><div class="ttdeci">#define DEEP_SLEEP_OPCODE_POSITION</div><div class="ttdoc">Position of the deep sleep opcode in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00052">mergefis.h:52</a></div></div>
<div class="ttc" id="mergefis_8h_html_aa3f6ee9e4c663e501629449be5bdc00c"><div class="ttname"><a href="mergefis_8h.html#aa3f6ee9e4c663e501629449be5bdc00c">HSP_POSITION</a></div><div class="ttdeci">#define HSP_POSITION</div><div class="ttdoc">Position of the HSP in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00048">mergefis.h:48</a></div></div>
<div class="ttc" id="mergefis_8h_html_a8bbd7a680082119224ea5692d19f2746"><div class="ttname"><a href="mergefis_8h.html#a8bbd7a680082119224ea5692d19f2746">SUPPLY_TYPE_POSITION</a></div><div class="ttdeci">#define SUPPLY_TYPE_POSITION</div><div class="ttdoc">Position of the supply type in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00045">mergefis.h:45</a></div></div>
<div class="ttc" id="mergefis_8h_html_a6e0e064e8577a5e05115ce681f5c1ad0"><div class="ttname"><a href="mergefis_8h.html#a6e0e064e8577a5e05115ce681f5c1ad0">DRV_SQI_CAP_WRITE_SUSPEND</a></div><div class="ttdeci">#define DRV_SQI_CAP_WRITE_SUSPEND</div><div class="ttdoc">Program/Erase suspend command available. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00037">mergefis.h:37</a></div></div>
<div class="ttc" id="types_8h_html_a05882823395fd219ae0b65679baa29c4"><div class="ttname"><a href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a></div><div class="ttdeci">unsigned __int32 U4</div><div class="ttdoc">32-bit unsigned integer number </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00054">types.h:54</a></div></div>
<div class="ttc" id="mergefis_8h_html_a49028bd54de105a7404fc59605014e34"><div class="ttname"><a href="mergefis_8h.html#a49028bd54de105a7404fc59605014e34">CFG_POSITION</a></div><div class="ttdeci">#define CFG_POSITION</div><div class="ttdoc">Position of the CFG in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00049">mergefis.h:49</a></div></div>
<div class="ttc" id="mergefis_8h_html_ac0bd0a87245719268992b6c9929814ec"><div class="ttname"><a href="mergefis_8h.html#ac0bd0a87245719268992b6c9929814ec">DEEP_SLEEP_WAKEUP_TIMEOUT_POSITION</a></div><div class="ttdeci">#define DEEP_SLEEP_WAKEUP_TIMEOUT_POSITION</div><div class="ttdoc">Position of the deep sleep wakeup timeout in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00054">mergefis.h:54</a></div></div>
<div class="ttc" id="mergefis_8h_html_a8e0dff44190b78fbb08ce8b6af6fb661"><div class="ttname"><a href="mergefis_8h.html#a8e0dff44190b78fbb08ce8b6af6fb661">DEEP_SLEEP_WAKEUP_OPCODE_POSITION</a></div><div class="ttdeci">#define DEEP_SLEEP_WAKEUP_OPCODE_POSITION</div><div class="ttdoc">Position of the deep sleep wakeup opcode in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00053">mergefis.h:53</a></div></div>
<div class="ttc" id="mergefis_8c_html_aa5b7c0866ace096ac0d50601a52f3d21"><div class="ttname"><a href="mergefis_8c.html#aa5b7c0866ace096ac0d50601a52f3d21">getAttrValue</a></div><div class="ttdeci">static char const * getAttrValue(char const *attrName, XML_ELEM_t const *elem)</div><div class="ttdoc">Find the attribute value with the specified name in the provided element. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00269">mergefis.c:269</a></div></div>
<div class="ttc" id="mergefis_8h_html_aaa43e3d506c512bf68244321bc6e40f7"><div class="ttname"><a href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a></div><div class="ttdeci">#define SECTOR_COUNT_POSITION</div><div class="ttdoc">Position of the sector count in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00047">mergefis.h:47</a></div></div>
<div class="ttc" id="mergefis_8c_html_a0b3e69a365a37dcaf3d0f392b65a2cc9"><div class="ttname"><a href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a></div><div class="ttdeci">static BOOL stringToU4(char *string, U4 *res)</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00949">mergefis.c:949</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a097a64a814dddae61d973a53020df6fa"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">XML_ELEM_s::children</a></div><div class="ttdeci">struct XML_ELEM_s * children</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00089">mergefis.c:89</a></div></div>
<div class="ttc" id="mergefis_8h_html_a184a3e3ec1619a3907df37a045835718"><div class="ttname"><a href="mergefis_8h.html#a184a3e3ec1619a3907df37a045835718">MIN_ERASE_SUSPEND_POSITION</a></div><div class="ttdeci">#define MIN_ERASE_SUSPEND_POSITION</div><div class="ttdoc">Position of the minimum erase suspend in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00050">mergefis.h:50</a></div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
<div class="ttc" id="mergefis_8h_html_a5f21bffb775f3e2b9a0b7d314812a2d1"><div class="ttname"><a href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a></div><div class="ttdeci">#define SECTOR_SIZE_POSITION</div><div class="ttdoc">Position of the sector size in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00046">mergefis.h:46</a></div></div>
<div class="ttc" id="mergefis_8h_html_ac2f3657931fa837ec80f73577d0c5cc2"><div class="ttname"><a href="mergefis_8h.html#ac2f3657931fa837ec80f73577d0c5cc2">DRV_SQI_CAP_FAST_PROGRAM</a></div><div class="ttdeci">#define DRV_SQI_CAP_FAST_PROGRAM</div><div class="ttdoc">Sub-page program command available. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00038">mergefis.h:38</a></div></div>
<div class="ttc" id="mergefis_8h_html_a04ac33e442b56cb833fc529c693058f1"><div class="ttname"><a href="mergefis_8h.html#a04ac33e442b56cb833fc529c693058f1">DRV_SQI_CAP_MAX_SPEED</a></div><div class="ttdeci">#define DRV_SQI_CAP_MAX_SPEED</div><div class="ttdoc">The FIS contains a revision. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00041">mergefis.h:41</a></div></div>
<div class="ttc" id="mergefis_8h_html_a1e9dfd0cc89f37af2e454d13944255da"><div class="ttname"><a href="mergefis_8h.html#a1e9dfd0cc89f37af2e454d13944255da">NUM_BYTES_WRITE_POSITION</a></div><div class="ttdeci">#define NUM_BYTES_WRITE_POSITION</div><div class="ttdoc">Position of the number of bytes. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00051">mergefis.h:51</a></div></div>
<div class="ttc" id="mergefis_8h_html_a12fe99a8c20b80aeae7ca5696364e743"><div class="ttname"><a href="mergefis_8h.html#a12fe99a8c20b80aeae7ca5696364e743">MAX_SPEED_POSITION</a></div><div class="ttdeci">#define MAX_SPEED_POSITION</div><div class="ttdoc">Position of the maximum speed in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00056">mergefis.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af07293846255bf6c4b9179653d78dd20"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a>* findCmdSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *&#160;</td>
          <td class="paramname"><em>xmlData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a> const *&#160;</td>
          <td class="paramname"><em>allowedEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>numEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>cmdsetName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the device with the JEDEC given. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xmlData</td><td>XML data access descriptor </td></tr>
    <tr><td class="paramname">allowedEntries</td><td>Allowed XML setup </td></tr>
    <tr><td class="paramname">numEntries</td><td>Number of elements in allowedEntries </td></tr>
    <tr><td class="paramname">cmdsetName</td><td>Find the command set with the right name attribute </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The node of the device or NULL if not found </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00916">916</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00093">XML_ELEM_s::attr</a>, <a class="el" href="mergefis_8c_source.html#l00571">buildXmlTree()</a>, <a class="el" href="mergefis_8c_source.html#l00178">freeXmlTree()</a>, <a class="el" href="mergefis_8c_source.html#l00077">XML_ATTR_t::name</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="mergefis_8c_source.html#l00091">XML_ELEM_s::numAttr</a>, and <a class="el" href="mergefis_8c_source.html#l00078">XML_ATTR_t::value</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01192">mergefis_load2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;{</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">if</span>(!xmlData || !allowedEntries || !numEntries || !cmdsetName)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="comment">// Read categories until correct JEDEC attribute found or</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="comment">// no more categories available</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *cmdsettree=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *result=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="mergefis_8c.html#aafa42f0bbb1a73dde1766027aace50d5">buildXmlTree</a>(xmlData, allowedEntries, numEntries, &amp;cmdsettree))</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        assert(cmdsettree);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">// Iterate through all attributes and look for the name category</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; cmdsettree-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>; ++i)</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <span class="keywordflow">if</span>( !strcmp(cmdsettree-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[i].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">name</a>, <span class="stringliteral">&quot;name&quot;</span>)</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;             &amp;&amp; !strcmp(cmdsettree-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[i].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">value</a>, cmdsetName) )</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                    result=cmdsettree;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="keywordflow">if</span>(!result)</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(cmdsettree);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    } <span class="keywordflow">while</span>(!result);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;}</div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_s</a></div><div class="ttdoc">Defines an XML element in a XML tree. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00082">mergefis.c:82</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a8e2de9486b598fc7d78e76f1a2cecbdc"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">XML_ATTR_t::value</a></div><div class="ttdeci">char * value</div><div class="ttdoc">Value of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00078">mergefis.c:78</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a521f3fc4c8625bfaab8ec87380017b34"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">XML_ELEM_s::numAttr</a></div><div class="ttdeci">unsigned int numAttr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00091">mergefis.c:91</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a222a2f158ef04cfafe9db4f5b4f73b48"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">XML_ATTR_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00077">mergefis.c:77</a></div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
<div class="ttc" id="mergefis_8c_html_aad04e20575af146df6c0fdc5fd951d29"><div class="ttname"><a href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a></div><div class="ttdeci">static void freeXmlTree(XML_ELEM_t *data)</div><div class="ttdoc">Free all contents in all elements of the XML tree to which data belongs. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00178">mergefis.c:178</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a4d4b373ae81784f21c81678dbf558c78"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">XML_ELEM_s::attr</a></div><div class="ttdeci">XML_ATTR_t * attr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00093">mergefis.c:93</a></div></div>
<div class="ttc" id="mergefis_8c_html_aafa42f0bbb1a73dde1766027aace50d5"><div class="ttname"><a href="mergefis_8c.html#aafa42f0bbb1a73dde1766027aace50d5">buildXmlTree</a></div><div class="ttdeci">BOOL buildXmlTree(XML_HNDL_t *xmlData, XML_RULE_t const *allowedEntries, unsigned int numAllowedEntries, XML_ELEM_t **root)</div><div class="ttdoc">Parse the provided XML file and extract a tree according to the rules. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00571">mergefis.c:571</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b0120e85854eff2a42197f70aa76745"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a>* findDevice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *&#160;</td>
          <td class="paramname"><em>xmlData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a> const *&#160;</td>
          <td class="paramname"><em>allowedEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>numEntries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>jedec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the device with the JEDEC given. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xmlData</td><td>XML data access descriptor </td></tr>
    <tr><td class="paramname">allowedEntries</td><td>Allowed XML setup </td></tr>
    <tr><td class="paramname">numEntries</td><td>Number of elements in allowedEntries </td></tr>
    <tr><td class="paramname">jedec</td><td>JEDEC of the device </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The node of the device or NULL if not found </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00863">863</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00571">buildXmlTree()</a>, <a class="el" href="mergefis_8c_source.html#l00089">XML_ELEM_s::children</a>, <a class="el" href="mergefis_8c_source.html#l00237">findJedec()</a>, <a class="el" href="mergefis_8c_source.html#l00178">freeXmlTree()</a>, <a class="el" href="mergefis_8c_source.html#l00084">XML_ELEM_s::name</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, and <a class="el" href="mergefis_8c_source.html#l00087">XML_ELEM_s::numChildren</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01192">mergefis_load2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;{</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">if</span>(!xmlData || !allowedEntries || !numEntries)</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">// Read categories until correct JEDEC attribute found or</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment">// no more categories available</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *rootElem=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *dev=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="mergefis_8c.html#aafa42f0bbb1a73dde1766027aace50d5">buildXmlTree</a>(xmlData, allowedEntries, numEntries, &amp;rootElem))</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        assert(rootElem);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="comment">// Check if the root element is already the child</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">if</span>(!strcmp(rootElem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>, <span class="stringliteral">&quot;device&quot;</span>))</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="mergefis_8c.html#ab83434bd23d8bfbeaa23f145ca57224f">findJedec</a>(rootElem, jedec))</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                dev = rootElem;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            <span class="comment">// Iterate through all &#39;device&#39;-children in rootElem</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            <span class="keywordflow">for</span>(i = 0; i &lt; rootElem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">numChildren</a> &amp;&amp; !dev; ++i)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                <span class="keywordflow">if</span>(!strcmp(rootElem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i].<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>, <span class="stringliteral">&quot;device&quot;</span>))</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="mergefis_8c.html#ab83434bd23d8bfbeaa23f145ca57224f">findJedec</a>(&amp;rootElem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i], jedec))</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                        dev = &amp;rootElem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i];</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">if</span>(!dev)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(rootElem);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    } <span class="keywordflow">while</span>(!dev);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">return</span> dev;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_s</a></div><div class="ttdoc">Defines an XML element in a XML tree. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00082">mergefis.c:82</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a69d06651f1697c669e5370dedbef886e"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">XML_ELEM_s::numChildren</a></div><div class="ttdeci">unsigned int numChildren</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00087">mergefis.c:87</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a6b29c3858dc75de22e5837df322d3d50"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">XML_ELEM_s::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the element. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00084">mergefis.c:84</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a097a64a814dddae61d973a53020df6fa"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">XML_ELEM_s::children</a></div><div class="ttdeci">struct XML_ELEM_s * children</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00089">mergefis.c:89</a></div></div>
<div class="ttc" id="mergefis_8c_html_ab83434bd23d8bfbeaa23f145ca57224f"><div class="ttname"><a href="mergefis_8c.html#ab83434bd23d8bfbeaa23f145ca57224f">findJedec</a></div><div class="ttdeci">static XML_ATTR_t * findJedec(XML_ELEM_t *elem, unsigned int const jedec)</div><div class="ttdoc">Find the JEDEC attribute and compare it to the integer argument. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00237">mergefis.c:237</a></div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
<div class="ttc" id="mergefis_8c_html_aad04e20575af146df6c0fdc5fd951d29"><div class="ttname"><a href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a></div><div class="ttdeci">static void freeXmlTree(XML_ELEM_t *data)</div><div class="ttdoc">Free all contents in all elements of the XML tree to which data belongs. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00178">mergefis.c:178</a></div></div>
<div class="ttc" id="mergefis_8c_html_aafa42f0bbb1a73dde1766027aace50d5"><div class="ttname"><a href="mergefis_8c.html#aafa42f0bbb1a73dde1766027aace50d5">buildXmlTree</a></div><div class="ttdeci">BOOL buildXmlTree(XML_HNDL_t *xmlData, XML_RULE_t const *allowedEntries, unsigned int numAllowedEntries, XML_ELEM_t **root)</div><div class="ttdoc">Parse the provided XML file and extract a tree according to the rules. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00571">mergefis.c:571</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab83434bd23d8bfbeaa23f145ca57224f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="struct_x_m_l___a_t_t_r__t.html">XML_ATTR_t</a>* findJedec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> *&#160;</td>
          <td class="paramname"><em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int const&#160;</td>
          <td class="paramname"><em>jedec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the JEDEC attribute and compare it to the integer argument. </p>
<p>Find the JEDEC attribute in the passed element and compare it to the integer JEDEC passed as argument.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elem</td><td>: Element in which the JEDEC attribute is searched for. </td></tr>
    <tr><td class="paramname">jedec</td><td>: The JEDEC value to which the attribute must be compared if found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success a pointer to the JEDEC attribute, otherwise NULL. </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00237">237</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00093">XML_ELEM_s::attr</a>, <a class="el" href="mergefis_8c_source.html#l00077">XML_ATTR_t::name</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="mergefis_8c_source.html#l00091">XML_ELEM_s::numAttr</a>, and <a class="el" href="mergefis_8c_source.html#l00078">XML_ATTR_t::value</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l00863">findDevice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// Check if this device child has the right JEDEC attribute</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="struct_x_m_l___a_t_t_r__t.html">XML_ATTR_t</a> * result = <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">for</span>(j = 0; j &lt; elem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>; ++j)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span>(!strcmp(elem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[j].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">name</a>, <span class="stringliteral">&quot;jedec&quot;</span>))</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="comment">// Replace starting &#39;x&#39; if existing</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span>(elem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[j].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">value</a>[0] == <span class="charliteral">&#39;x&#39;</span>)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                elem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[j].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">value</a>[0] = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="comment">// Correct JEDEC?</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">if</span>((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) strtol(elem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[j].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">value</a>, <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 16)==jedec)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                result = &amp;elem-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[j];</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a8e2de9486b598fc7d78e76f1a2cecbdc"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">XML_ATTR_t::value</a></div><div class="ttdeci">char * value</div><div class="ttdoc">Value of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00078">mergefis.c:78</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a521f3fc4c8625bfaab8ec87380017b34"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">XML_ELEM_s::numAttr</a></div><div class="ttdeci">unsigned int numAttr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00091">mergefis.c:91</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a222a2f158ef04cfafe9db4f5b4f73b48"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">XML_ATTR_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00077">mergefis.c:77</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html">XML_ATTR_t</a></div><div class="ttdoc">An XML Attribute can be defined by this structure. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00075">mergefis.c:75</a></div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a4d4b373ae81784f21c81678dbf558c78"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">XML_ELEM_s::attr</a></div><div class="ttdeci">XML_ATTR_t * attr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00093">mergefis.c:93</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8a1140bc8dba273c6decd249f4ca42b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static long long findNextInXml </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *&#160;</td>
          <td class="paramname"><em>xmlData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the next value for the passed element or attribute name in an XML file. </p>
<p>If only a tag is passed to this function it will search for the content of the next tag element of this name. If additionally an attribute is specified, the value of the the next attribute of that name in the next tag of the specified name is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xmlData</td><td>: Reference to the XML tree (Must not be NULL) </td></tr>
    <tr><td class="paramname">tag</td><td>: The tag name (Must no be NULL) </td></tr>
    <tr><td class="paramname">attr</td><td>: Attribute name (May be NULL) </td></tr>
    <tr><td class="paramname">result</td><td>: Found string. (Must not be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on failure. 0 if not found. Otherwise the length of the zero terminated string in result </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00366">366</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="types_8h_source.html#l00075">FALSE</a>, <a class="el" href="mergefis_8h_source.html#l00124">XML_HNDL_t::fd</a>, <a class="el" href="mergefis_8c_source.html#l00329">isElementOrAttr()</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="mergefis_8h_source.html#l00125">XML_HNDL_t::state</a>, and <a class="el" href="types_8h_source.html#l00076">TRUE</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01407">mergefis_load()</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;{</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span>(!xmlData || !tag || !result)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">size_t</span> blockSize=128;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordtype">char</span> *data=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordtype">size_t</span> allocMemory=0;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> endLoop=<a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// Read and parse the remaining parts of the XML</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// to make sure it is not malformed</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="comment">// Every read error is handled as unexpected EOF</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordtype">char</span> byte;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordtype">int</span> rd=read(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">fd</a>, &amp;byte, <span class="keyword">sizeof</span>(byte));</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">if</span>( rd == <span class="keyword">sizeof</span>(byte))</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            yxml_ret_t ret=yxml_parse(&amp;xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>, byte);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="comment">// Has an error occurred?</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">if</span>(ret&lt;YXML_OK)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                free(data);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="comment">// Check if memory has been allocated. If yes</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="comment">// we are already in the right location to copy</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="comment">// the content data to this destination. Otherwise</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="comment">// check if the current byte has changed our location</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="comment">// to the intended value-field</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="keywordflow">if</span>(!data)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                <span class="comment">// Is this the content of the element</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <span class="comment">// or attribute searched for?</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordflow">if</span>( ((!attr &amp;&amp; ret==YXML_CONTENT) || ( attr &amp;&amp; ret==YXML_ATTRVAL))</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                 &amp;&amp; <a class="code" href="mergefis_8c.html#aee23fc201a79253b9771928f47140c03">isElementOrAttr</a>(xmlData, tag, attr) )</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    <span class="comment">// Element with right tag name has begun</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                    data = malloc(blockSize);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                    <span class="keywordflow">if</span>(!data)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    assert(blockSize &gt;= <span class="keyword">sizeof</span>(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data));</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                    <span class="comment">// Copy the initial content bytes to the destination buffer</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                    <span class="comment">// and take care of the terminating &#39;\0&#39; as well this time,</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    <span class="comment">// so we can ignore it afterwards</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                    allocMemory = blockSize;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    memcpy(data, xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data, strlen(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data) + 1);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordflow">else</span> <span class="comment">// Copy data</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <span class="keywordflow">if</span>(ret!=YXML_CONTENT &amp;&amp; ret!=YXML_ATTRVAL)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                    <span class="comment">// The data copying must be stopped</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    endLoop=<a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    <span class="keywordtype">size_t</span> numNewBytes = strlen(xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data)+1;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    <span class="keywordtype">size_t</span> numBytesStored=strlen(data)+1;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    <span class="comment">// Is it required to enlarge the destination buffer?</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    <span class="comment">// Don&#39;t count both &#39;\0&#39;, one will be deleted (that&#39;s the -1)</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    <span class="keywordflow">if</span>(numNewBytes + numBytesStored - 1 &gt; allocMemory)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                        <span class="keywordflow">do</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                        {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                            allocMemory += blockSize;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                        } <span class="keywordflow">while</span>(numNewBytes + numBytesStored - 1 &gt; allocMemory);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                        <span class="comment">// Get the new memory size which is enough</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                        <span class="comment">// to store all the data</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        <span class="keywordtype">char</span> * tmpData = realloc(data, allocMemory);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                        <span class="keywordflow">if</span>(!tmpData)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                        {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                            free(data);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                        }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                        data=tmpData;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    <span class="comment">// Copy the data by overwriting the previous \0</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    <span class="comment">// termination (that&#39;s the -1) of the string and</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    <span class="comment">// appending</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    <span class="comment">// he remaining data</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    assert(numBytesStored);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                    memcpy(data + numBytesStored - 1, xmlData-&gt;<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>.data, numNewBytes);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rd == 0)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="comment">// File ended, but the caller has to find that out again</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            endLoop=<a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    } <span class="keywordflow">while</span>(!endLoop);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// Return result if something found</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    *result = data;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">size_t</span> resultLen = data ? strlen(data) : 0;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">return</span> resultLen;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="ttc" id="struct_x_m_l___h_n_d_l__t_html_a2f2fc644da35f7ce44f75cc69600b90e"><div class="ttname"><a href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">XML_HNDL_t::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">File descriptor of the XML file. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00124">mergefis.h:124</a></div></div>
<div class="ttc" id="types_8h_html_a050c65e107f0c828f856a231f4b4e788"><div class="ttname"><a href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a></div><div class="ttdeci">int BOOL</div><div class="ttdoc">Boolean type. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00073">types.h:73</a></div></div>
<div class="ttc" id="mergefis_8c_html_aee23fc201a79253b9771928f47140c03"><div class="ttname"><a href="mergefis_8c.html#aee23fc201a79253b9771928f47140c03">isElementOrAttr</a></div><div class="ttdeci">static BOOL isElementOrAttr(XML_HNDL_t const *xmlData, char const *tag, char const *attr)</div><div class="ttdoc">Does the current XML parsing state point to the element or attribute name? </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00329">mergefis.c:329</a></div></div>
<div class="ttc" id="types_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdoc">Boolean FALSE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00075">types.h:75</a></div></div>
<div class="ttc" id="struct_x_m_l___h_n_d_l__t_html_a62719fabbe741537ad07b5f970b7de13"><div class="ttname"><a href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">XML_HNDL_t::state</a></div><div class="ttdeci">yxml_t state</div><div class="ttdoc">State of the parser. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00125">mergefis.h:125</a></div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
<div class="ttc" id="types_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdoc">Boolean TRUE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00076">types.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aad04e20575af146df6c0fdc5fd951d29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void freeXmlTree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free all contents in all elements of the XML tree to which data belongs. </p>
<p>All contents and elements contained in the tree to which data belongs will be freed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>: An element of the tree which has to be freed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00178">178</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00093">XML_ELEM_s::attr</a>, <a class="el" href="mergefis_8c_source.html#l00089">XML_ELEM_s::children</a>, <a class="el" href="mergefis_8c_source.html#l00077">XML_ATTR_t::name</a>, <a class="el" href="mergefis_8c_source.html#l00084">XML_ELEM_s::name</a>, <a class="el" href="mergefis_8c_source.html#l00091">XML_ELEM_s::numAttr</a>, <a class="el" href="mergefis_8c_source.html#l00087">XML_ELEM_s::numChildren</a>, <a class="el" href="mergefis_8c_source.html#l00085">XML_ELEM_s::parent</a>, <a class="el" href="mergefis_8c_source.html#l00078">XML_ATTR_t::value</a>, and <a class="el" href="mergefis_8c_source.html#l00095">XML_ELEM_s::value</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l00571">buildXmlTree()</a>, <a class="el" href="mergefis_8c_source.html#l00916">findCmdSet()</a>, <a class="el" href="mergefis_8c_source.html#l00863">findDevice()</a>, and <a class="el" href="mergefis_8c_source.html#l01192">mergefis_load2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span>(data)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> MAX_DEPTH = 1024;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">// Two options</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">// - If this is the first call to this function, find the root,</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="comment">//   initiate the freeing of all children by calling this function</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="comment">//   again after having set the children parent to their own pointer</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="comment">//   value and clean up the own stuff as well as the data pointer as</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="comment">//   well!</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment">// - If this is a consecutive call to this function,</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">//   (data == data-&gt;parent), initiate the deletion of all children</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">//   clean up the own stuff and return</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="comment">// Find the top element if parent is self,</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="comment">// a parent exists and has reset the parent to</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="comment">// that value</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">for</span>(i=0; i &lt; MAX_DEPTH &amp;&amp; data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a> &amp;&amp; data != data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>; ++i)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            data = data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="comment">// Only the tree is small enough to be cleaned up</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="comment">// by this function</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">if</span>(i &lt; MAX_DEPTH)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">for</span>(i = 0; i &lt; data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">numChildren</a>; ++i)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i].<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a> = &amp;data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i];</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(&amp;data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i]);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordflow">for</span>(i = 0; i &lt; data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>; ++i)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                free(data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[i].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">name</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                free(data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[i].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">value</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            free(data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            free(data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            free(data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            free(data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">value</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="comment">// This is the root element, clean up the own pointer</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span>(!data-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                free(data);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a8e2de9486b598fc7d78e76f1a2cecbdc"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">XML_ATTR_t::value</a></div><div class="ttdeci">char * value</div><div class="ttdoc">Value of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00078">mergefis.c:78</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a69d06651f1697c669e5370dedbef886e"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">XML_ELEM_s::numChildren</a></div><div class="ttdeci">unsigned int numChildren</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00087">mergefis.c:87</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a521f3fc4c8625bfaab8ec87380017b34"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">XML_ELEM_s::numAttr</a></div><div class="ttdeci">unsigned int numAttr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00091">mergefis.c:91</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a222a2f158ef04cfafe9db4f5b4f73b48"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">XML_ATTR_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00077">mergefis.c:77</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a6b29c3858dc75de22e5837df322d3d50"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">XML_ELEM_s::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the element. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00084">mergefis.c:84</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a097a64a814dddae61d973a53020df6fa"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">XML_ELEM_s::children</a></div><div class="ttdeci">struct XML_ELEM_s * children</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00089">mergefis.c:89</a></div></div>
<div class="ttc" id="mergefis_8c_html_aad04e20575af146df6c0fdc5fd951d29"><div class="ttname"><a href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a></div><div class="ttdeci">static void freeXmlTree(XML_ELEM_t *data)</div><div class="ttdoc">Free all contents in all elements of the XML tree to which data belongs. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00178">mergefis.c:178</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_af40695ac732eb4121664f7b07c987cb5"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">XML_ELEM_s::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00095">mergefis.c:95</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a4d4b373ae81784f21c81678dbf558c78"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">XML_ELEM_s::attr</a></div><div class="ttdeci">XML_ATTR_t * attr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00093">mergefis.c:93</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a50d64c4258b8007a5b9b1ca95b1771be"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">XML_ELEM_s::parent</a></div><div class="ttdeci">struct XML_ELEM_s * parent</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00085">mergefis.c:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa5b7c0866ace096ac0d50601a52f3d21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char const* getAttrValue </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>attrName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> const *&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the attribute value with the specified name in the provided element. </p>
<p>Get the attribute value with the specified name in the provided element</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">attrName</td><td>: Name of the attribute of which the value should be returned </td></tr>
    <tr><td class="paramname">elem</td><td>: Element in which the attribute should should be located </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success the pointer to the string value of the specified attribute. Otherwise NULL </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00269">269</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00093">XML_ELEM_s::attr</a>, <a class="el" href="mergefis_8c_source.html#l00077">XML_ATTR_t::name</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="mergefis_8c_source.html#l00091">XML_ELEM_s::numAttr</a>, and <a class="el" href="mergefis_8c_source.html#l00078">XML_ATTR_t::value</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01005">edit_table2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;{</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span>(!attrName || !elem)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordtype">char</span> * result=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; elem-&gt;numAttr; ++i)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span>(!strcmp(elem-&gt;attr[i].name, attrName))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            result = elem-&gt;attr[i].value;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ace83f4edb658c233b298cf37fd439e36"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char const* getElemValue </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>elemName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mergefis_8c.html#abee4f3aaa0e87d0cb65c66dec12ef4f7">XML_ELEM_t</a> const *&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the value of the child-element with the specified name. </p>
<p>Get the value of the child-element with the specified name in the provided element</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">elemName</td><td>: Name of the element of which the value should be returned </td></tr>
    <tr><td class="paramname">elem</td><td>: Element in which the element of the given name should exist as child </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success the pointer to the string value of the specified element. Otherwise NULL </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00296">296</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00089">XML_ELEM_s::children</a>, <a class="el" href="mergefis_8c_source.html#l00084">XML_ELEM_s::name</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="mergefis_8c_source.html#l00087">XML_ELEM_s::numChildren</a>, and <a class="el" href="mergefis_8c_source.html#l00095">XML_ELEM_s::value</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01005">edit_table2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;{</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span>(!elemName || !elem)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordtype">char</span> * result=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; elem-&gt;numChildren; ++i)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span>(!strcmp(elem-&gt;children[i].name, elemName))</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            result = elem-&gt;children[i].value;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a91a28dc5f311e9026d7ed1a6a96bae1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void GetUbxChecksumU4 </td>
          <td>(</td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>pCrc_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>pCrc_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00490">490</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l00507">CheckUbxChecksumU4()</a>, and <a class="el" href="mergefis_8c_source.html#l00536">UpdateImageCrc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc_a = 0;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc_b = 0;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    length /= 4;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">while</span> (length--)</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        crc_a += *pData++;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        crc_b += crc_a;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    *pCrc_a = crc_a;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    *pCrc_b = crc_b;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5ef8066d50468585d25eab1f10a81c3c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void hex_string_to_char_array </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hex_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00473">473</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01192">mergefis_load2()</a>, and <a class="el" href="mergefis_8c_source.html#l00949">stringToU4()</a>.</p>
<div class="fragment"><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;{</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    assert(hex_string &amp;&amp; data);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; strlen(hex_string); i+=2)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordtype">char</span> buf[3];</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        buf[0] = hex_string[i];</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        buf[1] = hex_string[i+1];</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        buf[2] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        sscanf(buf, <span class="stringliteral">&quot;%x&quot;</span>, &amp;c);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        data[i&gt;&gt;1] = (char)c;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee23fc201a79253b9771928f47140c03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> isElementOrAttr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> const *&#160;</td>
          <td class="paramname"><em>xmlData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Does the current XML parsing state point to the element or attribute name? </p>
<p>Check if the current state of parsing is occupied with the element and/or attribute provided. If only the element is specified it is enough if the parser is processing an element of the specified name at the moment to make the test succeed. If additionally an attribute is specified (non-NULL), the parser must currently also be processing an attribute of the specified name within the specified element.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xmlData</td><td>: Current XML parsing state </td></tr>
    <tr><td class="paramname">tag</td><td>: Name of the tag for which it should be checked if the the parser is currently processing it. </td></tr>
    <tr><td class="paramname">attr</td><td>: Name of the attribute for which it should be checked if the the parser is currently processing it. (May be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE on success, FALSE otherwise </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00329">329</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="types_8h_source.html#l00075">FALSE</a>, <a class="el" href="mergefis_8h_source.html#l00125">XML_HNDL_t::state</a>, and <a class="el" href="types_8h_source.html#l00076">TRUE</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l00366">findNextInXml()</a>.</p>
<div class="fragment"><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;{</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span>(!tag || !xmlData)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> result=<a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span>(xmlData-&gt;state.elem &amp;&amp; !strcmp(tag, xmlData-&gt;state.elem))</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span>(attr)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">if</span>(xmlData-&gt;state.attr &amp;&amp; !strcmp(attr, xmlData-&gt;state.attr))</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                result=<a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!xmlData-&gt;state.attr) <span class="comment">// attr must not be set</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="comment">// Only Element requested and</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            result=<a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div>
<div class="ttc" id="types_8h_html_a050c65e107f0c828f856a231f4b4e788"><div class="ttname"><a href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a></div><div class="ttdeci">int BOOL</div><div class="ttdoc">Boolean type. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00073">types.h:73</a></div></div>
<div class="ttc" id="types_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdoc">Boolean FALSE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00075">types.h:75</a></div></div>
<div class="ttc" id="types_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdoc">Boolean TRUE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00076">types.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2dc444529662f3582705348302170a7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lib_crc_crc32 </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>seed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>pkAdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate 4 byte CRC. </p>
<p>Returns 4 byte CRC of provided data</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seed</td><td>Seed of CRC </td></tr>
    <tr><td class="paramname">pkAdr</td><td>pointer to the data </td></tr>
    <tr><td class="paramname">size</td><td>size of the data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated 32bit CRC </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00517">517</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00104">lib_crc_kCrc32table</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01192">mergefis_load2()</a>, and <a class="el" href="image_8c_source.html#l00051">ValidateImage()</a>.</p>
<div class="fragment"><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;{</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pk = (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)pkAdr;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc = seed;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">while</span> (size --)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        crc = (((crc &gt;&gt; 8) &amp; 0x00FFFFFF) ^ <a class="code" href="mergefis_8c.html#abdf28f2e59e90270ae53dea84b66db20">lib_crc_kCrc32table</a>[(crc ^ *pk++) &amp; 0x000000FF]);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">return</span> crc;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div>
<div class="ttc" id="mergefis_8c_html_abdf28f2e59e90270ae53dea84b66db20"><div class="ttname"><a href="mergefis_8c.html#abdf28f2e59e90270ae53dea84b66db20">lib_crc_kCrc32table</a></div><div class="ttdeci">const unsigned int lib_crc_kCrc32table[256]</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00104">mergefis.c:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5736369b7efb562e0d1726ac6cb46657"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int mergefis_get_sector_count </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>fis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the sector count in the FIS. </p>
<p>Return the sector count in the FIS</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fis</td><td>The FIS definition from which to extract the sector count </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated sector count </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l01160">1160</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8h_source.html#l00060">MAJOR_REV_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00061">MINOR_REV_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00047">SECTOR_COUNT_POSITION</a>, and <a class="el" href="mergefis_8h_source.html#l00059">SECTOR_COUNT_POSITION_VER3</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>.</p>
<div class="fragment"><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;{</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span>(fis[<a class="code" href="mergefis_8h.html#a21f89fbfd20d36cef02adcde686f7aad">MAJOR_REV_POSITION</a>] == 0x3 &amp;&amp; fis[<a class="code" href="mergefis_8h.html#ab2be27b3b4a1635812e4753d15ec5f9f">MINOR_REV_POSITION</a>] == 0x0)</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="keywordflow">return</span> (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)fis[<a class="code" href="mergefis_8h.html#abe74c2049726339a423ffc5481f8b3b0">SECTOR_COUNT_POSITION_VER3</a> + 0]) &amp; 0xFF) &lt;&lt;   0) |</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;               (((<span class="keywordtype">unsigned</span> int)((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)fis[<a class="code" href="mergefis_8h.html#abe74c2049726339a423ffc5481f8b3b0">SECTOR_COUNT_POSITION_VER3</a> + 1]) &amp; 0xFF) &lt;&lt;   8);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="keywordflow">return</span> (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)((<span class="keywordtype">unsigned</span> char)fis[<a class="code" href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a> + 0]) &amp; 0xFF) &lt;&lt;   0) |</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;               (((<span class="keywordtype">unsigned</span> int)((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)fis[<a class="code" href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a> + 1]) &amp; 0xFF) &lt;&lt;   8) |</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;               (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)((<span class="keywordtype">unsigned</span> char)fis[<a class="code" href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a> + 2]) &amp; 0xFF) &lt;&lt;  16) |</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;               (((<span class="keywordtype">unsigned</span> int)((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)fis[<a class="code" href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a> + 3]) &amp; 0xFF) &lt;&lt;  24);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;}</div>
<div class="ttc" id="mergefis_8h_html_a21f89fbfd20d36cef02adcde686f7aad"><div class="ttname"><a href="mergefis_8h.html#a21f89fbfd20d36cef02adcde686f7aad">MAJOR_REV_POSITION</a></div><div class="ttdeci">#define MAJOR_REV_POSITION</div><div class="ttdoc">Position of the Major revison in Version 3 of FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00060">mergefis.h:60</a></div></div>
<div class="ttc" id="mergefis_8h_html_ab2be27b3b4a1635812e4753d15ec5f9f"><div class="ttname"><a href="mergefis_8h.html#ab2be27b3b4a1635812e4753d15ec5f9f">MINOR_REV_POSITION</a></div><div class="ttdeci">#define MINOR_REV_POSITION</div><div class="ttdoc">Position of the Minor revison in Version 3 of FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00061">mergefis.h:61</a></div></div>
<div class="ttc" id="mergefis_8h_html_aaa43e3d506c512bf68244321bc6e40f7"><div class="ttname"><a href="mergefis_8h.html#aaa43e3d506c512bf68244321bc6e40f7">SECTOR_COUNT_POSITION</a></div><div class="ttdeci">#define SECTOR_COUNT_POSITION</div><div class="ttdoc">Position of the sector count in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00047">mergefis.h:47</a></div></div>
<div class="ttc" id="mergefis_8h_html_abe74c2049726339a423ffc5481f8b3b0"><div class="ttname"><a href="mergefis_8h.html#abe74c2049726339a423ffc5481f8b3b0">SECTOR_COUNT_POSITION_VER3</a></div><div class="ttdeci">#define SECTOR_COUNT_POSITION_VER3</div><div class="ttdoc">Position of the sector count in Version 3 of FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00059">mergefis.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5ed5ea69800bed0f911492a7a79d7708"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int mergefis_get_sector_size </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>fis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the sector size in the FIS. </p>
<p>Return the sector size in the FIS</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fis</td><td>The FIS definition from which to extract the sector size </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The calculated sector size </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l01176">1176</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8h_source.html#l00060">MAJOR_REV_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00061">MINOR_REV_POSITION</a>, <a class="el" href="mergefis_8h_source.html#l00046">SECTOR_SIZE_POSITION</a>, and <a class="el" href="mergefis_8h_source.html#l00058">SECTOR_SIZE_VER3</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>.</p>
<div class="fragment"><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;{</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">if</span>(fis[<a class="code" href="mergefis_8h.html#a21f89fbfd20d36cef02adcde686f7aad">MAJOR_REV_POSITION</a>] == 0x3 &amp;&amp; fis[<a class="code" href="mergefis_8h.html#ab2be27b3b4a1635812e4753d15ec5f9f">MINOR_REV_POSITION</a>] == 0x0)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a9214b35e26c728475e36269881c5cc18">SECTOR_SIZE_VER3</a>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    {</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">return</span> (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(fis[<a class="code" href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a> + 0]) &amp; 0xFF) &lt;&lt;   0) |</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;               (((<span class="keywordtype">unsigned</span> int)(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(fis[<a class="code" href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a> + 1]) &amp; 0xFF) &lt;&lt;   8) |</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;               (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(<span class="keywordtype">unsigned</span> char)(fis[<a class="code" href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a> + 2]) &amp; 0xFF) &lt;&lt;  16) |</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;               (((<span class="keywordtype">unsigned</span> int)(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(fis[<a class="code" href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a> + 3]) &amp; 0xFF) &lt;&lt;  24);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;}</div>
<div class="ttc" id="mergefis_8h_html_a21f89fbfd20d36cef02adcde686f7aad"><div class="ttname"><a href="mergefis_8h.html#a21f89fbfd20d36cef02adcde686f7aad">MAJOR_REV_POSITION</a></div><div class="ttdeci">#define MAJOR_REV_POSITION</div><div class="ttdoc">Position of the Major revison in Version 3 of FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00060">mergefis.h:60</a></div></div>
<div class="ttc" id="mergefis_8h_html_ab2be27b3b4a1635812e4753d15ec5f9f"><div class="ttname"><a href="mergefis_8h.html#ab2be27b3b4a1635812e4753d15ec5f9f">MINOR_REV_POSITION</a></div><div class="ttdeci">#define MINOR_REV_POSITION</div><div class="ttdoc">Position of the Minor revison in Version 3 of FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00061">mergefis.h:61</a></div></div>
<div class="ttc" id="mergefis_8h_html_a9214b35e26c728475e36269881c5cc18"><div class="ttname"><a href="mergefis_8h.html#a9214b35e26c728475e36269881c5cc18">SECTOR_SIZE_VER3</a></div><div class="ttdeci">#define SECTOR_SIZE_VER3</div><div class="ttdoc">Sector size in the Version 3 of FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00058">mergefis.h:58</a></div></div>
<div class="ttc" id="mergefis_8h_html_a5f21bffb775f3e2b9a0b7d314812a2d1"><div class="ttname"><a href="mergefis_8h.html#a5f21bffb775f3e2b9a0b7d314812a2d1">SECTOR_SIZE_POSITION</a></div><div class="ttdeci">#define SECTOR_SIZE_POSITION</div><div class="ttdoc">Position of the sector size in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00046">mergefis.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a355730c88715f80ba18bd8cce877e1bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bc">MERGEFIS_RETVAL_t</a> mergefis_load </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>fis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>fisSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fisFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>jedec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the image of the FIS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fis</td><td>Pointer to pointer of the FIS image </td></tr>
    <tr><td class="paramname">fisSize</td><td>Size of the allocated structure </td></tr>
    <tr><td class="paramname">fisFile</td><td>Path to the FIS file </td></tr>
    <tr><td class="paramname">jedec</td><td>JEDEC of the device the FIS image should be retrieved for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>success / error code </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l01407">1407</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8h_source.html#l00126">XML_HNDL_t::buf</a>, <a class="el" href="types_8h_source.html#l00075">FALSE</a>, <a class="el" href="mergefis_8h_source.html#l00124">XML_HNDL_t::fd</a>, <a class="el" href="mergefis_8c_source.html#l00366">findNextInXml()</a>, <a class="el" href="mergefis_8h_source.html#l00133">MERGEFIS_FILE_NOT_FOUND</a>, <a class="el" href="mergefis_8h_source.html#l00135">MERGEFIS_INCORRECT_XML</a>, <a class="el" href="mergefis_8c_source.html#l01192">mergefis_load2()</a>, <a class="el" href="mergefis_8h_source.html#l00132">MERGEFIS_OK</a>, <a class="el" href="mergefis_8h_source.html#l00139">MERGEFIS_UNKNOWN</a>, <a class="el" href="mergefis_8h_source.html#l00134">MERGEFIS_VERSION_ERROR</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="mergefis_8h_source.html#l00125">XML_HNDL_t::state</a>, and <a class="el" href="types_8h_source.html#l00076">TRUE</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>.</p>
<div class="fragment"><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;{</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span>(!fis || !fisSize || !fisFile)</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcaf8236a4c96b348374216a49de3a40a99">MERGEFIS_UNKNOWN</a>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="comment">//open the FIS XML file</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> xmlData;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">fd</a> = open(fisFile, O_RDONLY);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">if</span> ( xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">fd</a> &lt; 0 )</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca4671f9f3f6c0099fdd88d7eb2e91e00d">MERGEFIS_FILE_NOT_FOUND</a>;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bc">MERGEFIS_RETVAL_t</a> result=<a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcaf8236a4c96b348374216a49de3a40a99">MERGEFIS_UNKNOWN</a>;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="comment">// Find optional revision information</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    yxml_init(&amp;xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>, xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a1dde4a13407349ad24308075db0af83e">buf</a>, <span class="keyword">sizeof</span>(xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a1dde4a13407349ad24308075db0af83e">buf</a>));</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordtype">char</span> *revision=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <a class="code" href="mergefis_8c.html#a8a1140bc8dba273c6decd249f4ca42b7">findNextInXml</a>(&amp;xmlData, <span class="stringliteral">&quot;flash&quot;</span>, <span class="stringliteral">&quot;revision&quot;</span>, &amp;revision); <span class="comment">// optional</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="comment">// reinitialize yxml, to make sure we start from the beginning again</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">if</span>(lseek(xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">fd</a>, 0, SEEK_SET)==1)</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcaf8236a4c96b348374216a49de3a40a99">MERGEFIS_UNKNOWN</a>;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    yxml_init(&amp;xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>, xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a1dde4a13407349ad24308075db0af83e">buf</a>, <span class="keyword">sizeof</span>(xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a1dde4a13407349ad24308075db0af83e">buf</a>));</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keywordtype">char</span> *version=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> versionStrLen=<a class="code" href="mergefis_8c.html#a8a1140bc8dba273c6decd249f4ca42b7">findNextInXml</a>(&amp;xmlData, <span class="stringliteral">&quot;flash&quot;</span>, <span class="stringliteral">&quot;fisVersion&quot;</span>, &amp;version);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="comment">// At least one character must have been found (excluding terminating character)</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordflow">if</span>(versionStrLen &lt; 1)</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        result=<a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca438c243b83c8cf9d481f62a8090a5502">MERGEFIS_INCORRECT_XML</a>;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="keywordflow">if</span> ( strncmp(version, <span class="stringliteral">&quot;2&quot;</span>, 1) == 0 )</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            result=<a class="code" href="mergefis_8c.html#a0311fbd10e9c76bd2ba50496cb6e9694">mergefis_load2</a>(fis, fisSize, &amp;xmlData , jedec, revision);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            result=<a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca7c0065141b8bd3d5c66108547099bcb4">MERGEFIS_VERSION_ERROR</a>;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        <span class="comment">// Only if the previous operations were all successful</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="comment">// it is required to parse until the end of the file</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="comment">// to make sure the XML is not malformed</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="keywordflow">if</span>(result==<a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca1c452f34a43f480ec23a6fef45eeee55">MERGEFIS_OK</a>)</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            <span class="comment">// Read and parse the remaining parts of the XML</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <span class="comment">// to make sure it is not malformed</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            yxml_ret_t ret=YXML_EEOF;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            <a class="code" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> exitLoop = <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            <span class="keywordflow">do</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                <span class="comment">// Every read error is handled as unexpected EOF</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                ret=YXML_EEOF;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                <span class="keywordtype">char</span> byte;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                <span class="keywordtype">int</span> rd = read(xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">fd</a>, &amp;byte, <span class="keyword">sizeof</span>(byte));</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                <span class="keywordflow">if</span>( rd == <span class="keyword">sizeof</span>(byte))</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                {</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                    ret=yxml_parse(&amp;xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>, byte);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                    <span class="comment">// Error case?</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                    <span class="keywordflow">if</span>(ret &lt; YXML_OK)</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                        exitLoop = <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                }</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rd == 0)</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                    ret=yxml_eof(&amp;xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">state</a>);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                    exitLoop = <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;            } <span class="keywordflow">while</span>(!exitLoop);</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            <span class="comment">// yxml_eof must now have ended with YXML_OK,</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            <span class="comment">// otherwise the file is malformed</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            <span class="keywordflow">if</span>(ret != YXML_OK)</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                result = <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca438c243b83c8cf9d481f62a8090a5502">MERGEFIS_INCORRECT_XML</a>;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    }</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    free(revision);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    free(version);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    close(xmlData.<a class="code" href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">fd</a>);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;}</div>
<div class="ttc" id="mergefis_8c_html_a0311fbd10e9c76bd2ba50496cb6e9694"><div class="ttname"><a href="mergefis_8c.html#a0311fbd10e9c76bd2ba50496cb6e9694">mergefis_load2</a></div><div class="ttdeci">static MERGEFIS_RETVAL_t mergefis_load2(char **fis, size_t *fisSize, XML_HNDL_t *xmlData, const unsigned int jedec, char const *revisionString)</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l01192">mergefis.c:1192</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bca438c243b83c8cf9d481f62a8090a5502"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca438c243b83c8cf9d481f62a8090a5502">MERGEFIS_INCORRECT_XML</a></div><div class="ttdoc">Error in the XML structure. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00135">mergefis.h:135</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bcaf8236a4c96b348374216a49de3a40a99"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcaf8236a4c96b348374216a49de3a40a99">MERGEFIS_UNKNOWN</a></div><div class="ttdoc">Unknown state. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00139">mergefis.h:139</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bca7c0065141b8bd3d5c66108547099bcb4"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca7c0065141b8bd3d5c66108547099bcb4">MERGEFIS_VERSION_ERROR</a></div><div class="ttdoc">Versions do not match. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00134">mergefis.h:134</a></div></div>
<div class="ttc" id="struct_x_m_l___h_n_d_l__t_html_a2f2fc644da35f7ce44f75cc69600b90e"><div class="ttname"><a href="struct_x_m_l___h_n_d_l__t.html#a2f2fc644da35f7ce44f75cc69600b90e">XML_HNDL_t::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">File descriptor of the XML file. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00124">mergefis.h:124</a></div></div>
<div class="ttc" id="types_8h_html_a050c65e107f0c828f856a231f4b4e788"><div class="ttname"><a href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a></div><div class="ttdeci">int BOOL</div><div class="ttdoc">Boolean type. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00073">types.h:73</a></div></div>
<div class="ttc" id="types_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdoc">Boolean FALSE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00075">types.h:75</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bca1c452f34a43f480ec23a6fef45eeee55"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca1c452f34a43f480ec23a6fef45eeee55">MERGEFIS_OK</a></div><div class="ttdoc">All OK. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00132">mergefis.h:132</a></div></div>
<div class="ttc" id="struct_x_m_l___h_n_d_l__t_html_a62719fabbe741537ad07b5f970b7de13"><div class="ttname"><a href="struct_x_m_l___h_n_d_l__t.html#a62719fabbe741537ad07b5f970b7de13">XML_HNDL_t::state</a></div><div class="ttdeci">yxml_t state</div><div class="ttdoc">State of the parser. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00125">mergefis.h:125</a></div></div>
<div class="ttc" id="struct_x_m_l___h_n_d_l__t_html"><div class="ttname"><a href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a></div><div class="ttdoc">XML parser handler used to extract all information from an XML file. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00122">mergefis.h:122</a></div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bca4671f9f3f6c0099fdd88d7eb2e91e00d"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca4671f9f3f6c0099fdd88d7eb2e91e00d">MERGEFIS_FILE_NOT_FOUND</a></div><div class="ttdoc">Could not find the FIS file. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00133">mergefis.h:133</a></div></div>
<div class="ttc" id="struct_x_m_l___h_n_d_l__t_html_a1dde4a13407349ad24308075db0af83e"><div class="ttname"><a href="struct_x_m_l___h_n_d_l__t.html#a1dde4a13407349ad24308075db0af83e">XML_HNDL_t::buf</a></div><div class="ttdeci">char buf[4096]</div><div class="ttdoc">Buffer used by the parser. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00126">mergefis.h:126</a></div></div>
<div class="ttc" id="types_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdoc">Boolean TRUE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00076">types.h:76</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bc"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bc">MERGEFIS_RETVAL_t</a></div><div class="ttdeci">MERGEFIS_RETVAL_t</div><div class="ttdoc">Defines the return value of the mergefis_load function. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00131">mergefis.h:131</a></div></div>
<div class="ttc" id="mergefis_8c_html_a8a1140bc8dba273c6decd249f4ca42b7"><div class="ttname"><a href="mergefis_8c.html#a8a1140bc8dba273c6decd249f4ca42b7">findNextInXml</a></div><div class="ttdeci">static long long findNextInXml(XML_HNDL_t *xmlData, char const *tag, char const *attr, char **result)</div><div class="ttdoc">Find the next value for the passed element or attribute name in an XML file. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00366">mergefis.c:366</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0311fbd10e9c76bd2ba50496cb6e9694"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bc">MERGEFIS_RETVAL_t</a> mergefis_load2 </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>fis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>fisSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_x_m_l___h_n_d_l__t.html">XML_HNDL_t</a> *&#160;</td>
          <td class="paramname"><em>xmlData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>jedec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>revisionString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l01192">1192</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00093">XML_ELEM_s::attr</a>, <a class="el" href="mergefis_8c_source.html#l00089">XML_ELEM_s::children</a>, <a class="el" href="mergefis_8h_source.html#l00042">DRV_SQI_FIS_CHECKSUM_SEED</a>, <a class="el" href="mergefis_8c_source.html#l01005">edit_table2()</a>, <a class="el" href="mergefis_8c_source.html#l00916">findCmdSet()</a>, <a class="el" href="mergefis_8c_source.html#l00863">findDevice()</a>, <a class="el" href="mergefis_8c_source.html#l00178">freeXmlTree()</a>, <a class="el" href="mergefis_8c_source.html#l00473">hex_string_to_char_array()</a>, <a class="el" href="mergefis_8c_source.html#l00517">lib_crc_crc32()</a>, <a class="el" href="mergefis_8h_source.html#l00137">MERGEFIS_CODE_CORRUPTED</a>, <a class="el" href="mergefis_8h_source.html#l00135">MERGEFIS_INCORRECT_XML</a>, <a class="el" href="mergefis_8h_source.html#l00136">MERGEFIS_JEDEC_NOT_SUPPORTED</a>, <a class="el" href="mergefis_8h_source.html#l00132">MERGEFIS_OK</a>, <a class="el" href="mergefis_8h_source.html#l00139">MERGEFIS_UNKNOWN</a>, <a class="el" href="mergefis_8c_source.html#l00077">XML_ATTR_t::name</a>, <a class="el" href="mergefis_8c_source.html#l00084">XML_ELEM_s::name</a>, <a class="el" href="types_8h_source.html#l00078">NULL</a>, <a class="el" href="mergefis_8c_source.html#l00091">XML_ELEM_s::numAttr</a>, <a class="el" href="mergefis_8c_source.html#l00087">XML_ELEM_s::numChildren</a>, <a class="el" href="mergefis_8c_source.html#l00085">XML_ELEM_s::parent</a>, <a class="el" href="mergefis_8h_source.html#l00055">REVISION_POSITION</a>, <a class="el" href="mergefis_8c_source.html#l00949">stringToU4()</a>, <a class="el" href="mergefis_8c_source.html#l00078">XML_ATTR_t::value</a>, and <a class="el" href="mergefis_8c_source.html#l00095">XML_ELEM_s::value</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01407">mergefis_load()</a>.</p>
<div class="fragment"><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;{</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">if</span>(!fis || !fisSize || !xmlData)</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcaf8236a4c96b348374216a49de3a40a99">MERGEFIS_UNKNOWN</a>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="comment">//search for our device in the flash section of the XML file</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a> devEntries[] = {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="comment">// Attributes start</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        { <span class="stringliteral">&quot;jedec&quot;</span>,                  YXML_ATTRVAL, <span class="stringliteral">&quot;device&quot;</span>                   },</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        { <span class="stringliteral">&quot;cmd&quot;</span>,                    YXML_ATTRVAL, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        { <span class="stringliteral">&quot;supply&quot;</span>,                 YXML_ATTRVAL, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        { <span class="stringliteral">&quot;writeSuspend&quot;</span>,           YXML_ATTRVAL, <span class="stringliteral">&quot;cap&quot;</span>                      },</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        { <span class="stringliteral">&quot;fastProgram&quot;</span>,            YXML_ATTRVAL, <span class="stringliteral">&quot;cap&quot;</span>                      },</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        { <span class="stringliteral">&quot;deepSleep&quot;</span>,              YXML_ATTRVAL, <span class="stringliteral">&quot;cap&quot;</span>                      },</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        { <span class="stringliteral">&quot;speed&quot;</span>,                  YXML_ATTRVAL, <span class="stringliteral">&quot;cap&quot;</span>                      },</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="comment">// Element start</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        { <span class="stringliteral">&quot;category&quot;</span>,               YXML_CONTENT, <span class="stringliteral">&quot;&quot;</span>                         },</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        { <span class="stringliteral">&quot;device&quot;</span>,                 YXML_CONTENT, <span class="stringliteral">&quot;&quot;</span>                         },</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        { <span class="stringliteral">&quot;device&quot;</span>,                 YXML_CONTENT, <span class="stringliteral">&quot;category&quot;</span>                 },</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        { <span class="stringliteral">&quot;numBytesWrite&quot;</span>,          YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        { <span class="stringliteral">&quot;minEraseSuspend&quot;</span>,        YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        { <span class="stringliteral">&quot;hsp&quot;</span>,                    YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        { <span class="stringliteral">&quot;cfg&quot;</span>,                    YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        { <span class="stringliteral">&quot;cap&quot;</span>,                    YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        { <span class="stringliteral">&quot;sectorSize&quot;</span>,             YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        { <span class="stringliteral">&quot;sectorCount&quot;</span>,            YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        { <span class="stringliteral">&quot;deepSleepOpcode&quot;</span>,        YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        { <span class="stringliteral">&quot;deepSleepWakeupOpcode&quot;</span>,  YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        { <span class="stringliteral">&quot;deepSleepWakeupTimeout&quot;</span>, YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        { <span class="stringliteral">&quot;maxSpeed&quot;</span>,               YXML_CONTENT, <span class="stringliteral">&quot;category|device&quot;</span>          },</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        { <span class="stringliteral">&quot;&quot;</span>,                       YXML_CONTENT, <span class="stringliteral">&quot;sectorSize&quot;</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                                                  <span class="stringliteral">&quot;|sectorCount&quot;</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                                                  <span class="stringliteral">&quot;|hsp&quot;</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                                                  <span class="stringliteral">&quot;|cfg&quot;</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                                                  <span class="stringliteral">&quot;|minEraseSuspend&quot;</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                                                  <span class="stringliteral">&quot;|numBytesWrite&quot;</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                                                  <span class="stringliteral">&quot;|deepSleepOpcode&quot;</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                                                  <span class="stringliteral">&quot;|deepSleepWakeupTimeout&quot;</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                                                  <span class="stringliteral">&quot;|maxSpeed&quot;</span>                }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    };</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *device = <a class="code" href="mergefis_8c.html#a0b0120e85854eff2a42197f70aa76745">findDevice</a>( xmlData</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                                   , devEntries</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                                   , <span class="keyword">sizeof</span>(devEntries)/<span class="keyword">sizeof</span>(devEntries[0])</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                                   , jedec );</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">//still not found</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span> (device == <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca4e1c9509cd502b478135636e7aeec106">MERGEFIS_JEDEC_NOT_SUPPORTED</a>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordtype">char</span> *deviceCmd = <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="comment">// Search for command attribute</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordflow">for</span>(i = 0;  i &lt; device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a> &amp;&amp; !deviceCmd; ++i)</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="keywordflow">if</span>(!strcmp(device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[i].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">name</a>, <span class="stringliteral">&quot;cmd&quot;</span>))</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            deviceCmd = strdup(device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[i].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">value</a>);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    }</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="comment">// If no device cmd has been found and a parent exists</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="comment">// search in the corresponding parent</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">if</span>(device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a> &amp;&amp; !deviceCmd)</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <span class="keywordflow">for</span>(i = 0;  i &lt; device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">numAttr</a>; ++i)</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordflow">if</span>(!strcmp(device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[i].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">name</a>, <span class="stringliteral">&quot;cmd&quot;</span>))</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                deviceCmd = strdup(device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">attr</a>[i].<a class="code" href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">value</a>);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">// If no cmd value has been found, this is a problem.</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> (deviceCmd == <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(device);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca438c243b83c8cf9d481f62a8090a5502">MERGEFIS_INCORRECT_XML</a>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a> cmdsetEntries[]= {</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="comment">// Attributes start</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        { <span class="stringliteral">&quot;name&quot;</span>,                            YXML_ATTRVAL, <span class="stringliteral">&quot;cmdset&quot;</span>                },</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="comment">// Element start</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;        { <span class="stringliteral">&quot;cmdset&quot;</span>,                          YXML_CONTENT, <span class="stringliteral">&quot;&quot;</span>                      },</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        { <span class="stringliteral">&quot;length&quot;</span>,                          YXML_CONTENT, <span class="stringliteral">&quot;cmdset&quot;</span>                },</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        { <span class="stringliteral">&quot;checksum&quot;</span>,                        YXML_CONTENT, <span class="stringliteral">&quot;cmdset&quot;</span>                },</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        { <span class="stringliteral">&quot;code&quot;</span>,                            YXML_CONTENT, <span class="stringliteral">&quot;cmdset&quot;</span>                },</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        { <span class="stringliteral">&quot;&quot;</span>,                                YXML_CONTENT, <span class="stringliteral">&quot;length|code|checksum&quot;</span>  }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    };</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">// Find the corresponding command set</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_t</a> *cmdset = <a class="code" href="mergefis_8c.html#af07293846255bf6c4b9179653d78dd20">findCmdSet</a>( xmlData</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                                   , cmdsetEntries</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                                   , <span class="keyword">sizeof</span>(cmdsetEntries)/<span class="keyword">sizeof</span>(cmdsetEntries[0])</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                                   , deviceCmd );</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">if</span>(cmdset == <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(device);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        free(deviceCmd);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca438c243b83c8cf9d481f62a8090a5502">MERGEFIS_INCORRECT_XML</a>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="comment">// Get the required code, lenStr and checksum</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordtype">char</span> * lenStr=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordtype">char</span> * checksum=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordtype">char</span> * code=<a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; cmdset-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">numChildren</a>; ++i)</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="keywordflow">if</span>(!strcmp(cmdset-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i].<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>, <span class="stringliteral">&quot;length&quot;</span>))</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            lenStr = cmdset-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i].<a class="code" href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">value</a>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        }</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(cmdset-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i].<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>, <span class="stringliteral">&quot;checksum&quot;</span>))</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            checksum = cmdset-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i].<a class="code" href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">value</a>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(cmdset-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i].<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">name</a>, <span class="stringliteral">&quot;code&quot;</span>))</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            code = cmdset-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">children</a>[i].<a class="code" href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">value</a>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span>(!lenStr || !code)</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(device);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(cmdset);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        free(deviceCmd);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca438c243b83c8cf9d481f62a8090a5502">MERGEFIS_INCORRECT_XML</a>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    }</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> len = 0;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a>(lenStr, &amp;len);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="comment">//create buffer to convert the code into</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordtype">char</span> *data = malloc(len);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordtype">size_t</span> dataSize = len;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">if</span>(!data)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(device);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(cmdset);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        free(deviceCmd);</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcaf8236a4c96b348374216a49de3a40a99">MERGEFIS_UNKNOWN</a>;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">//fill it with 0xFF</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    memset(data, 0xff, dataSize);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="comment">//copy the code into the buffer</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <a class="code" href="mergefis_8c.html#a5ef8066d50468585d25eab1f10a81c3c">hex_string_to_char_array</a>(code, data);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="comment">//copy the CRC into the buffer</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <a class="code" href="mergefis_8c.html#a5ef8066d50468585d25eab1f10a81c3c">hex_string_to_char_array</a>(checksum, &amp;data[dataSize-4]);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="comment">//check CRC</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc = <a class="code" href="mergefis_8c.html#a2dc444529662f3582705348302170a7c">lib_crc_crc32</a>(<a class="code" href="mergefis_8h.html#a46535768c9ff444d61312e730f595c8a">DRV_SQI_FIS_CHECKSUM_SEED</a>, (<span class="keyword">const</span> <span class="keywordtype">void</span> *)data, dataSize-4);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crcWritten = (((<span class="keywordtype">unsigned</span> int)((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)data[dataSize-4]) &amp; 0xFF) &lt;&lt;  0) |</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                              (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)((<span class="keywordtype">unsigned</span> char)data[dataSize-3]) &amp; 0xFF) &lt;&lt;  8) |</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                              (((<span class="keywordtype">unsigned</span> int)((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)data[dataSize-2]) &amp; 0xFF) &lt;&lt; 16) |</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                              (((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)((<span class="keywordtype">unsigned</span> char)data[dataSize-1]) &amp; 0xFF) &lt;&lt; 24);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordflow">if</span>( crc != crcWritten )</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        free(data);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(cmdset);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        free(deviceCmd);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcaa0d352b55efc138b8ca352176afd7a38">MERGEFIS_CODE_CORRUPTED</a>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="comment">//apply first the settings of the category, if existing</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">if</span>(device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>)</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <a class="code" href="mergefis_8c.html#ab3ac22472913610e5273754d13056259">edit_table2</a>(data, device-&gt;<a class="code" href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">parent</a>);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="comment">//and now the settings of the device</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="mergefis_8c.html#ab3ac22472913610e5273754d13056259">edit_table2</a>(data, device);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="comment">// Update JEDEC</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    data[4] = (char) ((jedec &gt;&gt; 16) &amp; 0xFF);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    data[5] = (char) ((jedec &gt;&gt;  8) &amp; 0xFF);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    data[6] = (char) ((jedec &gt;&gt;  0) &amp; 0xFF);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="comment">// Update revision string</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">if</span>(revisionString != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> revision = 0xFFFFFFFF;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        sscanf(revisionString, <span class="stringliteral">&quot;$Rev: %u $&quot;</span>, &amp;revision);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        data[<a class="code" href="mergefis_8h.html#a2a17ace92e2ab1b91af596f018266e8f">REVISION_POSITION</a> + 0] = (char) ((revision &gt;&gt;  0) &amp; 0xFF);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        data[<a class="code" href="mergefis_8h.html#a2a17ace92e2ab1b91af596f018266e8f">REVISION_POSITION</a> + 1] = (char) ((revision &gt;&gt;  8) &amp; 0xFF);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        data[<a class="code" href="mergefis_8h.html#a2a17ace92e2ab1b91af596f018266e8f">REVISION_POSITION</a> + 2] = (char) ((revision &gt;&gt; 16) &amp; 0xFF);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        data[<a class="code" href="mergefis_8h.html#a2a17ace92e2ab1b91af596f018266e8f">REVISION_POSITION</a> + 3] = (char) ((revision &gt;&gt; 24) &amp; 0xFF);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="comment">//update the CRC of the FIS</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    crc = <a class="code" href="mergefis_8c.html#a2dc444529662f3582705348302170a7c">lib_crc_crc32</a>(<a class="code" href="mergefis_8h.html#a46535768c9ff444d61312e730f595c8a">DRV_SQI_FIS_CHECKSUM_SEED</a>, (<span class="keyword">const</span> <span class="keywordtype">void</span> *)data, dataSize-4);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    data[dataSize - 4] = (char) ((crc &gt;&gt;  0) &amp; 0xFF);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    data[dataSize - 3] = (char) ((crc &gt;&gt;  8) &amp; 0xFF);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    data[dataSize - 2] = (char) ((crc &gt;&gt; 16) &amp; 0xFF);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    data[dataSize - 1] = (char) ((crc &gt;&gt; 24) &amp; 0xFF);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    *fis = data;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    *fisSize = dataSize;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">// Clean up</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(device);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a>(cmdset);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    free(deviceCmd);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca1c452f34a43f480ec23a6fef45eeee55">MERGEFIS_OK</a>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;}</div>
<div class="ttc" id="mergefis_8h_html_a46535768c9ff444d61312e730f595c8a"><div class="ttname"><a href="mergefis_8h.html#a46535768c9ff444d61312e730f595c8a">DRV_SQI_FIS_CHECKSUM_SEED</a></div><div class="ttdeci">#define DRV_SQI_FIS_CHECKSUM_SEED</div><div class="ttdoc">Seed used in FIS checksum. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00042">mergefis.h:42</a></div></div>
<div class="ttc" id="struct_x_m_l___r_u_l_e__t_html"><div class="ttname"><a href="struct_x_m_l___r_u_l_e__t.html">XML_RULE_t</a></div><div class="ttdoc">Rule for an XML element or attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00059">mergefis.c:59</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html">XML_ELEM_s</a></div><div class="ttdoc">Defines an XML element in a XML tree. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00082">mergefis.c:82</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bca438c243b83c8cf9d481f62a8090a5502"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca438c243b83c8cf9d481f62a8090a5502">MERGEFIS_INCORRECT_XML</a></div><div class="ttdoc">Error in the XML structure. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00135">mergefis.h:135</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bcaf8236a4c96b348374216a49de3a40a99"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcaf8236a4c96b348374216a49de3a40a99">MERGEFIS_UNKNOWN</a></div><div class="ttdoc">Unknown state. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00139">mergefis.h:139</a></div></div>
<div class="ttc" id="types_8h_html_a05882823395fd219ae0b65679baa29c4"><div class="ttname"><a href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a></div><div class="ttdeci">unsigned __int32 U4</div><div class="ttdoc">32-bit unsigned integer number </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00054">types.h:54</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a8e2de9486b598fc7d78e76f1a2cecbdc"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a8e2de9486b598fc7d78e76f1a2cecbdc">XML_ATTR_t::value</a></div><div class="ttdeci">char * value</div><div class="ttdoc">Value of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00078">mergefis.c:78</a></div></div>
<div class="ttc" id="mergefis_8h_html_a2a17ace92e2ab1b91af596f018266e8f"><div class="ttname"><a href="mergefis_8h.html#a2a17ace92e2ab1b91af596f018266e8f">REVISION_POSITION</a></div><div class="ttdeci">#define REVISION_POSITION</div><div class="ttdoc">Position of the revision in the FIS. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00055">mergefis.h:55</a></div></div>
<div class="ttc" id="mergefis_8c_html_a2dc444529662f3582705348302170a7c"><div class="ttname"><a href="mergefis_8c.html#a2dc444529662f3582705348302170a7c">lib_crc_crc32</a></div><div class="ttdeci">unsigned int lib_crc_crc32(unsigned int seed, const void *pkAdr, unsigned int size)</div><div class="ttdoc">Calculate 4 byte CRC. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00517">mergefis.c:517</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bca4e1c9509cd502b478135636e7aeec106"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca4e1c9509cd502b478135636e7aeec106">MERGEFIS_JEDEC_NOT_SUPPORTED</a></div><div class="ttdoc">JEDEC not supported by this FIS file. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00136">mergefis.h:136</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a69d06651f1697c669e5370dedbef886e"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a69d06651f1697c669e5370dedbef886e">XML_ELEM_s::numChildren</a></div><div class="ttdeci">unsigned int numChildren</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00087">mergefis.c:87</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a521f3fc4c8625bfaab8ec87380017b34"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a521f3fc4c8625bfaab8ec87380017b34">XML_ELEM_s::numAttr</a></div><div class="ttdeci">unsigned int numAttr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00091">mergefis.c:91</a></div></div>
<div class="ttc" id="struct_x_m_l___a_t_t_r__t_html_a222a2f158ef04cfafe9db4f5b4f73b48"><div class="ttname"><a href="struct_x_m_l___a_t_t_r__t.html#a222a2f158ef04cfafe9db4f5b4f73b48">XML_ATTR_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the attribute. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00077">mergefis.c:77</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a6b29c3858dc75de22e5837df322d3d50"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a6b29c3858dc75de22e5837df322d3d50">XML_ELEM_s::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the element. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00084">mergefis.c:84</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bcaa0d352b55efc138b8ca352176afd7a38"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcaa0d352b55efc138b8ca352176afd7a38">MERGEFIS_CODE_CORRUPTED</a></div><div class="ttdoc">Code corrupted. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00137">mergefis.h:137</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bca1c452f34a43f480ec23a6fef45eeee55"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca1c452f34a43f480ec23a6fef45eeee55">MERGEFIS_OK</a></div><div class="ttdoc">All OK. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00132">mergefis.h:132</a></div></div>
<div class="ttc" id="mergefis_8c_html_a0b3e69a365a37dcaf3d0f392b65a2cc9"><div class="ttname"><a href="mergefis_8c.html#a0b3e69a365a37dcaf3d0f392b65a2cc9">stringToU4</a></div><div class="ttdeci">static BOOL stringToU4(char *string, U4 *res)</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00949">mergefis.c:949</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a097a64a814dddae61d973a53020df6fa"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a097a64a814dddae61d973a53020df6fa">XML_ELEM_s::children</a></div><div class="ttdeci">struct XML_ELEM_s * children</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00089">mergefis.c:89</a></div></div>
<div class="ttc" id="mergefis_8c_html_af07293846255bf6c4b9179653d78dd20"><div class="ttname"><a href="mergefis_8c.html#af07293846255bf6c4b9179653d78dd20">findCmdSet</a></div><div class="ttdeci">static XML_ELEM_t * findCmdSet(XML_HNDL_t *xmlData, XML_RULE_t const *allowedEntries, size_t numEntries, char const *cmdsetName)</div><div class="ttdoc">Find the device with the JEDEC given. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00916">mergefis.c:916</a></div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdoc">Null. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00078">types.h:78</a></div></div>
<div class="ttc" id="mergefis_8c_html_ab3ac22472913610e5273754d13056259"><div class="ttname"><a href="mergefis_8c.html#ab3ac22472913610e5273754d13056259">edit_table2</a></div><div class="ttdeci">static void edit_table2(char *fis, XML_ELEM_t const *container)</div><div class="ttdoc">Edit the leading table of the FIS version 2. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l01005">mergefis.c:1005</a></div></div>
<div class="ttc" id="mergefis_8c_html_a0b0120e85854eff2a42197f70aa76745"><div class="ttname"><a href="mergefis_8c.html#a0b0120e85854eff2a42197f70aa76745">findDevice</a></div><div class="ttdeci">static XML_ELEM_t * findDevice(XML_HNDL_t *xmlData, XML_RULE_t const *allowedEntries, size_t numEntries, const unsigned int jedec)</div><div class="ttdoc">Find the device with the JEDEC given. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00863">mergefis.c:863</a></div></div>
<div class="ttc" id="mergefis_8c_html_aad04e20575af146df6c0fdc5fd951d29"><div class="ttname"><a href="mergefis_8c.html#aad04e20575af146df6c0fdc5fd951d29">freeXmlTree</a></div><div class="ttdeci">static void freeXmlTree(XML_ELEM_t *data)</div><div class="ttdoc">Free all contents in all elements of the XML tree to which data belongs. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00178">mergefis.c:178</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_af40695ac732eb4121664f7b07c987cb5"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#af40695ac732eb4121664f7b07c987cb5">XML_ELEM_s::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00095">mergefis.c:95</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a4d4b373ae81784f21c81678dbf558c78"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a4d4b373ae81784f21c81678dbf558c78">XML_ELEM_s::attr</a></div><div class="ttdeci">XML_ATTR_t * attr</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00093">mergefis.c:93</a></div></div>
<div class="ttc" id="struct_x_m_l___e_l_e_m__s_html_a50d64c4258b8007a5b9b1ca95b1771be"><div class="ttname"><a href="struct_x_m_l___e_l_e_m__s.html#a50d64c4258b8007a5b9b1ca95b1771be">XML_ELEM_s::parent</a></div><div class="ttdeci">struct XML_ELEM_s * parent</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00085">mergefis.c:85</a></div></div>
<div class="ttc" id="mergefis_8c_html_a5ef8066d50468585d25eab1f10a81c3c"><div class="ttname"><a href="mergefis_8c.html#a5ef8066d50468585d25eab1f10a81c3c">hex_string_to_char_array</a></div><div class="ttdeci">static void hex_string_to_char_array(const char *hex_string, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00473">mergefis.c:473</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac4eee236d80de78bb5efab5a1970ba31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bc">MERGEFIS_RETVAL_t</a> mergefis_merge </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ImageSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>fis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Merge the flash image with the corresponding FIS data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pData</td><td>Pointer to the flash image </td></tr>
    <tr><td class="paramname">ImageSize</td><td>Size of the flash image </td></tr>
    <tr><td class="paramname">fis</td><td>Pointer to the FIS image </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>success / error code </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l01486">1486</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8h_source.html#l00138">MERGEFIS_CRC_FAILURE</a>, <a class="el" href="mergefis_8h_source.html#l00132">MERGEFIS_OK</a>, and <a class="el" href="mergefis_8c_source.html#l00536">UpdateImageCrc()</a>.</p>

<p>Referenced by <a class="el" href="update_8c_source.html#l00308">UpdateFirmware()</a>.</p>
<div class="fragment"><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;{</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="comment">//merge the images</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    memcpy(&amp;pData[0x40], fis, 0x1000 - 0x40);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="comment">//Update CRC of the whole image</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="mergefis_8c.html#a05629a7f2903d3f238446b5534b59328">UpdateImageCrc</a>(pData, ImageSize))?<a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca1c452f34a43f480ec23a6fef45eeee55">MERGEFIS_OK</a>:<a class="code" href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcafd1af2f55418d3261cde3af7084dd3f3">MERGEFIS_CRC_FAILURE</a>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;}</div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bcafd1af2f55418d3261cde3af7084dd3f3"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bcafd1af2f55418d3261cde3af7084dd3f3">MERGEFIS_CRC_FAILURE</a></div><div class="ttdoc">Overall CRC failure. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00138">mergefis.h:138</a></div></div>
<div class="ttc" id="mergefis_8h_html_a76bb128434d9bcf2485c8f7d10b415bca1c452f34a43f480ec23a6fef45eeee55"><div class="ttname"><a href="mergefis_8h.html#a76bb128434d9bcf2485c8f7d10b415bca1c452f34a43f480ec23a6fef45eeee55">MERGEFIS_OK</a></div><div class="ttdoc">All OK. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8h_source.html#l00132">mergefis.h:132</a></div></div>
<div class="ttc" id="mergefis_8c_html_a05629a7f2903d3f238446b5534b59328"><div class="ttname"><a href="mergefis_8c.html#a05629a7f2903d3f238446b5534b59328">UpdateImageCrc</a></div><div class="ttdeci">static BOOL UpdateImageCrc(char *pImage, const size_t ImageSize)</div><div class="ttdoc">Update the CRC of the flash image. </div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00536">mergefis.c:536</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b3e69a365a37dcaf3d0f392b65a2cc9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> stringToU4 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> *&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00949">949</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="types_8h_source.html#l00075">FALSE</a>, <a class="el" href="mergefis_8c_source.html#l00473">hex_string_to_char_array()</a>, <a class="el" href="types_8h_source.html#l00076">TRUE</a>, and <a class="el" href="mergefis_8c_source.html#l00095">XML_ELEM_s::value</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01005">edit_table2()</a>, and <a class="el" href="mergefis_8c_source.html#l01192">mergefis_load2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;{</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">if</span>(!<span class="keywordtype">string</span> || !res)</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a> tmp = 0;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> ( (<span class="keywordtype">string</span>[0] == <span class="charliteral">&#39;0&#39;</span> &amp;&amp; <span class="keywordtype">string</span>[1] == <span class="charliteral">&#39;x&#39;</span>) || <span class="keywordtype">string</span>[0] == <span class="charliteral">&#39;x&#39;</span> )</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="keywordtype">int</span> offset = 2;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="comment">//we have a hex string that is in MSB order!</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="comment">//0x1000 -&gt; 4096</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">if</span>(<span class="keywordtype">string</span>[0] == <span class="charliteral">&#39;x&#39;</span>)</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            offset = 1;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordtype">size_t</span> len = strlen(&amp;<span class="keywordtype">string</span>[offset]);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">if</span> (len%2 != 0)</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <span class="keywordtype">string</span>[--offset] = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            len++;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        len /= 2;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">if</span> (len &gt; 4)</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            len = 4;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="keywordtype">char</span> *value = malloc(<span class="keyword">sizeof</span>(*value)*len);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">if</span>(!value)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        memset(value, 0x0, len);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <a class="code" href="mergefis_8c.html#a5ef8066d50468585d25eab1f10a81c3c">hex_string_to_char_array</a>(&amp;<span class="keywordtype">string</span>[offset], value);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordtype">size_t</span>  i;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">for</span>(i = 0; i &lt; len; i++)</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            tmp = tmp &lt;&lt; 8;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            tmp |= 0xFF &amp; value[i];</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        free(value);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="comment">//this is a normal decimal string</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordtype">int</span> atoiRes = atoi(<span class="keywordtype">string</span>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">if</span>(atoiRes &lt; 0)</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        tmp = (<a class="code" href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a>) atoiRes;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    *res=tmp;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;}</div>
<div class="ttc" id="types_8h_html_a05882823395fd219ae0b65679baa29c4"><div class="ttname"><a href="types_8h.html#a05882823395fd219ae0b65679baa29c4">U4</a></div><div class="ttdeci">unsigned __int32 U4</div><div class="ttdoc">32-bit unsigned integer number </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00054">types.h:54</a></div></div>
<div class="ttc" id="types_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdoc">Boolean FALSE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00075">types.h:75</a></div></div>
<div class="ttc" id="types_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdoc">Boolean TRUE. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00076">types.h:76</a></div></div>
<div class="ttc" id="mergefis_8c_html_a5ef8066d50468585d25eab1f10a81c3c"><div class="ttname"><a href="mergefis_8c.html#a5ef8066d50468585d25eab1f10a81c3c">hex_string_to_char_array</a></div><div class="ttdeci">static void hex_string_to_char_array(const char *hex_string, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00473">mergefis.c:473</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a05629a7f2903d3f238446b5534b59328"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="types_8h.html#a050c65e107f0c828f856a231f4b4e788">BOOL</a> UpdateImageCrc </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>ImageSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the CRC of the flash image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pImage</td><td>Pointer to the image </td></tr>
    <tr><td class="paramname">ImageSize</td><td>Size of the image </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE Updating of the CRC succeeded </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00536">536</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>References <a class="el" href="mergefis_8c_source.html#l00507">CheckUbxChecksumU4()</a>, and <a class="el" href="mergefis_8c_source.html#l00490">GetUbxChecksumU4()</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l01486">mergefis_merge()</a>.</p>
<div class="fragment"><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc_a;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc_b;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* pCrcrangestart = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)((<span class="keywordtype">char</span>*)pImage+4);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crcpos = ImageSize - 8; <span class="comment">// CRC is two words long</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crcrangesize = crcpos - 4; <span class="comment">// CRC starts behind magic word</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="mergefis_8c.html#a91a28dc5f311e9026d7ed1a6a96bae1a">GetUbxChecksumU4</a>(&amp;crc_a, &amp;crc_b, pCrcrangestart, crcrangesize);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">//MESSAGE(MSG_LEV2, &quot;Updating CRC of buffered image to 0x%08X 0x%08X&quot;, crc_a, crc_b);</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* pCrc = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>*)((<span class="keywordtype">char</span>*)(pImage) + crcpos);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    *pCrc = crc_a;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    *(pCrc+1) = crc_b;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mergefis_8c.html#a6f8c5741f4180fad08358713ff357137">CheckUbxChecksumU4</a>(pCrcrangestart, crcrangesize);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="ttc" id="mergefis_8c_html_a6f8c5741f4180fad08358713ff357137"><div class="ttname"><a href="mergefis_8c.html#a6f8c5741f4180fad08358713ff357137">CheckUbxChecksumU4</a></div><div class="ttdeci">static BOOL CheckUbxChecksumU4(const unsigned int *pData, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00507">mergefis.c:507</a></div></div>
<div class="ttc" id="mergefis_8c_html_a91a28dc5f311e9026d7ed1a6a96bae1a"><div class="ttname"><a href="mergefis_8c.html#a91a28dc5f311e9026d7ed1a6a96bae1a">GetUbxChecksumU4</a></div><div class="ttdeci">static void GetUbxChecksumU4(unsigned int *pCrc_a, unsigned int *pCrc_b, const unsigned int *pData, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="mergefis_8c_source.html#l00490">mergefis.c:490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="abdf28f2e59e90270ae53dea84b66db20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int lib_crc_kCrc32table[256]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This table provides a lookup table for the 32 Bit CRC algorithm </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="mergefis_8c.html#a2dc444529662f3582705348302170a7c" title="Calculate 4 byte CRC. ">lib_crc_crc32</a> </dd></dl>

<p>Definition at line <a class="el" href="mergefis_8c_source.html#l00104">104</a> of file <a class="el" href="mergefis_8c_source.html">mergefis.c</a>.</p>

<p>Referenced by <a class="el" href="mergefis_8c_source.html#l00517">lib_crc_crc32()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="mergefis_8c.html">mergefis.c</a></li>
    <li class="footer">Generated on Sun May 23 2021 19:02:48 for ubxfwupdate by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
